--
-- PostgreSQL database dump
--

-- Dumped from database version 17.5
-- Dumped by pg_dump version 17.5

-- Started on 2025-08-25 00:32:37

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 6 (class 2615 OID 2200)
-- Name: public; Type: SCHEMA; Schema: -; Owner: pg_database_owner
--

CREATE SCHEMA public;


ALTER SCHEMA public OWNER TO pg_database_owner;

--
-- TOC entry 7399 (class 0 OID 0)
-- Dependencies: 6
-- Name: SCHEMA public; Type: COMMENT; Schema: -; Owner: pg_database_owner
--

COMMENT ON SCHEMA public IS 'standard public schema';


--
-- TOC entry 459 (class 1255 OID 21093)
-- Name: add_global_currency(uuid, bigint, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.add_global_currency(p_player_id uuid, p_amount bigint, p_description character varying DEFAULT NULL::character varying) RETURNS bigint
    LANGUAGE plpgsql
    AS $$
DECLARE
    new_balance BIGINT;
BEGIN
    INSERT INTO player_global_currency (player_id, amount)
    VALUES (p_player_id, p_amount)
    ON CONFLICT (player_id)
    DO UPDATE SET amount = player_global_currency.amount + p_amount, updated_at = NOW()
    RETURNING amount INTO new_balance;
    
    -- Registrar transacción
    INSERT INTO currency_transactions (player_id, currency_type, amount, type, description, balance)
    VALUES (p_player_id, 'global', p_amount, 'earn', p_description, new_balance);
    
    RETURN new_balance;
END;
$$;


ALTER FUNCTION public.add_global_currency(p_player_id uuid, p_amount bigint, p_description character varying) OWNER TO postgres;

--
-- TOC entry 503 (class 1255 OID 20928)
-- Name: add_prestige_points(uuid, integer, character varying); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.add_prestige_points(p_player_id uuid, p_points integer, p_source character varying DEFAULT 'other'::character varying) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
DECLARE
    current_prestige RECORD;
    new_level INTEGER;
    level_threshold INTEGER;
BEGIN
    -- Obtener prestigio actual del jugador
    SELECT * INTO current_prestige
    FROM player_prestige
    WHERE player_id = p_player_id;
    
    -- Si no existe, crear registro
    IF NOT FOUND THEN
        INSERT INTO player_prestige (player_id, prestige_level, prestige_points, total_prestige_earned)
        VALUES (p_player_id, 0, p_points, p_points);
        RETURN TRUE;
    END IF;
    
    -- Calcular nuevo nivel (cada 100 puntos = 1 nivel)
    new_level := (current_prestige.prestige_points + p_points) / 100;
    level_threshold := new_level * 100;
    
    -- Actualizar prestigio
    UPDATE player_prestige
    SET 
        prestige_points = prestige_points + p_points,
        total_prestige_earned = total_prestige_earned + p_points,
        prestige_level = new_level,
        last_prestige_gain = NOW(),
        updated_at = NOW()
    WHERE player_id = p_player_id;
    
    -- Si subiÃ³ de nivel, crear notificaciÃ³n
    IF new_level > current_prestige.prestige_level THEN
        INSERT INTO prestige_notifications (player_id, notification_type, message, prestige_points)
        VALUES (p_player_id, 'level_up', 'Â¡Has alcanzado el nivel de prestigio ' || new_level || '!', p_points);
    END IF;
    
    -- Actualizar estadÃ­sticas
    UPDATE prestige_stats
    SET 
        total_prestige_gained = total_prestige_gained + p_points,
        prestige_sources = prestige_sources || jsonb_build_object(p_source, COALESCE((prestige_sources->>p_source)::integer, 0) + p_points),
        last_updated = NOW()
    WHERE player_id = p_player_id;
    
    RETURN TRUE;
END;
$$;


ALTER FUNCTION public.add_prestige_points(p_player_id uuid, p_points integer, p_source character varying) OWNER TO etheria_user;

--
-- TOC entry 438 (class 1255 OID 21094)
-- Name: add_world_currency(uuid, uuid, bigint, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.add_world_currency(p_player_id uuid, p_world_id uuid, p_amount bigint, p_description character varying DEFAULT NULL::character varying) RETURNS bigint
    LANGUAGE plpgsql
    AS $$
DECLARE
    new_balance BIGINT;
BEGIN
    INSERT INTO player_world_currency (player_id, world_id, amount)
    VALUES (p_player_id, p_world_id, p_amount)
    ON CONFLICT (player_id, world_id)
    DO UPDATE SET amount = player_world_currency.amount + p_amount, updated_at = NOW()
    RETURNING amount INTO new_balance;
    
    -- Registrar transacción
    INSERT INTO currency_transactions (player_id, world_id, currency_type, amount, type, description, balance)
    VALUES (p_player_id, p_world_id, 'world', p_amount, 'earn', p_description, new_balance);
    
    RETURN new_balance;
END;
$$;


ALTER FUNCTION public.add_world_currency(p_player_id uuid, p_world_id uuid, p_amount bigint, p_description character varying) OWNER TO postgres;

--
-- TOC entry 469 (class 1255 OID 19227)
-- Name: calculate_battle_power(jsonb, uuid, uuid, uuid, uuid); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.calculate_battle_power(p_units jsonb, p_formation_id uuid DEFAULT NULL::uuid, p_tactic_id uuid DEFAULT NULL::uuid, p_terrain_id uuid DEFAULT NULL::uuid, p_weather_id uuid DEFAULT NULL::uuid) RETURNS jsonb
    LANGUAGE plpgsql
    AS $$
DECLARE
    formation_bonus JSONB := '{}';
    tactic_bonus JSONB := '{}';
    terrain_effects JSONB := '{}';
    weather_effects JSONB := '{}';
    total_power JSONB := '{}';
BEGIN
    -- Obtener bonus de formaciÃ³n
    IF p_formation_id IS NOT NULL THEN
        SELECT effects INTO formation_bonus FROM battle_formations WHERE id = p_formation_id;
    END IF;
    
    -- Obtener bonus de tÃ¡ctica
    IF p_tactic_id IS NOT NULL THEN
        SELECT effects INTO tactic_bonus FROM battle_tactics WHERE id = p_tactic_id;
    END IF;
    
    -- Obtener efectos de terreno
    IF p_terrain_id IS NOT NULL THEN
        SELECT effects INTO terrain_effects FROM battle_terrain WHERE id = p_terrain_id;
    END IF;
    
    -- Obtener efectos climÃ¡ticos
    IF p_weather_id IS NOT NULL THEN
        SELECT effects INTO weather_effects FROM battle_weather WHERE id = p_weather_id;
    END IF;
    
    -- Calcular poder total (simplificado)
    total_power := jsonb_build_object(
        'attack', 100,
        'defense', 100,
        'formation_bonus', formation_bonus,
        'tactic_bonus', tactic_bonus,
        'terrain_effects', terrain_effects,
        'weather_effects', weather_effects
    );
    
    RETURN total_power;
END;
$$;


ALTER FUNCTION public.calculate_battle_power(p_units jsonb, p_formation_id uuid, p_tactic_id uuid, p_terrain_id uuid, p_weather_id uuid) OWNER TO etheria_user;

--
-- TOC entry 455 (class 1255 OID 18949)
-- Name: calculate_experience_to_next(integer); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.calculate_experience_to_next(p_level integer) RETURNS integer
    LANGUAGE plpgsql
    AS $$
BEGIN
    RETURN p_level * 100 + (p_level - 1) * 50;
END;
$$;


ALTER FUNCTION public.calculate_experience_to_next(p_level integer) OWNER TO etheria_user;

--
-- TOC entry 406 (class 1255 OID 17931)
-- Name: calculate_power_score(uuid); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.calculate_power_score(player_uuid uuid) RETURNS bigint
    LANGUAGE plpgsql
    AS $$
DECLARE
    total_power BIGINT := 0;
BEGIN
    -- Calcular poder basado en unidades militares
    SELECT COALESCE(SUM(u.quantity * ut.attack * ut.defense), 0)
    INTO total_power
    FROM units u
    JOIN unit_types ut ON u.unit_type_id = ut.id
    JOIN villages v ON u.village_id = v.id
    WHERE v.player_id = player_uuid;
    
    RETURN total_power;
END;
$$;


ALTER FUNCTION public.calculate_power_score(player_uuid uuid) OWNER TO etheria_user;

--
-- TOC entry 431 (class 1255 OID 20074)
-- Name: calculate_rank_change(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.calculate_rank_change() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    IF OLD.rank_position IS NOT NULL THEN
        NEW.rank_change := OLD.rank_position - NEW.rank_position;
    END IF;
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.calculate_rank_change() OWNER TO etheria_user;

--
-- TOC entry 434 (class 1255 OID 19678)
-- Name: calculate_tax(numeric, character varying); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.calculate_tax(p_amount numeric, p_tax_type character varying) RETURNS numeric
    LANGUAGE plpgsql
    AS $$
DECLARE
    tax_rate DECIMAL(5,4);
    tax_amount DECIMAL(15,2);
BEGIN
    SELECT rate INTO tax_rate
    FROM taxes
    WHERE tax_type = p_tax_type 
    AND is_active = true
    AND p_amount >= min_amount
    AND (max_amount IS NULL OR p_amount <= max_amount)
    ORDER BY rate DESC
    LIMIT 1;
    
    IF tax_rate IS NULL THEN
        RETURN 0;
    END IF;
    
    tax_amount := p_amount * tax_rate;
    RETURN tax_amount;
END;
$$;


ALTER FUNCTION public.calculate_tax(p_amount numeric, p_tax_type character varying) OWNER TO etheria_user;

--
-- TOC entry 403 (class 1255 OID 17932)
-- Name: calculate_wealth_score(uuid); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.calculate_wealth_score(player_uuid uuid) RETURNS bigint
    LANGUAGE plpgsql
    AS $$
DECLARE
    total_wealth BIGINT := 0;
BEGIN
    -- Calcular riqueza basada en recursos
    SELECT COALESCE(SUM(r.wood + r.stone + r.food + r.gold), 0)
    INTO total_wealth
    FROM resources r
    JOIN villages v ON r.village_id = v.id
    WHERE v.player_id = player_uuid;
    
    RETURN total_wealth;
END;
$$;


ALTER FUNCTION public.calculate_wealth_score(player_uuid uuid) OWNER TO etheria_user;

--
-- TOC entry 421 (class 1255 OID 17930)
-- Name: check_quest_requirements(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.check_quest_requirements() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- AquÃ­ se implementarÃ­a la lÃ³gica para verificar si se cumplen los requisitos
    -- y actualizar el progreso de la misiÃ³n
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.check_quest_requirements() OWNER TO etheria_user;

--
-- TOC entry 427 (class 1255 OID 18347)
-- Name: check_research_achievements(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.check_research_achievements() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
DECLARE
    total_techs INTEGER;
    total_levels INTEGER;
BEGIN
    -- Contar tecnologÃ­as totales
    SELECT COUNT(DISTINCT technology_id) INTO total_techs
    FROM player_technologies
    WHERE player_id = NEW.player_id;
    
    -- Contar niveles totales
    SELECT SUM(level) INTO total_levels
    FROM player_technologies
    WHERE player_id = NEW.player_id;
    
    -- Logro: Investigador Novato (10 tecnologÃ­as)
    IF total_techs >= 10 AND NOT EXISTS (
        SELECT 1 FROM research_achievements 
        WHERE player_id = NEW.player_id AND achievement_type = 'researcher_novice'
    ) THEN
        INSERT INTO research_achievements (player_id, achievement_type, value, reward)
        VALUES (NEW.player_id, 'researcher_novice', total_techs, '{"gold": 100, "research_bonus": 5}');
    END IF;
    
    -- Logro: Maestro de la Ciencia (100 niveles)
    IF total_levels >= 100 AND NOT EXISTS (
        SELECT 1 FROM research_achievements 
        WHERE player_id = NEW.player_id AND achievement_type = 'science_master'
    ) THEN
        INSERT INTO research_achievements (player_id, achievement_type, value, reward)
        VALUES (NEW.player_id, 'science_master', total_levels, '{"gold": 500, "research_bonus": 15}');
    END IF;
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.check_research_achievements() OWNER TO etheria_user;

--
-- TOC entry 501 (class 1255 OID 17594)
-- Name: check_village_coordinates(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.check_village_coordinates() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Verificar que las coordenadas estÃ©n dentro de lÃ­mites razonables
    IF NEW.x_coordinate < 0 OR NEW.x_coordinate > 1000 OR 
       NEW.y_coordinate < 0 OR NEW.y_coordinate > 1000 THEN
        RAISE EXCEPTION 'Coordenadas fuera de rango (0-1000)';
    END IF;
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.check_village_coordinates() OWNER TO etheria_user;

--
-- TOC entry 460 (class 1255 OID 20353)
-- Name: claim_achievement_reward(uuid, uuid); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.claim_achievement_reward(p_player_id uuid, p_achievement_id uuid) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
DECLARE
    achievement_record RECORD;
    reward_record RECORD;
BEGIN
    -- Verificar que el achievement estÃ© completado y no reclamado
    SELECT * INTO achievement_record
    FROM player_achievements
    WHERE player_id = p_player_id 
    AND achievement_id = p_achievement_id
    AND is_completed = true
    AND is_claimed = false;
    
    IF NOT FOUND THEN
        RETURN FALSE;
    END IF;
    
    -- Marcar como reclamado
    UPDATE player_achievements
    SET is_claimed = true, claimed_at = NOW()
    WHERE player_id = p_player_id AND achievement_id = p_achievement_id;
    
    -- AquÃ­ se aplicarÃ­an las recompensas segÃºn el tipo
    -- Por simplicidad, solo creamos una notificaciÃ³n
    INSERT INTO achievement_notifications (player_id, achievement_id, notification_type, message)
    VALUES (p_player_id, p_achievement_id, 'completed', 'Recompensa reclamada exitosamente');
    
    RETURN TRUE;
END;
$$;


ALTER FUNCTION public.claim_achievement_reward(p_player_id uuid, p_achievement_id uuid) OWNER TO etheria_user;

--
-- TOC entry 440 (class 1255 OID 20438)
-- Name: claim_quest_reward(uuid, uuid); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.claim_quest_reward(p_player_id uuid, p_quest_id uuid) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
DECLARE
    quest_record RECORD;
    reward_record RECORD;
BEGIN
    -- Verificar que la quest estÃ© completada y no reclamada
    SELECT * INTO quest_record
    FROM player_quests
    WHERE player_id = p_player_id 
    AND quest_id = p_quest_id
    AND is_completed = true
    AND is_claimed = false;
    
    IF NOT FOUND THEN
        RETURN FALSE;
    END IF;
    
    -- Marcar como reclamada
    UPDATE player_quests
    SET is_claimed = true, claimed_at = NOW()
    WHERE player_id = p_player_id AND quest_id = p_quest_id;
    
    -- AquÃ­ se aplicarÃ­an las recompensas segÃºn el tipo
    -- Por simplicidad, solo creamos una notificaciÃ³n
    INSERT INTO quest_notifications (player_id, quest_id, notification_type, message)
    VALUES (p_player_id, p_quest_id, 'reward', 'Recompensa reclamada exitosamente');
    
    RETURN TRUE;
END;
$$;


ALTER FUNCTION public.claim_quest_reward(p_player_id uuid, p_quest_id uuid) OWNER TO etheria_user;

--
-- TOC entry 500 (class 1255 OID 18230)
-- Name: cleanup_old_logs(); Type: PROCEDURE; Schema: public; Owner: etheria_user
--

CREATE PROCEDURE public.cleanup_old_logs()
    LANGUAGE plpgsql
    AS $$
DECLARE
    retention_days INTEGER;
    deleted_count INTEGER;
BEGIN
    -- Obtener dÃ­as de retenciÃ³n de la configuraciÃ³n
    SELECT COALESCE(get_system_config('log_retention_days')::INTEGER, 90) INTO retention_days;
    
    -- Limpiar logs del sistema
    DELETE FROM system_logs WHERE created_at < NOW() - (retention_days || ' days')::INTERVAL;
    GET DIAGNOSTICS deleted_count = ROW_COUNT;
    
    -- Limpiar logs de seguridad
    DELETE FROM security_logs WHERE created_at < NOW() - (retention_days || ' days')::INTERVAL;
    
    -- Limpiar logs de rendimiento
    DELETE FROM performance_logs WHERE created_at < NOW() - (retention_days || ' days')::INTERVAL;
    
    -- Registrar la limpieza
    PERFORM log_system_event('info', 'maintenance', 'Limpieza de logs completada', 
                            jsonb_build_object('deleted_count', deleted_count));
END;
$$;


ALTER PROCEDURE public.cleanup_old_logs() OWNER TO etheria_user;

--
-- TOC entry 408 (class 1255 OID 21110)
-- Name: create_initial_buildings(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.create_initial_buildings() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Crear edificios iniciales con IDs únicos
    INSERT INTO buildings (id, village_id, type, level, is_upgrading, upgrade_completion_time, building_type_id)
    VALUES 
        (gen_random_uuid(), NEW.id, 'town_hall', 1, false, NULL, (SELECT id FROM building_types WHERE name = 'town_hall')),
        (gen_random_uuid(), NEW.id, 'warehouse', 1, false, NULL, (SELECT id FROM building_types WHERE name = 'warehouse')),
        (gen_random_uuid(), NEW.id, 'granary', 1, false, NULL, (SELECT id FROM building_types WHERE name = 'granary')),
        (gen_random_uuid(), NEW.id, 'farm', 1, false, NULL, (SELECT id FROM building_types WHERE name = 'farm')),
        (gen_random_uuid(), NEW.id, 'mine', 1, false, NULL, (SELECT id FROM building_types WHERE name = 'mine')),
        (gen_random_uuid(), NEW.id, 'lumber_mill', 1, false, NULL, (SELECT id FROM building_types WHERE name = 'lumber_mill'));
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.create_initial_buildings() OWNER TO postgres;

--
-- TOC entry 433 (class 1255 OID 18201)
-- Name: create_system_alert(character varying, character varying, character varying, text, jsonb); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.create_system_alert(p_type character varying, p_severity character varying, p_title character varying, p_message text, p_data jsonb DEFAULT NULL::jsonb) RETURNS uuid
    LANGUAGE plpgsql
    AS $$
DECLARE
    alert_id UUID;
BEGIN
    INSERT INTO system_alerts (alert_type, severity, title, message, data)
    VALUES (p_type, p_severity, p_title, p_message, p_data)
    RETURNING id INTO alert_id;
    
    RETURN alert_id;
END;
$$;


ALTER FUNCTION public.create_system_alert(p_type character varying, p_severity character varying, p_title character varying, p_message text, p_data jsonb) OWNER TO etheria_user;

--
-- TOC entry 435 (class 1255 OID 20929)
-- Name: equip_title(uuid, uuid); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.equip_title(p_player_id uuid, p_title_id uuid) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
DECLARE
    has_title BOOLEAN;
BEGIN
    -- Verificar que el jugador tiene el tÃ­tulo
    SELECT EXISTS(SELECT 1 FROM player_titles WHERE player_id = p_player_id AND title_id = p_title_id) INTO has_title;
    IF NOT has_title THEN
        RETURN FALSE;
    END IF;
    
    -- Desequipar todos los tÃ­tulos
    UPDATE player_titles
    SET is_equipped = false, equipped_at = NULL
    WHERE player_id = p_player_id;
    
    -- Equipar el tÃ­tulo seleccionado
    UPDATE player_titles
    SET is_equipped = true, equipped_at = NOW()
    WHERE player_id = p_player_id AND title_id = p_title_id;
    
    RETURN TRUE;
END;
$$;


ALTER FUNCTION public.equip_title(p_player_id uuid, p_title_id uuid) OWNER TO etheria_user;

--
-- TOC entry 463 (class 1255 OID 18231)
-- Name: generate_backup(character varying, uuid); Type: PROCEDURE; Schema: public; Owner: etheria_user
--

CREATE PROCEDURE public.generate_backup(IN p_backup_name character varying, IN p_admin_id uuid)
    LANGUAGE plpgsql
    AS $$
DECLARE
    backup_id UUID;
BEGIN
    -- Crear registro de backup
    INSERT INTO database_backups (backup_name, backup_type, status, created_by)
    VALUES (p_backup_name, 'full', 'pending', p_admin_id)
    RETURNING id INTO backup_id;
    
    -- AquÃ­ se implementarÃ­a la lÃ³gica real de backup
    -- Por ahora solo actualizamos el estado
    UPDATE database_backups 
    SET status = 'completed', completed_at = NOW()
    WHERE id = backup_id;
    
    -- Registrar el evento
    PERFORM log_system_event('info', 'backup', 'Backup generado exitosamente', 
                            jsonb_build_object('backup_id', backup_id, 'backup_name', p_backup_name));
END;
$$;


ALTER PROCEDURE public.generate_backup(IN p_backup_name character varying, IN p_admin_id uuid) OWNER TO etheria_user;

--
-- TOC entry 457 (class 1255 OID 21092)
-- Name: get_player_currency_balance(uuid, uuid); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.get_player_currency_balance(p_player_id uuid, p_world_id uuid DEFAULT NULL::uuid) RETURNS TABLE(player_id uuid, global_amount bigint, world_amount bigint, current_world uuid, global_coin character varying, world_coin character varying)
    LANGUAGE plpgsql
    AS $$
BEGIN
    RETURN QUERY
    SELECT 
        p.id as player_id,
        COALESCE(pgc.amount, 0) as global_amount,
        COALESCE(pwc.amount, 0) as world_amount,
        pwe.world_id as current_world,
        cc.global_coin,
        cc.world_coin
    FROM players p
    LEFT JOIN player_global_currency pgc ON p.id = pgc.player_id
    LEFT JOIN player_world_currency pwc ON p.id = pwc.player_id AND pwc.world_id = COALESCE(p_world_id, pwe.world_id)
    LEFT JOIN player_world_entries pwe ON p.id = pwe.player_id AND pwe.is_active = true
    CROSS JOIN currency_config cc
    WHERE p.id = p_player_id;
END;
$$;


ALTER FUNCTION public.get_player_currency_balance(p_player_id uuid, p_world_id uuid) OWNER TO postgres;

--
-- TOC entry 472 (class 1255 OID 18202)
-- Name: get_system_config(character varying); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.get_system_config(p_key character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
    config_value TEXT;
BEGIN
    SELECT config_value INTO config_value
    FROM system_config
    WHERE config_key = p_key;
    
    RETURN config_value;
END;
$$;


ALTER FUNCTION public.get_system_config(p_key character varying) OWNER TO etheria_user;

--
-- TOC entry 483 (class 1255 OID 20927)
-- Name: grant_title_to_player(uuid, uuid); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.grant_title_to_player(p_player_id uuid, p_title_id uuid) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
DECLARE
    title_record RECORD;
    already_has_title BOOLEAN;
BEGIN
    -- Verificar que el tÃ­tulo existe y estÃ¡ activo
    SELECT * INTO title_record
    FROM titles
    WHERE id = p_title_id AND is_active = true;
    
    IF NOT FOUND THEN
        RETURN FALSE;
    END IF;
    
    -- Verificar que el jugador no tenga ya el tÃ­tulo
    SELECT EXISTS(SELECT 1 FROM player_titles WHERE player_id = p_player_id AND title_id = p_title_id) INTO already_has_title;
    IF already_has_title THEN
        RETURN FALSE;
    END IF;
    
    -- Otorgar el tÃ­tulo
    INSERT INTO player_titles (player_id, title_id)
    VALUES (p_player_id, p_title_id);
    
    -- Agregar puntos de prestigio
    PERFORM add_prestige_points(p_player_id, title_record.prestige_points, 'title_earned');
    
    -- Crear notificaciÃ³n
    INSERT INTO prestige_notifications (player_id, notification_type, message, prestige_points)
    VALUES (p_player_id, 'title_earned', 'Has ganado el tÃ­tulo: ' || title_record.name, title_record.prestige_points);
    
    RETURN TRUE;
END;
$$;


ALTER FUNCTION public.grant_title_to_player(p_player_id uuid, p_title_id uuid) OWNER TO etheria_user;

--
-- TOC entry 400 (class 1255 OID 17598)
-- Name: initialize_village_buildings(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.initialize_village_buildings() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    INSERT INTO buildings (village_id, building_type_id, level) 
    SELECT NEW.id, id, 1 FROM building_types WHERE name IN ('town_hall', 'warehouse', 'granary', 'marketplace', 'barracks');
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.initialize_village_buildings() OWNER TO etheria_user;

--
-- TOC entry 498 (class 1255 OID 17596)
-- Name: initialize_village_resources(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.initialize_village_resources() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Usar INSERT ... ON CONFLICT para manejar duplicados automáticamente
    INSERT INTO resources (id, village_id, gold, wood, stone, food, last_updated)
    VALUES (gen_random_uuid(), NEW.id, 1000, 500, 300, 200, NOW())
    ON CONFLICT (village_id) DO NOTHING;
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.initialize_village_resources() OWNER TO etheria_user;

--
-- TOC entry 509 (class 1255 OID 17600)
-- Name: initialize_village_units(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.initialize_village_units() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Crear unidades iniciales con IDs únicos (si es necesario)
    -- Por ahora solo retornar NEW para evitar errores
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.initialize_village_units() OWNER TO etheria_user;

--
-- TOC entry 484 (class 1255 OID 18950)
-- Name: level_up_hero(uuid); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.level_up_hero(p_hero_id uuid) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
DECLARE
    hero_record RECORD;
    new_level INTEGER;
    new_experience_to_next INTEGER;
BEGIN
    -- Obtener informaciÃ³n del hÃ©roe
    SELECT * INTO hero_record FROM player_heroes WHERE id = p_hero_id;
    
    IF NOT FOUND THEN
        RETURN FALSE;
    END IF;
    
    -- Verificar si puede subir de nivel
    IF hero_record.experience < hero_record.experience_to_next THEN
        RETURN FALSE;
    END IF;
    
    -- Calcular nuevo nivel
    new_level := hero_record.level + 1;
    new_experience_to_next := calculate_experience_to_next(new_level);
    
    -- Actualizar hÃ©roe
    UPDATE player_heroes 
    SET level = new_level,
        experience = experience - hero_record.experience_to_next,
        experience_to_next = new_experience_to_next,
        attack = attack + 2,
        defense = defense + 1,
        health = health + 10,
        max_health = max_health + 10,
        current_health = current_health + 10,
        speed = speed + 1,
        intelligence = intelligence + 1,
        charisma = charisma + 1,
        updated_at = NOW()
    WHERE id = p_hero_id;
    
    RETURN TRUE;
END;
$$;


ALTER FUNCTION public.level_up_hero(p_hero_id uuid) OWNER TO etheria_user;

--
-- TOC entry 505 (class 1255 OID 18199)
-- Name: log_system_event(character varying, character varying, text, jsonb, uuid, inet, text); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.log_system_event(p_level character varying, p_category character varying, p_message text, p_data jsonb DEFAULT NULL::jsonb, p_player_id uuid DEFAULT NULL::uuid, p_ip_address inet DEFAULT NULL::inet, p_user_agent text DEFAULT NULL::text) RETURNS uuid
    LANGUAGE plpgsql
    AS $$
DECLARE
    log_id UUID;
BEGIN
    INSERT INTO system_logs (log_level, category, message, data, player_id, ip_address, user_agent)
    VALUES (p_level, p_category, p_message, p_data, p_player_id, p_ip_address, p_user_agent)
    RETURNING id INTO log_id;
    
    RETURN log_id;
END;
$$;


ALTER FUNCTION public.log_system_event(p_level character varying, p_category character varying, p_message text, p_data jsonb, p_player_id uuid, p_ip_address inet, p_user_agent text) OWNER TO etheria_user;

--
-- TOC entry 513 (class 1255 OID 19892)
-- Name: record_ranking_history(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.record_ranking_history() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Registrar cambio en el historial
    INSERT INTO ranking_history (category_id, season_id, entity_type, entity_id, position, score, recorded_at)
    VALUES (NEW.category_id, NEW.season_id, NEW.entity_type, NEW.entity_id, NEW.position, NEW.score, CURRENT_TIMESTAMP);
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.record_ranking_history() OWNER TO etheria_user;

--
-- TOC entry 452 (class 1255 OID 18200)
-- Name: record_server_metric(character varying, numeric, character varying, jsonb); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.record_server_metric(p_name character varying, p_value numeric, p_unit character varying DEFAULT NULL::character varying, p_tags jsonb DEFAULT NULL::jsonb) RETURNS uuid
    LANGUAGE plpgsql
    AS $$
DECLARE
    metric_id UUID;
BEGIN
    INSERT INTO server_metrics (metric_name, metric_value, metric_unit, tags)
    VALUES (p_name, p_value, p_unit, p_tags)
    RETURNING id INTO metric_id;
    
    RETURN metric_id;
END;
$$;


ALTER FUNCTION public.record_server_metric(p_name character varying, p_value numeric, p_unit character varying, p_tags jsonb) OWNER TO etheria_user;

--
-- TOC entry 512 (class 1255 OID 20627)
-- Name: register_player_for_event(uuid, uuid); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.register_player_for_event(p_event_id uuid, p_player_id uuid) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
DECLARE
    event_record RECORD;
    player_exists BOOLEAN;
    already_registered BOOLEAN;
    current_participants INTEGER;
BEGIN
    -- Verificar que el evento existe y estÃ¡ activo
    SELECT * INTO event_record
    FROM events
    WHERE id = p_event_id AND is_active = true;
    
    IF NOT FOUND THEN
        RETURN FALSE;
    END IF;
    
    -- Verificar que el jugador existe
    SELECT EXISTS(SELECT 1 FROM players WHERE id = p_player_id) INTO player_exists;
    IF NOT player_exists THEN
        RETURN FALSE;
    END IF;
    
    -- Verificar que no estÃ© ya registrado
    SELECT EXISTS(SELECT 1 FROM event_participants WHERE event_id = p_event_id AND player_id = p_player_id) INTO already_registered;
    IF already_registered THEN
        RETURN FALSE;
    END IF;
    
    -- Verificar lÃ­mite de participantes
    IF event_record.max_participants IS NOT NULL THEN
        SELECT COUNT(*) INTO current_participants
        FROM event_participants
        WHERE event_id = p_event_id;
        
        IF current_participants >= event_record.max_participants THEN
            RETURN FALSE;
        END IF;
    END IF;
    
    -- Registrar al jugador
    INSERT INTO event_participants (event_id, player_id, status)
    VALUES (p_event_id, p_player_id, 'registered');
    
    -- Crear notificaciÃ³n
    INSERT INTO event_notifications (player_id, event_id, notification_type, message)
    VALUES (p_player_id, p_event_id, 'info', 'Te has registrado exitosamente en el evento');
    
    RETURN TRUE;
END;
$$;


ALTER FUNCTION public.register_player_for_event(p_event_id uuid, p_player_id uuid) OWNER TO etheria_user;

--
-- TOC entry 458 (class 1255 OID 19225)
-- Name: sync_player_units(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.sync_player_units() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Insertar o actualizar en player_units cuando se modifica units
    INSERT INTO player_units (player_id, unit_type_id, quantity, available_quantity)
    SELECT 
        v.player_id,
        u.unit_type_id,
        u.quantity,
        u.quantity - COALESCE(u.is_training::int, 0)
    FROM units u
    JOIN villages v ON u.village_id = v.id
    WHERE u.id = NEW.id
    ON CONFLICT (player_id, unit_type_id) DO UPDATE SET
        quantity = EXCLUDED.quantity,
        available_quantity = EXCLUDED.available_quantity,
        updated_at = NOW();
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.sync_player_units() OWNER TO etheria_user;

--
-- TOC entry 439 (class 1255 OID 20222)
-- Name: update_achievement_category_stats(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_achievement_category_stats() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar estadÃ­sticas de la categorÃ­a
    UPDATE achievement_categories 
    SET 
        total_achievements = (
            SELECT COUNT(*) FROM achievements 
            WHERE category_id = COALESCE(NEW.category_id, OLD.category_id) AND is_active = true
        ),
        completed_count = (
            SELECT COUNT(*) FROM player_achievements pa
            JOIN achievements a ON pa.achievement_id = a.id
            WHERE a.category_id = COALESCE(NEW.category_id, OLD.category_id) 
            AND pa.is_completed = true
        ),
        completion_rate = CASE 
            WHEN total_achievements > 0 THEN 
                (completed_count::DECIMAL / total_achievements::DECIMAL) * 100
            ELSE 0
        END,
        updated_at = CURRENT_TIMESTAMP
    WHERE id = COALESCE(NEW.category_id, OLD.category_id);
    
    RETURN COALESCE(NEW, OLD);
END;
$$;


ALTER FUNCTION public.update_achievement_category_stats() OWNER TO etheria_user;

--
-- TOC entry 507 (class 1255 OID 20228)
-- Name: update_achievement_leaderboard(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_achievement_leaderboard() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar ranking del jugador
    INSERT INTO achievement_leaderboard (player_id, player_name, total_points, completed_count, completion_rate, position, world_id)
    SELECT 
        p.id,
        p.username,
        COALESCE(stats.total_points, 0),
        COALESCE(stats.completed_achievements, 0),
        COALESCE(stats.completion_rate, 0),
        ROW_NUMBER() OVER (ORDER BY COALESCE(stats.total_points, 0) DESC, COALESCE(stats.completion_rate, 0) DESC),
        p.world_id
    FROM players p
    LEFT JOIN achievement_statistics stats ON p.id = stats.player_id
    WHERE p.id = COALESCE(NEW.player_id, OLD.player_id)
    ON CONFLICT (player_id, world_id) DO UPDATE SET
        player_name = EXCLUDED.player_name,
        total_points = EXCLUDED.total_points,
        completed_count = EXCLUDED.completed_count,
        completion_rate = EXCLUDED.completion_rate,
        position = EXCLUDED.position,
        last_updated = CURRENT_TIMESTAMP;
    
    RETURN COALESCE(NEW, OLD);
END;
$$;


ALTER FUNCTION public.update_achievement_leaderboard() OWNER TO etheria_user;

--
-- TOC entry 411 (class 1255 OID 20352)
-- Name: update_achievement_progress(uuid, uuid, integer); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_achievement_progress(p_player_id uuid, p_achievement_id uuid, p_progress_increment integer DEFAULT 1) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
DECLARE
    achievement_record RECORD;
    current_progress INTEGER;
    new_progress INTEGER;
BEGIN
    -- Obtener informaciÃ³n del achievement
    SELECT * INTO achievement_record
    FROM achievements
    WHERE id = p_achievement_id AND is_active = true;
    
    IF NOT FOUND THEN
        RETURN FALSE;
    END IF;
    
    -- Obtener progreso actual
    SELECT COALESCE(progress, 0) INTO current_progress
    FROM player_achievements
    WHERE player_id = p_player_id AND achievement_id = p_achievement_id;
    
    -- Calcular nuevo progreso
    new_progress := LEAST(current_progress + p_progress_increment, achievement_record.max_progress);
    
    -- Insertar o actualizar progreso
    INSERT INTO player_achievements (player_id, achievement_id, progress, is_completed)
    VALUES (p_player_id, p_achievement_id, new_progress, new_progress >= achievement_record.max_progress)
    ON CONFLICT (player_id, achievement_id) DO UPDATE SET
        progress = EXCLUDED.progress,
        is_completed = EXCLUDED.is_completed,
        completed_at = CASE WHEN EXCLUDED.is_completed AND NOT player_achievements.is_completed 
                           THEN NOW() ELSE player_achievements.completed_at END,
        updated_at = NOW();
    
    -- Si se completÃ³, crear notificaciÃ³n
    IF new_progress >= achievement_record.max_progress AND current_progress < achievement_record.max_progress THEN
        INSERT INTO achievement_notifications (player_id, achievement_id, notification_type, message)
        VALUES (p_player_id, p_achievement_id, 'completed', 
                'Â¡Logro completado: ' || achievement_record.name || '!');
    END IF;
    
    RETURN TRUE;
END;
$$;


ALTER FUNCTION public.update_achievement_progress(p_player_id uuid, p_achievement_id uuid, p_progress_increment integer) OWNER TO etheria_user;

--
-- TOC entry 494 (class 1255 OID 20224)
-- Name: update_achievement_stats(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_achievement_stats() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar estadÃ­sticas del jugador
    INSERT INTO achievement_statistics (player_id, total_achievements, completed_achievements, total_points, last_achievement_at)
    SELECT 
        NEW.player_id,
        COUNT(*) as total_achievements,
        COUNT(CASE WHEN is_completed THEN 1 END) as completed_achievements,
        COALESCE(SUM(CASE WHEN is_completed THEN a.points ELSE 0 END), 0) as total_points,
        MAX(CASE WHEN is_completed THEN completed_at END) as last_achievement_at
    FROM player_achievements pa
    JOIN achievements a ON pa.achievement_id = a.id
    WHERE pa.player_id = NEW.player_id
    GROUP BY NEW.player_id
    ON CONFLICT (player_id) DO UPDATE SET
        total_achievements = EXCLUDED.total_achievements,
        completed_achievements = EXCLUDED.completed_achievements,
        total_points = EXCLUDED.total_points,
        last_achievement_at = EXCLUDED.last_achievement_at,
        updated_at = NOW();
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_achievement_stats() OWNER TO etheria_user;

--
-- TOC entry 413 (class 1255 OID 18204)
-- Name: update_admin_last_action(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_admin_last_action() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    UPDATE admins SET last_action = NOW() WHERE id = NEW.admin_id;
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_admin_last_action() OWNER TO etheria_user;

--
-- TOC entry 508 (class 1255 OID 17607)
-- Name: update_alliance_member_count(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_alliance_member_count() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    IF TG_OP = 'INSERT' THEN
        UPDATE alliances SET member_count = member_count + 1 WHERE id = NEW.alliance_id;
        RETURN NEW;
    ELSIF TG_OP = 'DELETE' THEN
        UPDATE alliances SET member_count = member_count - 1 WHERE id = OLD.alliance_id;
        RETURN OLD;
    END IF;
    RETURN NULL;
END;
$$;


ALTER FUNCTION public.update_alliance_member_count() OWNER TO etheria_user;

--
-- TOC entry 486 (class 1255 OID 19888)
-- Name: update_alliance_statistics(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_alliance_statistics() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar estadÃ­sticas cuando se modifica una alianza
    INSERT INTO alliance_statistics (alliance_id, last_updated)
    VALUES (NEW.id, CURRENT_TIMESTAMP)
    ON CONFLICT (alliance_id) DO UPDATE SET
        last_updated = CURRENT_TIMESTAMP;
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_alliance_statistics() OWNER TO etheria_user;

--
-- TOC entry 491 (class 1255 OID 21088)
-- Name: update_currency_updated_at(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_currency_updated_at() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_currency_updated_at() OWNER TO postgres;

--
-- TOC entry 466 (class 1255 OID 20629)
-- Name: update_event_leaderboard(uuid); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_event_leaderboard(p_event_id uuid) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar leaderboard
    INSERT INTO event_leaderboard (event_id, player_id, score, rank_position, matches_played, matches_won, matches_lost)
    SELECT 
        ep.event_id,
        ep.player_id,
        ep.score,
        ROW_NUMBER() OVER (ORDER BY ep.score DESC) as rank_position,
        COALESCE(COUNT(em.id), 0) as matches_played,
        COALESCE(COUNT(CASE WHEN em.winner_id = ep.player_id THEN 1 END), 0) as matches_won,
        COALESCE(COUNT(CASE WHEN em.winner_id IS NOT NULL AND em.winner_id != ep.player_id THEN 1 END), 0) as matches_lost
    FROM event_participants ep
    LEFT JOIN event_matches em ON ep.event_id = em.event_id AND (ep.player_id = em.player1_id OR ep.player_id = em.player2_id)
    WHERE ep.event_id = p_event_id
    GROUP BY ep.event_id, ep.player_id, ep.score
    ON CONFLICT (event_id, player_id) DO UPDATE SET
        score = EXCLUDED.score,
        rank_position = EXCLUDED.rank_position,
        matches_played = EXCLUDED.matches_played,
        matches_won = EXCLUDED.matches_won,
        matches_lost = EXCLUDED.matches_lost,
        last_updated = NOW();
    
    RETURN TRUE;
END;
$$;


ALTER FUNCTION public.update_event_leaderboard(p_event_id uuid) OWNER TO etheria_user;

--
-- TOC entry 445 (class 1255 OID 20630)
-- Name: update_event_participant_stats(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_event_participant_stats() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar estadÃ­sticas del evento
    PERFORM update_event_statistics(NEW.event_id);
    
    -- Actualizar leaderboard
    PERFORM update_event_leaderboard(NEW.event_id);
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_event_participant_stats() OWNER TO etheria_user;

--
-- TOC entry 417 (class 1255 OID 20628)
-- Name: update_event_statistics(uuid); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_event_statistics(p_event_id uuid) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
DECLARE
    stats_record RECORD;
BEGIN
    -- Calcular estadÃ­sticas
    SELECT 
        COUNT(DISTINCT ep.player_id) as total_participants,
        COUNT(em.id) as total_matches,
        COALESCE(AVG(ep.score), 0) as average_score,
        COALESCE(MAX(ep.score), 0) as highest_score,
        COALESCE(MIN(ep.score), 0) as lowest_score
    INTO stats_record
    FROM events e
    LEFT JOIN event_participants ep ON e.id = ep.event_id
    LEFT JOIN event_matches em ON e.id = em.event_id
    WHERE e.id = p_event_id
    GROUP BY e.id;
    
    -- Insertar o actualizar estadÃ­sticas
    INSERT INTO event_statistics (event_id, total_participants, total_matches, average_score, highest_score, lowest_score)
    VALUES (p_event_id, stats_record.total_participants, stats_record.total_matches, stats_record.average_score, stats_record.highest_score, stats_record.lowest_score)
    ON CONFLICT (event_id) DO UPDATE SET
        total_participants = EXCLUDED.total_participants,
        total_matches = EXCLUDED.total_matches,
        average_score = EXCLUDED.average_score,
        highest_score = EXCLUDED.highest_score,
        lowest_score = EXCLUDED.lowest_score,
        updated_at = NOW();
    
    RETURN TRUE;
END;
$$;


ALTER FUNCTION public.update_event_statistics(p_event_id uuid) OWNER TO etheria_user;

--
-- TOC entry 514 (class 1255 OID 18947)
-- Name: update_hero_statistics(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_hero_statistics() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar estadÃ­sticas del jugador
    INSERT INTO hero_statistics (player_id, total_heroes, total_levels, total_experience, updated_at)
    SELECT 
        NEW.player_id,
        COUNT(ph.id) as total_heroes,
        COALESCE(SUM(ph.level), 0) as total_levels,
        COALESCE(SUM(ph.experience), 0) as total_experience,
        NOW() as updated_at
    FROM player_heroes ph
    WHERE ph.player_id = NEW.player_id
    GROUP BY NEW.player_id
    ON CONFLICT (player_id) DO UPDATE SET
        total_heroes = EXCLUDED.total_heroes,
        total_levels = EXCLUDED.total_levels,
        total_experience = EXCLUDED.total_experience,
        updated_at = EXCLUDED.updated_at;
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_hero_statistics() OWNER TO etheria_user;

--
-- TOC entry 496 (class 1255 OID 20226)
-- Name: update_player_achievement_stats(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_player_achievement_stats() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar estadÃ­sticas del jugador
    INSERT INTO achievement_statistics (player_id, total_achievements, completed_achievements, completion_rate, total_points, last_updated)
    VALUES (
        COALESCE(NEW.player_id, OLD.player_id),
        (SELECT COUNT(*) FROM achievements WHERE is_active = true),
        (SELECT COUNT(*) FROM player_achievements WHERE player_id = COALESCE(NEW.player_id, OLD.player_id) AND is_completed = true),
        CASE 
            WHEN (SELECT COUNT(*) FROM achievements WHERE is_active = true) > 0 THEN
                ((SELECT COUNT(*) FROM player_achievements WHERE player_id = COALESCE(NEW.player_id, OLD.player_id) AND is_completed = true)::DECIMAL / 
                 (SELECT COUNT(*) FROM achievements WHERE is_active = true)::DECIMAL) * 100
            ELSE 0
        END,
        (SELECT COALESCE(SUM(points_earned), 0) FROM player_achievements WHERE player_id = COALESCE(NEW.player_id, OLD.player_id)),
        CURRENT_TIMESTAMP
    )
    ON CONFLICT (player_id) DO UPDATE SET
        total_achievements = EXCLUDED.total_achievements,
        completed_achievements = EXCLUDED.completed_achievements,
        completion_rate = EXCLUDED.completion_rate,
        total_points = EXCLUDED.total_points,
        last_updated = CURRENT_TIMESTAMP;
    
    RETURN COALESCE(NEW, OLD);
END;
$$;


ALTER FUNCTION public.update_player_achievement_stats() OWNER TO etheria_user;

--
-- TOC entry 414 (class 1255 OID 19679)
-- Name: update_player_economy_stats(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_player_economy_stats() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar estadÃ­sticas del jugador
    INSERT INTO player_economy (player_id, total_wealth, total_spent, total_earned, market_transactions, successful_trades, updated_at)
    SELECT 
        NEW.buyer_id,
        COALESCE(SUM(CASE WHEN status = 'completed' THEN total_price ELSE 0 END), 0) as total_spent,
        COUNT(*) as market_transactions,
        COUNT(CASE WHEN status = 'completed' THEN 1 END) as successful_trades,
        NOW() as updated_at
    FROM market_transactions
    WHERE buyer_id = NEW.buyer_id
    GROUP BY NEW.buyer_id
    ON CONFLICT (player_id) DO UPDATE SET
        total_spent = EXCLUDED.total_spent,
        market_transactions = EXCLUDED.market_transactions,
        successful_trades = EXCLUDED.successful_trades,
        last_transaction_at = NOW(),
        updated_at = EXCLUDED.updated_at;
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_player_economy_stats() OWNER TO etheria_user;

--
-- TOC entry 478 (class 1255 OID 19886)
-- Name: update_player_statistics(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_player_statistics() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    INSERT INTO player_statistics (player_id, stat_name, stat_value, last_updated)
    VALUES (NEW.id, 'total_points', 0, CURRENT_TIMESTAMP)
    ON CONFLICT (player_id, stat_name) DO UPDATE SET
        last_updated = CURRENT_TIMESTAMP;
    
    INSERT INTO player_statistics (player_id, stat_name, stat_value, last_updated)
    VALUES (NEW.id, 'level', 1, CURRENT_TIMESTAMP)
    ON CONFLICT (player_id, stat_name) DO UPDATE SET
        last_updated = CURRENT_TIMESTAMP;
    
    INSERT INTO player_statistics (player_id, stat_name, stat_value, last_updated)
    VALUES (NEW.id, 'experience', 0, CURRENT_TIMESTAMP)
    ON CONFLICT (player_id, stat_name) DO UPDATE SET
        last_updated = CURRENT_TIMESTAMP;
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_player_statistics() OWNER TO etheria_user;

--
-- TOC entry 456 (class 1255 OID 20076)
-- Name: update_player_stats(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_player_stats() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar estadÃ­sticas del jugador
    INSERT INTO player_statistics (player_id, total_points, level, experience, battles_won, battles_lost, villages_owned, last_active)
    SELECT 
        NEW.player_id,
        COALESCE(SUM(re.total_points), 0) as total_points,
        p.level,
        p.experience,
        0 as battles_won,
        0 as battles_lost,
        COUNT(v.id) as villages_owned,
        NOW() as last_active
    FROM players p
    LEFT JOIN ranking_entries re ON p.id = re.player_id
    LEFT JOIN villages v ON p.id = v.player_id
    WHERE p.id = NEW.player_id
    GROUP BY p.id, p.level, p.experience
    ON CONFLICT (player_id) DO UPDATE SET
        total_points = EXCLUDED.total_points,
        level = EXCLUDED.level,
        experience = EXCLUDED.experience,
        villages_owned = EXCLUDED.villages_owned,
        last_active = EXCLUDED.last_active,
        updated_at = NOW();
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_player_stats() OWNER TO etheria_user;

--
-- TOC entry 446 (class 1255 OID 21007)
-- Name: update_player_world_entries_updated_at(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_player_world_entries_updated_at() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_player_world_entries_updated_at() OWNER TO postgres;

--
-- TOC entry 510 (class 1255 OID 20930)
-- Name: update_prestige_rankings(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_prestige_rankings() RETURNS boolean
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar rankings
    INSERT INTO prestige_rankings (player_id, prestige_level, prestige_points, rank_position)
    SELECT 
        pp.player_id,
        pp.prestige_level,
        pp.prestige_points,
        ROW_NUMBER() OVER (ORDER BY pp.prestige_points DESC, pp.prestige_level DESC) as rank_position
    FROM player_prestige pp
    ON CONFLICT (player_id) DO UPDATE SET
        prestige_level = EXCLUDED.prestige_level,
        prestige_points = EXCLUDED.prestige_points,
        rank_position = EXCLUDED.rank_position,
        last_updated = NOW();
    
    RETURN TRUE;
END;
$$;


ALTER FUNCTION public.update_prestige_rankings() OWNER TO etheria_user;

--
-- TOC entry 487 (class 1255 OID 20931)
-- Name: update_prestige_stats(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_prestige_stats() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar estadÃ­sticas del jugador
    INSERT INTO prestige_stats (player_id, titles_earned, achievements_earned, total_prestige_gained)
    SELECT 
        NEW.player_id,
        COUNT(pt.id) as titles_earned,
        COUNT(ppa.id) as achievements_earned,
        NEW.total_prestige_earned as total_prestige_gained
    FROM player_prestige pp
    LEFT JOIN player_titles pt ON pp.player_id = pt.player_id
    LEFT JOIN player_prestige_achievements ppa ON pp.player_id = ppa.player_id
    WHERE pp.player_id = NEW.player_id
    GROUP BY NEW.player_id, NEW.total_prestige_earned
    ON CONFLICT (player_id) DO UPDATE SET
        titles_earned = EXCLUDED.titles_earned,
        achievements_earned = EXCLUDED.achievements_earned,
        total_prestige_gained = EXCLUDED.total_prestige_gained,
        last_updated = NOW();
    
    -- Actualizar rankings
    PERFORM update_prestige_rankings();
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_prestige_stats() OWNER TO etheria_user;

--
-- TOC entry 405 (class 1255 OID 20437)
-- Name: update_quest_progress(uuid, uuid, integer); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_quest_progress(p_player_id uuid, p_quest_id uuid, p_progress_increment integer DEFAULT 1) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
DECLARE
    quest_record RECORD;
    current_progress INTEGER;
    new_progress INTEGER;
BEGIN
    -- Obtener informaciÃ³n de la quest
    SELECT * INTO quest_record
    FROM quests
    WHERE id = p_quest_id AND is_active = true;
    
    IF NOT FOUND THEN
        RETURN FALSE;
    END IF;
    
    -- Obtener progreso actual
    SELECT COALESCE(progress, 0) INTO current_progress
    FROM player_quests
    WHERE player_id = p_player_id AND quest_id = p_quest_id;
    
    -- Calcular nuevo progreso
    new_progress := current_progress + p_progress_increment;
    
    -- Insertar o actualizar progreso
    INSERT INTO player_quests (player_id, quest_id, progress, is_completed)
    VALUES (p_player_id, p_quest_id, new_progress, new_progress >= 1)
    ON CONFLICT (player_id, quest_id) DO UPDATE SET
        progress = EXCLUDED.progress,
        is_completed = EXCLUDED.is_completed,
        completed_at = CASE WHEN EXCLUDED.is_completed AND NOT player_quests.is_completed 
                           THEN NOW() ELSE player_quests.completed_at END,
        updated_at = NOW();
    
    -- Si se completÃ³, crear notificaciÃ³n
    IF new_progress >= 1 AND current_progress < 1 THEN
        INSERT INTO quest_notifications (player_id, quest_id, notification_type, message)
        VALUES (p_player_id, p_quest_id, 'completed', 
                'Â¡Quest completada: ' || quest_record.name || '!');
    END IF;
    
    RETURN TRUE;
END;
$$;


ALTER FUNCTION public.update_quest_progress(p_player_id uuid, p_quest_id uuid, p_progress_increment integer) OWNER TO etheria_user;

--
-- TOC entry 429 (class 1255 OID 20439)
-- Name: update_quest_stats(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_quest_stats() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar estadÃ­sticas del jugador
    INSERT INTO quest_statistics (player_id, total_quests, completed_quests, total_points, last_quest_at)
    SELECT 
        NEW.player_id,
        COUNT(*) as total_quests,
        COUNT(CASE WHEN is_completed THEN 1 END) as completed_quests,
        0 as total_points,
        MAX(CASE WHEN is_completed THEN completed_at END) as last_quest_at
    FROM player_quests pq
    WHERE pq.player_id = NEW.player_id
    GROUP BY NEW.player_id
    ON CONFLICT (player_id) DO UPDATE SET
        total_quests = EXCLUDED.total_quests,
        completed_quests = EXCLUDED.completed_quests,
        last_quest_at = EXCLUDED.last_quest_at,
        updated_at = NOW();
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_quest_stats() OWNER TO etheria_user;

--
-- TOC entry 415 (class 1255 OID 20073)
-- Name: update_ranking(uuid, uuid, uuid, uuid, uuid); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_ranking(p_ranking_type_id uuid, p_player_id uuid DEFAULT NULL::uuid, p_alliance_id uuid DEFAULT NULL::uuid, p_village_id uuid DEFAULT NULL::uuid, p_world_id uuid DEFAULT NULL::uuid) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
DECLARE
    ranking_record RECORD;
    new_points DECIMAL(15,2);
    new_rank INTEGER;
BEGIN
    -- Calcular puntos segÃºn el tipo de ranking
    SELECT calculation_method INTO ranking_record
    FROM ranking_types
    WHERE id = p_ranking_type_id;
    
    -- Calcular puntos (simplificado)
    new_points := 1000; -- Valor por defecto
    
    -- Insertar o actualizar entrada de ranking
    INSERT INTO ranking_entries (ranking_type_id, player_id, alliance_id, village_id, world_id, total_points, rank_position)
    VALUES (p_ranking_type_id, p_player_id, p_alliance_id, p_village_id, p_world_id, new_points, 1)
    ON CONFLICT (ranking_type_id, player_id, alliance_id, village_id, world_id) DO UPDATE SET
        total_points = EXCLUDED.total_points,
        last_updated = NOW();
    
    RETURN TRUE;
END;
$$;


ALTER FUNCTION public.update_ranking(p_ranking_type_id uuid, p_player_id uuid, p_alliance_id uuid, p_village_id uuid, p_world_id uuid) OWNER TO etheria_user;

--
-- TOC entry 398 (class 1255 OID 17928)
-- Name: update_ranking_positions(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_ranking_positions() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar posiciÃ³n anterior
    UPDATE ranking_positions 
    SET previous_position = position 
    WHERE ranking_id = NEW.ranking_id AND player_id = NEW.player_id;
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_ranking_positions() OWNER TO etheria_user;

--
-- TOC entry 443 (class 1255 OID 18345)
-- Name: update_research_statistics(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_research_statistics() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar estadÃ­sticas del jugador
    INSERT INTO research_statistics (player_id, total_technologies, military_techs, economic_techs, social_techs, scientific_techs, total_levels, updated_at)
    SELECT 
        NEW.player_id,
        COUNT(pt.technology_id) as total_technologies,
        COUNT(CASE WHEN t.category = 'military' THEN 1 END) as military_techs,
        COUNT(CASE WHEN t.category = 'economic' THEN 1 END) as economic_techs,
        COUNT(CASE WHEN t.category = 'social' THEN 1 END) as social_techs,
        COUNT(CASE WHEN t.category = 'scientific' THEN 1 END) as scientific_techs,
        COALESCE(SUM(pt.level), 0) as total_levels,
        NOW() as updated_at
    FROM player_technologies pt
    LEFT JOIN technologies t ON pt.technology_id = t.id
    WHERE pt.player_id = NEW.player_id
    GROUP BY NEW.player_id
    ON CONFLICT (player_id) DO UPDATE SET
        total_technologies = EXCLUDED.total_technologies,
        military_techs = EXCLUDED.military_techs,
        economic_techs = EXCLUDED.economic_techs,
        social_techs = EXCLUDED.social_techs,
        scientific_techs = EXCLUDED.scientific_techs,
        total_levels = EXCLUDED.total_levels,
        updated_at = EXCLUDED.updated_at;
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_research_statistics() OWNER TO etheria_user;

--
-- TOC entry 404 (class 1255 OID 17592)
-- Name: update_resources_timestamp(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_resources_timestamp() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.last_updated = NOW();
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_resources_timestamp() OWNER TO etheria_user;

--
-- TOC entry 451 (class 1255 OID 18203)
-- Name: update_system_config(character varying, text, uuid); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_system_config(p_key character varying, p_value text, p_admin_id uuid DEFAULT NULL::uuid) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
BEGIN
    UPDATE system_config
    SET config_value = p_value, updated_by = p_admin_id, updated_at = NOW()
    WHERE config_key = p_key;
    
    RETURN FOUND;
END;
$$;


ALTER FUNCTION public.update_system_config(p_key character varying, p_value text, p_admin_id uuid) OWNER TO etheria_user;

--
-- TOC entry 401 (class 1255 OID 20812)
-- Name: update_title_holders_count(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_title_holders_count() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    IF TG_OP = 'INSERT' THEN
        UPDATE titles SET current_holders = current_holders + 1 WHERE id = NEW.title_id;
        RETURN NEW;
    ELSIF TG_OP = 'DELETE' THEN
        UPDATE titles SET current_holders = current_holders - 1 WHERE id = OLD.title_id;
        RETURN OLD;
    END IF;
    RETURN NULL;
END;
$$;


ALTER FUNCTION public.update_title_holders_count() OWNER TO etheria_user;

--
-- TOC entry 482 (class 1255 OID 17602)
-- Name: update_updated_at_column(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_updated_at_column() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_updated_at_column() OWNER TO etheria_user;

--
-- TOC entry 473 (class 1255 OID 19890)
-- Name: update_village_statistics(); Type: FUNCTION; Schema: public; Owner: etheria_user
--

CREATE FUNCTION public.update_village_statistics() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Actualizar estadÃ­sticas cuando se modifica una aldea
    INSERT INTO village_statistics (village_id, player_id, last_updated)
    VALUES (NEW.id, NEW.player_id, CURRENT_TIMESTAMP)
    ON CONFLICT (village_id) DO UPDATE SET
        last_updated = CURRENT_TIMESTAMP;
    
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_village_statistics() OWNER TO etheria_user;

--
-- TOC entry 475 (class 1255 OID 20977)
-- Name: update_worlds_updated_at(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_worlds_updated_at() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_worlds_updated_at() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 352 (class 1259 OID 20085)
-- Name: achievement_categories; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.achievement_categories (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    icon character varying(50),
    color character varying(7) DEFAULT '#007bff'::character varying,
    background_color character varying(7) DEFAULT '#f8f9fa'::character varying,
    display_order integer DEFAULT 0,
    is_public boolean DEFAULT true,
    show_in_dashboard boolean DEFAULT true,
    total_achievements integer DEFAULT 0,
    completed_count integer DEFAULT 0,
    completion_rate numeric(5,2) DEFAULT 0.00,
    is_active boolean DEFAULT true,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.achievement_categories OWNER TO etheria_user;

--
-- TOC entry 7400 (class 0 OID 0)
-- Dependencies: 352
-- Name: TABLE achievement_categories; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.achievement_categories IS 'CategorÃ­as de achievements disponibles';


--
-- TOC entry 351 (class 1259 OID 20084)
-- Name: achievement_categories_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.achievement_categories_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.achievement_categories_id_seq OWNER TO etheria_user;

--
-- TOC entry 7401 (class 0 OID 0)
-- Dependencies: 351
-- Name: achievement_categories_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.achievement_categories_id_seq OWNED BY public.achievement_categories.id;


--
-- TOC entry 354 (class 1259 OID 20136)
-- Name: achievement_events; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.achievement_events (
    id integer NOT NULL,
    event_type character varying(100) NOT NULL,
    event_data text,
    entity_type character varying(50) NOT NULL,
    entity_id integer NOT NULL,
    progress_value integer DEFAULT 0,
    progress_data text,
    source character varying(50) DEFAULT 'system'::character varying,
    description text,
    occurred_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.achievement_events OWNER TO etheria_user;

--
-- TOC entry 7402 (class 0 OID 0)
-- Dependencies: 354
-- Name: TABLE achievement_events; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.achievement_events IS 'Eventos que pueden desbloquear o actualizar logros';


--
-- TOC entry 7403 (class 0 OID 0)
-- Dependencies: 354
-- Name: COLUMN achievement_events.event_data; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.achievement_events.event_data IS 'JSON con los datos del evento que desbloqueÃ³ el logro';


--
-- TOC entry 7404 (class 0 OID 0)
-- Dependencies: 354
-- Name: COLUMN achievement_events.progress_data; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.achievement_events.progress_data IS 'JSON con los datos de progreso generados por el evento';


--
-- TOC entry 353 (class 1259 OID 20135)
-- Name: achievement_events_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.achievement_events_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.achievement_events_id_seq OWNER TO etheria_user;

--
-- TOC entry 7405 (class 0 OID 0)
-- Dependencies: 353
-- Name: achievement_events_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.achievement_events_id_seq OWNED BY public.achievement_events.id;


--
-- TOC entry 358 (class 1259 OID 20283)
-- Name: achievement_leaderboard; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.achievement_leaderboard (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    total_achievements integer DEFAULT 0,
    total_points integer DEFAULT 0,
    rank_position integer,
    last_updated timestamp with time zone DEFAULT now()
);


ALTER TABLE public.achievement_leaderboard OWNER TO etheria_user;

--
-- TOC entry 7406 (class 0 OID 0)
-- Dependencies: 358
-- Name: TABLE achievement_leaderboard; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.achievement_leaderboard IS 'Leaderboard de achievements';


--
-- TOC entry 359 (class 1259 OID 20299)
-- Name: achievement_milestones; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.achievement_milestones (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    achievement_id uuid NOT NULL,
    milestone_number integer NOT NULL,
    progress_required integer NOT NULL,
    reward_data jsonb,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.achievement_milestones OWNER TO etheria_user;

--
-- TOC entry 7407 (class 0 OID 0)
-- Dependencies: 359
-- Name: TABLE achievement_milestones; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.achievement_milestones IS 'Milestones de achievements';


--
-- TOC entry 360 (class 1259 OID 20316)
-- Name: achievement_notifications; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.achievement_notifications (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    achievement_id uuid NOT NULL,
    notification_type character varying(50) DEFAULT 'completed'::character varying NOT NULL,
    message text NOT NULL,
    is_read boolean DEFAULT false,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT achievement_notifications_notification_type_check CHECK (((notification_type)::text = ANY ((ARRAY['progress'::character varying, 'completed'::character varying, 'milestone'::character varying])::text[])))
);


ALTER TABLE public.achievement_notifications OWNER TO etheria_user;

--
-- TOC entry 7408 (class 0 OID 0)
-- Dependencies: 360
-- Name: TABLE achievement_notifications; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.achievement_notifications IS 'Notificaciones de achievements';


--
-- TOC entry 355 (class 1259 OID 20229)
-- Name: achievement_progress; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.achievement_progress (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    achievement_id uuid NOT NULL,
    current_progress integer DEFAULT 0 NOT NULL,
    target_progress integer NOT NULL,
    last_updated timestamp with time zone DEFAULT now()
);


ALTER TABLE public.achievement_progress OWNER TO etheria_user;

--
-- TOC entry 7409 (class 0 OID 0)
-- Dependencies: 355
-- Name: TABLE achievement_progress; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.achievement_progress IS 'Progreso detallado de achievements';


--
-- TOC entry 356 (class 1259 OID 20249)
-- Name: achievement_rewards; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.achievement_rewards (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    achievement_id uuid NOT NULL,
    reward_type character varying(50) NOT NULL,
    reward_data jsonb NOT NULL,
    quantity integer DEFAULT 1 NOT NULL,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT achievement_rewards_reward_type_check CHECK (((reward_type)::text = ANY ((ARRAY['resources'::character varying, 'experience'::character varying, 'items'::character varying, 'currency'::character varying, 'titles'::character varying, 'units'::character varying])::text[])))
);


ALTER TABLE public.achievement_rewards OWNER TO etheria_user;

--
-- TOC entry 7410 (class 0 OID 0)
-- Dependencies: 356
-- Name: TABLE achievement_rewards; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.achievement_rewards IS 'Recompensas de achievements';


--
-- TOC entry 357 (class 1259 OID 20266)
-- Name: achievement_statistics; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.achievement_statistics (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    total_achievements integer DEFAULT 0,
    completed_achievements integer DEFAULT 0,
    total_points integer DEFAULT 0,
    average_completion_time interval,
    last_achievement_at timestamp with time zone,
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.achievement_statistics OWNER TO etheria_user;

--
-- TOC entry 7411 (class 0 OID 0)
-- Dependencies: 357
-- Name: TABLE achievement_statistics; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.achievement_statistics IS 'EstadÃ­sticas de achievements por jugador';


--
-- TOC entry 238 (class 1259 OID 17477)
-- Name: achievements; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.achievements (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(100) NOT NULL,
    description text NOT NULL,
    category character varying(50) NOT NULL,
    requirement_type character varying(50) NOT NULL,
    requirement_value integer NOT NULL,
    reward_type character varying(50),
    reward_value integer,
    icon_url character varying(255),
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.achievements OWNER TO etheria_user;

--
-- TOC entry 7412 (class 0 OID 0)
-- Dependencies: 238
-- Name: TABLE achievements; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.achievements IS 'Achievements disponibles en el juego';


--
-- TOC entry 263 (class 1259 OID 17953)
-- Name: admin_roles; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.admin_roles (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(50) NOT NULL,
    description text,
    permissions jsonb NOT NULL,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.admin_roles OWNER TO etheria_user;

--
-- TOC entry 7413 (class 0 OID 0)
-- Dependencies: 263
-- Name: TABLE admin_roles; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.admin_roles IS 'Roles de administraciÃ³n disponibles';


--
-- TOC entry 264 (class 1259 OID 17964)
-- Name: admins; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.admins (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    role_id uuid NOT NULL,
    is_active boolean DEFAULT true,
    assigned_by uuid,
    assigned_at timestamp with time zone DEFAULT now(),
    last_action timestamp with time zone
);


ALTER TABLE public.admins OWNER TO etheria_user;

--
-- TOC entry 7414 (class 0 OID 0)
-- Dependencies: 264
-- Name: TABLE admins; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.admins IS 'Administradores del sistema';


--
-- TOC entry 219 (class 1259 OID 17042)
-- Name: players; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.players (
    id uuid NOT NULL,
    username character varying(50) NOT NULL,
    password character varying(255) NOT NULL,
    email character varying(255) NOT NULL,
    created_at timestamp without time zone NOT NULL,
    last_login timestamp without time zone NOT NULL,
    password_hash character varying(255),
    race_id uuid,
    level integer DEFAULT 1,
    experience integer DEFAULT 0,
    is_active boolean DEFAULT true,
    is_online boolean DEFAULT false,
    last_active timestamp with time zone,
    updated_at timestamp with time zone DEFAULT now(),
    role character varying(20) DEFAULT 'user'::character varying,
    is_banned boolean DEFAULT false,
    ban_reason text,
    ban_expires_at timestamp with time zone,
    gold integer DEFAULT 0,
    gems integer DEFAULT 0,
    alliance_id uuid,
    world_id uuid,
    CONSTRAINT players_role_check CHECK (((role)::text = ANY ((ARRAY['admin'::character varying, 'moderator'::character varying, 'user'::character varying])::text[])))
);


ALTER TABLE public.players OWNER TO etheria_user;

--
-- TOC entry 7415 (class 0 OID 0)
-- Dependencies: 219
-- Name: TABLE players; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.players IS 'Jugadores del juego';


--
-- TOC entry 7416 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.password_hash; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.password_hash IS 'Hash de la contraseÃ±a del jugador';


--
-- TOC entry 7417 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.race_id; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.race_id IS 'ID de la raza del jugador';


--
-- TOC entry 7418 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.level; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.level IS 'Nivel del jugador';


--
-- TOC entry 7419 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.experience; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.experience IS 'Experiencia del jugador';


--
-- TOC entry 7420 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.is_active; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.is_active IS 'Indica si la cuenta estÃ¡ activa';


--
-- TOC entry 7421 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.is_online; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.is_online IS 'Indica si el jugador estÃ¡ en lÃ­nea';


--
-- TOC entry 7422 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.last_active; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.last_active IS 'Ãšltima vez que el jugador estuvo activo';


--
-- TOC entry 7423 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.updated_at; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.updated_at IS 'Fecha de Ãºltima actualizaciÃ³n';


--
-- TOC entry 7424 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.role; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.role IS 'Rol del jugador: admin, moderator, user';


--
-- TOC entry 7425 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.is_banned; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.is_banned IS 'Indica si el jugador está baneado';


--
-- TOC entry 7426 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.ban_reason; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.ban_reason IS 'Razón del baneo';


--
-- TOC entry 7427 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.ban_expires_at; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.ban_expires_at IS 'Fecha de expiración del baneo';


--
-- TOC entry 7428 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.gold; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.gold IS 'Oro del jugador';


--
-- TOC entry 7429 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.gems; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.gems IS 'Gemas del jugador';


--
-- TOC entry 7430 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.alliance_id; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.alliance_id IS 'ID de la alianza del jugador';


--
-- TOC entry 7431 (class 0 OID 0)
-- Dependencies: 219
-- Name: COLUMN players.world_id; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.players.world_id IS 'ID del mundo donde está el jugador';


--
-- TOC entry 277 (class 1259 OID 18206)
-- Name: active_admins; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.active_admins AS
 SELECT a.id,
    a.is_active,
    a.assigned_at,
    a.last_action,
    p.username AS player_name,
    p.email AS player_email,
    ar.name AS role_name,
    ar.description AS role_description,
    ar.permissions
   FROM ((public.admins a
     JOIN public.players p ON ((a.player_id = p.id)))
     JOIN public.admin_roles ar ON ((a.role_id = ar.id)))
  WHERE (a.is_active = true);


ALTER VIEW public.active_admins OWNER TO etheria_user;

--
-- TOC entry 270 (class 1259 OID 18054)
-- Name: system_alerts; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.system_alerts (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    alert_type character varying(50) NOT NULL,
    severity character varying(20) NOT NULL,
    title character varying(200) NOT NULL,
    message text NOT NULL,
    is_active boolean DEFAULT true,
    acknowledged_by uuid,
    acknowledged_at timestamp with time zone,
    resolved_at timestamp with time zone,
    data jsonb,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.system_alerts OWNER TO etheria_user;

--
-- TOC entry 7432 (class 0 OID 0)
-- Dependencies: 270
-- Name: TABLE system_alerts; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.system_alerts IS 'Alertas del sistema';


--
-- TOC entry 279 (class 1259 OID 18216)
-- Name: active_alerts; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.active_alerts AS
 SELECT sa.id,
    sa.alert_type,
    sa.severity,
    sa.title,
    sa.message,
    sa.created_at,
    a.username AS acknowledged_by_name
   FROM ((public.system_alerts sa
     LEFT JOIN public.admins adm ON ((sa.acknowledged_by = adm.id)))
     LEFT JOIN public.players a ON ((adm.player_id = a.id)))
  WHERE (sa.is_active = true)
  ORDER BY sa.severity DESC, sa.created_at DESC;


ALTER VIEW public.active_alerts OWNER TO etheria_user;

--
-- TOC entry 326 (class 1259 OID 19508)
-- Name: currencies; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.currencies (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(50) NOT NULL,
    symbol character varying(10) NOT NULL,
    description text,
    exchange_rate numeric(15,6) DEFAULT 1.0,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.currencies OWNER TO etheria_user;

--
-- TOC entry 7433 (class 0 OID 0)
-- Dependencies: 326
-- Name: TABLE currencies; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.currencies IS 'Monedas disponibles en el juego';


--
-- TOC entry 327 (class 1259 OID 19521)
-- Name: market_listings; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.market_listings (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    seller_id uuid NOT NULL,
    item_type character varying(50) NOT NULL,
    item_id uuid,
    item_name character varying(100) NOT NULL,
    quantity integer NOT NULL,
    price_per_unit numeric(15,2) NOT NULL,
    currency_id uuid NOT NULL,
    listing_type character varying(20) DEFAULT 'sell'::character varying NOT NULL,
    status character varying(20) DEFAULT 'active'::character varying NOT NULL,
    expires_at timestamp with time zone,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now(),
    CONSTRAINT market_listings_item_type_check CHECK (((item_type)::text = ANY ((ARRAY['resource'::character varying, 'unit'::character varying, 'building'::character varying, 'artifact'::character varying])::text[]))),
    CONSTRAINT market_listings_listing_type_check CHECK (((listing_type)::text = ANY ((ARRAY['buy'::character varying, 'sell'::character varying])::text[]))),
    CONSTRAINT market_listings_price_per_unit_check CHECK ((price_per_unit > (0)::numeric)),
    CONSTRAINT market_listings_quantity_check CHECK ((quantity > 0)),
    CONSTRAINT market_listings_status_check CHECK (((status)::text = ANY ((ARRAY['active'::character varying, 'completed'::character varying, 'cancelled'::character varying, 'expired'::character varying])::text[])))
);


ALTER TABLE public.market_listings OWNER TO etheria_user;

--
-- TOC entry 7434 (class 0 OID 0)
-- Dependencies: 327
-- Name: TABLE market_listings; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.market_listings IS 'Listados del mercado de jugadores';


--
-- TOC entry 334 (class 1259 OID 19681)
-- Name: active_market_listings; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.active_market_listings AS
 SELECT ml.id,
    ml.item_type,
    ml.item_name,
    ml.quantity,
    ml.price_per_unit,
    ml.listing_type,
    ml.expires_at,
    p.username AS seller_name,
    c.symbol AS currency_symbol
   FROM ((public.market_listings ml
     JOIN public.players p ON ((ml.seller_id = p.id)))
     JOIN public.currencies c ON ((ml.currency_id = c.id)))
  WHERE (((ml.status)::text = 'active'::text) AND ((ml.expires_at IS NULL) OR (ml.expires_at > now())))
  ORDER BY ml.created_at DESC;


ALTER VIEW public.active_market_listings OWNER TO etheria_user;

--
-- TOC entry 249 (class 1259 OID 17708)
-- Name: player_quests; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.player_quests (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    quest_id uuid NOT NULL,
    progress jsonb DEFAULT '{}'::jsonb,
    status character varying(20) DEFAULT 'active'::character varying NOT NULL,
    started_at timestamp with time zone DEFAULT now(),
    completed_at timestamp with time zone,
    expires_at timestamp with time zone,
    rewards_claimed boolean DEFAULT false,
    CONSTRAINT player_quests_status_check CHECK (((status)::text = ANY ((ARRAY['active'::character varying, 'completed'::character varying, 'failed'::character varying, 'expired'::character varying])::text[])))
);


ALTER TABLE public.player_quests OWNER TO etheria_user;

--
-- TOC entry 7435 (class 0 OID 0)
-- Dependencies: 249
-- Name: TABLE player_quests; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.player_quests IS 'Quests de jugadores y su progreso';


--
-- TOC entry 248 (class 1259 OID 17696)
-- Name: quests; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.quests (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(100) NOT NULL,
    description text NOT NULL,
    quest_type character varying(50) NOT NULL,
    category character varying(50) NOT NULL,
    requirements jsonb NOT NULL,
    rewards jsonb NOT NULL,
    time_limit integer,
    min_level integer DEFAULT 1,
    max_level integer,
    is_repeatable boolean DEFAULT false,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.quests OWNER TO etheria_user;

--
-- TOC entry 7436 (class 0 OID 0)
-- Dependencies: 248
-- Name: TABLE quests; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.quests IS 'Quests disponibles en el juego';


--
-- TOC entry 261 (class 1259 OID 17943)
-- Name: active_quests; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.active_quests AS
 SELECT pq.id,
    pq.progress,
    pq.status,
    pq.started_at,
    pq.expires_at,
    q.name AS quest_name,
    q.description,
    q.quest_type,
    q.category,
    q.requirements,
    q.rewards,
    p.username AS player_name
   FROM ((public.player_quests pq
     JOIN public.quests q ON ((pq.quest_id = q.id)))
     JOIN public.players p ON ((pq.player_id = p.id)))
  WHERE ((pq.status)::text = 'active'::text);


ALTER VIEW public.active_quests OWNER TO etheria_user;

--
-- TOC entry 265 (class 1259 OID 17989)
-- Name: admin_actions; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.admin_actions (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    admin_id uuid NOT NULL,
    action_type character varying(50) NOT NULL,
    target_type character varying(50) NOT NULL,
    target_id uuid NOT NULL,
    reason text,
    duration integer,
    data jsonb,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.admin_actions OWNER TO etheria_user;

--
-- TOC entry 7437 (class 0 OID 0)
-- Dependencies: 265
-- Name: TABLE admin_actions; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.admin_actions IS 'Acciones realizadas por administradores';


--
-- TOC entry 233 (class 1259 OID 17338)
-- Name: alliance_members; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.alliance_members (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    alliance_id uuid NOT NULL,
    player_id uuid NOT NULL,
    role character varying(20) DEFAULT 'member'::character varying NOT NULL,
    joined_at timestamp with time zone DEFAULT now(),
    contribution_points integer DEFAULT 0,
    CONSTRAINT alliance_members_role_check CHECK (((role)::text = ANY ((ARRAY['leader'::character varying, 'officer'::character varying, 'member'::character varying])::text[])))
);


ALTER TABLE public.alliance_members OWNER TO etheria_user;

--
-- TOC entry 7438 (class 0 OID 0)
-- Dependencies: 233
-- Name: TABLE alliance_members; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.alliance_members IS 'Miembros de alianzas';


--
-- TOC entry 344 (class 1259 OID 19948)
-- Name: alliance_statistics; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.alliance_statistics (
    alliance_id uuid NOT NULL,
    total_points numeric(15,2) DEFAULT 0,
    member_count integer DEFAULT 0,
    active_members integer DEFAULT 0,
    total_battles_won integer DEFAULT 0,
    total_battles_lost integer DEFAULT 0,
    total_villages integer DEFAULT 0,
    average_level numeric(5,2) DEFAULT 0,
    total_contributions integer DEFAULT 0,
    last_updated timestamp with time zone DEFAULT now()
);


ALTER TABLE public.alliance_statistics OWNER TO etheria_user;

--
-- TOC entry 7439 (class 0 OID 0)
-- Dependencies: 344
-- Name: TABLE alliance_statistics; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.alliance_statistics IS 'EstadÃ­sticas de alianzas';


--
-- TOC entry 232 (class 1259 OID 17311)
-- Name: alliances; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.alliances (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(100) NOT NULL,
    tag character varying(10) NOT NULL,
    description text,
    leader_id uuid NOT NULL,
    world_id uuid NOT NULL,
    member_count integer DEFAULT 0,
    max_members integer DEFAULT 50,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now(),
    level integer DEFAULT 1,
    experience integer DEFAULT 0
);


ALTER TABLE public.alliances OWNER TO etheria_user;

--
-- TOC entry 7440 (class 0 OID 0)
-- Dependencies: 232
-- Name: TABLE alliances; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.alliances IS 'Alianzas de jugadores';


--
-- TOC entry 309 (class 1259 OID 19197)
-- Name: player_units; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.player_units (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    unit_type_id uuid NOT NULL,
    quantity integer DEFAULT 0 NOT NULL,
    available_quantity integer DEFAULT 0 NOT NULL,
    in_battle integer DEFAULT 0 NOT NULL,
    training integer DEFAULT 0 NOT NULL,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.player_units OWNER TO etheria_user;

--
-- TOC entry 7441 (class 0 OID 0)
-- Dependencies: 309
-- Name: TABLE player_units; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.player_units IS 'Unidades de cada jugador para batallas';


--
-- TOC entry 226 (class 1259 OID 17189)
-- Name: unit_types; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.unit_types (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(50) NOT NULL,
    display_name character varying(100) NOT NULL,
    description text,
    attack integer DEFAULT 10 NOT NULL,
    defense integer DEFAULT 10 NOT NULL,
    speed integer DEFAULT 10 NOT NULL,
    training_time integer DEFAULT 60 NOT NULL,
    cost_wood integer DEFAULT 0,
    cost_stone integer DEFAULT 0,
    cost_food integer DEFAULT 0,
    cost_gold integer DEFAULT 0,
    food_consumption integer DEFAULT 1,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.unit_types OWNER TO etheria_user;

--
-- TOC entry 7442 (class 0 OID 0)
-- Dependencies: 226
-- Name: TABLE unit_types; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.unit_types IS 'Tipos de unidades disponibles';


--
-- TOC entry 311 (class 1259 OID 19233)
-- Name: available_battle_units; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.available_battle_units AS
 SELECT pu.player_id,
    p.username,
    pu.unit_type_id,
    ut.name AS unit_name,
    ut.display_name AS unit_display_name,
    pu.quantity,
    pu.available_quantity,
    pu.in_battle,
    pu.training
   FROM ((public.player_units pu
     JOIN public.players p ON ((pu.player_id = p.id)))
     JOIN public.unit_types ut ON ((pu.unit_type_id = ut.id)))
  WHERE (pu.available_quantity > 0);


ALTER VIEW public.available_battle_units OWNER TO etheria_user;

--
-- TOC entry 306 (class 1259 OID 19079)
-- Name: battle_formations; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.battle_formations (
    id integer NOT NULL,
    name character varying(64) NOT NULL,
    description text,
    type character varying(16) NOT NULL,
    layout jsonb DEFAULT '{}'::jsonb NOT NULL,
    bonuses jsonb DEFAULT '{}'::jsonb NOT NULL,
    penalties jsonb DEFAULT '{}'::jsonb NOT NULL,
    requirements jsonb DEFAULT '[]'::jsonb NOT NULL,
    min_units integer DEFAULT 1 NOT NULL,
    max_units integer DEFAULT 100 NOT NULL,
    icon character varying(128),
    preview character varying(128),
    is_active boolean DEFAULT true NOT NULL,
    is_advanced boolean DEFAULT false NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.battle_formations OWNER TO etheria_user;

--
-- TOC entry 7443 (class 0 OID 0)
-- Dependencies: 306
-- Name: TABLE battle_formations; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.battle_formations IS 'Formaciones de batalla de los jugadores';


--
-- TOC entry 305 (class 1259 OID 19078)
-- Name: battle_formations_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.battle_formations_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.battle_formations_id_seq OWNER TO etheria_user;

--
-- TOC entry 7444 (class 0 OID 0)
-- Dependencies: 305
-- Name: battle_formations_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.battle_formations_id_seq OWNED BY public.battle_formations.id;


--
-- TOC entry 257 (class 1259 OID 17856)
-- Name: battle_reports; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.battle_reports (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    battle_id uuid NOT NULL,
    attacker_id uuid NOT NULL,
    defender_id uuid NOT NULL,
    report_type character varying(20) DEFAULT 'attack'::character varying NOT NULL,
    battle_data jsonb NOT NULL,
    casualties jsonb,
    loot jsonb,
    experience_gained integer DEFAULT 0,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT battle_reports_report_type_check CHECK (((report_type)::text = ANY ((ARRAY['attack'::character varying, 'defense'::character varying])::text[])))
);


ALTER TABLE public.battle_reports OWNER TO etheria_user;

--
-- TOC entry 7445 (class 0 OID 0)
-- Dependencies: 257
-- Name: TABLE battle_reports; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.battle_reports IS 'Reportes de batallas';


--
-- TOC entry 308 (class 1259 OID 19181)
-- Name: battle_simulations; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.battle_simulations (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    simulation_data jsonb NOT NULL,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.battle_simulations OWNER TO etheria_user;

--
-- TOC entry 7446 (class 0 OID 0)
-- Dependencies: 308
-- Name: TABLE battle_simulations; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.battle_simulations IS 'Simulaciones de batallas por jugadores';


--
-- TOC entry 315 (class 1259 OID 19294)
-- Name: battle_system_config; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.battle_system_config (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    config_key character varying(100) NOT NULL,
    config_value text NOT NULL,
    config_type character varying(50) DEFAULT 'string'::character varying NOT NULL,
    description text,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.battle_system_config OWNER TO etheria_user;

--
-- TOC entry 312 (class 1259 OID 19256)
-- Name: battle_tactics; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.battle_tactics (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    tactic_name character varying(100) NOT NULL,
    description text,
    tactic_type character varying(50) NOT NULL,
    effects jsonb NOT NULL,
    requirements jsonb,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT battle_tactics_tactic_type_check CHECK (((tactic_type)::text = ANY ((ARRAY['aggressive'::character varying, 'defensive'::character varying, 'balanced'::character varying, 'hit_and_run'::character varying, 'siege'::character varying])::text[])))
);


ALTER TABLE public.battle_tactics OWNER TO etheria_user;

--
-- TOC entry 313 (class 1259 OID 19269)
-- Name: battle_terrain; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.battle_terrain (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    terrain_name character varying(100) NOT NULL,
    description text,
    terrain_type character varying(50) NOT NULL,
    effects jsonb NOT NULL,
    icon character varying(100),
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT battle_terrain_terrain_type_check CHECK (((terrain_type)::text = ANY ((ARRAY['plains'::character varying, 'forest'::character varying, 'mountain'::character varying, 'desert'::character varying, 'swamp'::character varying, 'urban'::character varying])::text[])))
);


ALTER TABLE public.battle_terrain OWNER TO etheria_user;

--
-- TOC entry 307 (class 1259 OID 19166)
-- Name: battle_waves; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.battle_waves (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    battle_id uuid NOT NULL,
    wave_number integer NOT NULL,
    attacker_units jsonb NOT NULL,
    defender_units jsonb NOT NULL,
    result character varying(20) NOT NULL,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT battle_waves_result_check CHECK (((result)::text = ANY ((ARRAY['attacker_win'::character varying, 'defender_win'::character varying, 'draw'::character varying])::text[])))
);


ALTER TABLE public.battle_waves OWNER TO etheria_user;

--
-- TOC entry 7447 (class 0 OID 0)
-- Dependencies: 307
-- Name: TABLE battle_waves; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.battle_waves IS 'Oleadas de combate en una batalla';


--
-- TOC entry 314 (class 1259 OID 19281)
-- Name: battle_weather; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.battle_weather (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    weather_name character varying(100) NOT NULL,
    description text,
    weather_type character varying(50) NOT NULL,
    effects jsonb NOT NULL,
    probability numeric(5,2) DEFAULT 0.25,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT battle_weather_weather_type_check CHECK (((weather_type)::text = ANY ((ARRAY['clear'::character varying, 'rain'::character varying, 'storm'::character varying, 'fog'::character varying, 'snow'::character varying])::text[])))
);


ALTER TABLE public.battle_weather OWNER TO etheria_user;

--
-- TOC entry 234 (class 1259 OID 17360)
-- Name: battles; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.battles (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    attacker_id uuid NOT NULL,
    defender_id uuid NOT NULL,
    attacker_village_id uuid NOT NULL,
    defender_village_id uuid NOT NULL,
    battle_type character varying(20) DEFAULT 'attack'::character varying NOT NULL,
    start_time timestamp with time zone DEFAULT now(),
    end_time timestamp with time zone,
    winner_id uuid,
    status character varying(20) DEFAULT 'pending'::character varying NOT NULL,
    attacker_units jsonb,
    defender_units jsonb,
    battle_report jsonb,
    created_at timestamp with time zone DEFAULT now(),
    mode character varying(50) DEFAULT 'basic'::character varying,
    max_waves integer DEFAULT 3,
    max_duration integer DEFAULT 300,
    current_wave integer DEFAULT 0,
    duration integer DEFAULT 0,
    terrain character varying(100),
    weather character varying(100),
    attacker_formation text,
    defender_formation text,
    attacker_tactics text,
    defender_tactics text,
    CONSTRAINT battles_battle_type_check CHECK (((battle_type)::text = ANY ((ARRAY['attack'::character varying, 'raid'::character varying, 'support'::character varying])::text[]))),
    CONSTRAINT battles_status_check CHECK (((status)::text = ANY ((ARRAY['pending'::character varying, 'in_progress'::character varying, 'completed'::character varying, 'cancelled'::character varying])::text[])))
);


ALTER TABLE public.battles OWNER TO etheria_user;

--
-- TOC entry 7448 (class 0 OID 0)
-- Dependencies: 234
-- Name: TABLE battles; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.battles IS 'Batallas entre jugadores';


--
-- TOC entry 391 (class 1259 OID 20934)
-- Name: building_configs; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.building_configs (
    id integer NOT NULL,
    type character varying(50) NOT NULL,
    level integer NOT NULL,
    wood_cost integer NOT NULL,
    stone_cost integer NOT NULL,
    food_cost integer NOT NULL,
    gold_cost integer NOT NULL,
    build_time_seconds integer NOT NULL,
    production_per_hour integer DEFAULT 0,
    storage_capacity integer DEFAULT 0,
    training_speed_modifier double precision DEFAULT 1.0,
    construction_speed_modifier double precision DEFAULT 1.0
);


ALTER TABLE public.building_configs OWNER TO etheria_user;

--
-- TOC entry 390 (class 1259 OID 20933)
-- Name: building_configs_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.building_configs_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.building_configs_id_seq OWNER TO etheria_user;

--
-- TOC entry 7449 (class 0 OID 0)
-- Dependencies: 390
-- Name: building_configs_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.building_configs_id_seq OWNED BY public.building_configs.id;


--
-- TOC entry 225 (class 1259 OID 17167)
-- Name: building_types; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.building_types (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(50) NOT NULL,
    display_name character varying(100) NOT NULL,
    description text,
    max_level integer DEFAULT 20,
    base_production_wood integer DEFAULT 0,
    base_production_stone integer DEFAULT 0,
    base_production_food integer DEFAULT 0,
    base_production_gold integer DEFAULT 0,
    base_storage_wood integer DEFAULT 0,
    base_storage_stone integer DEFAULT 0,
    base_storage_food integer DEFAULT 0,
    base_storage_gold integer DEFAULT 0,
    upgrade_time_base integer DEFAULT 60,
    upgrade_cost_multiplier numeric(5,2) DEFAULT 1.5,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.building_types OWNER TO etheria_user;

--
-- TOC entry 7450 (class 0 OID 0)
-- Dependencies: 225
-- Name: TABLE building_types; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.building_types IS 'Tipos de edificios disponibles';


--
-- TOC entry 223 (class 1259 OID 17092)
-- Name: buildings; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.buildings (
    id uuid NOT NULL,
    village_id uuid NOT NULL,
    type character varying(50) NOT NULL,
    level integer DEFAULT 1 NOT NULL,
    is_upgrading boolean DEFAULT false NOT NULL,
    upgrade_completion_time timestamp without time zone,
    building_type_id uuid
);


ALTER TABLE public.buildings OWNER TO etheria_user;

--
-- TOC entry 7451 (class 0 OID 0)
-- Dependencies: 223
-- Name: TABLE buildings; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.buildings IS 'Edificios de las aldeas';


--
-- TOC entry 231 (class 1259 OID 17290)
-- Name: chat_channel_members; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.chat_channel_members (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    channel_id uuid NOT NULL,
    player_id uuid NOT NULL,
    username character varying(50) NOT NULL,
    is_admin boolean DEFAULT false NOT NULL,
    is_moderator boolean DEFAULT false NOT NULL,
    joined_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.chat_channel_members OWNER TO etheria_user;

--
-- TOC entry 7452 (class 0 OID 0)
-- Dependencies: 231
-- Name: TABLE chat_channel_members; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.chat_channel_members IS 'Miembros de canales de chat';


--
-- TOC entry 229 (class 1259 OID 17251)
-- Name: chat_channels; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.chat_channels (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    type character varying(50) DEFAULT 'global'::character varying NOT NULL,
    world_id uuid,
    is_active boolean DEFAULT true NOT NULL,
    max_members integer DEFAULT 1000,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.chat_channels OWNER TO etheria_user;

--
-- TOC entry 7453 (class 0 OID 0)
-- Dependencies: 229
-- Name: TABLE chat_channels; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.chat_channels IS 'Canales de chat';


--
-- TOC entry 230 (class 1259 OID 17270)
-- Name: chat_messages; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.chat_messages (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    channel_id uuid NOT NULL,
    player_id uuid NOT NULL,
    username character varying(50) NOT NULL,
    message text NOT NULL,
    type character varying(20) DEFAULT 'text'::character varying NOT NULL,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.chat_messages OWNER TO etheria_user;

--
-- TOC entry 7454 (class 0 OID 0)
-- Dependencies: 230
-- Name: TABLE chat_messages; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.chat_messages IS 'Mensajes de chat';


--
-- TOC entry 393 (class 1259 OID 21014)
-- Name: currency_config; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.currency_config (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    global_coin character varying(50) DEFAULT 'Oro'::character varying NOT NULL,
    world_coin character varying(50) DEFAULT 'Plata'::character varying NOT NULL,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.currency_config OWNER TO postgres;

--
-- TOC entry 7455 (class 0 OID 0)
-- Dependencies: 393
-- Name: TABLE currency_config; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.currency_config IS 'Configuración de nombres de monedas del juego';


--
-- TOC entry 7456 (class 0 OID 0)
-- Dependencies: 393
-- Name: COLUMN currency_config.global_coin; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.currency_config.global_coin IS 'Nombre de la moneda global (ej: Oro)';


--
-- TOC entry 7457 (class 0 OID 0)
-- Dependencies: 393
-- Name: COLUMN currency_config.world_coin; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.currency_config.world_coin IS 'Nombre de la moneda de mundo (ej: Plata)';


--
-- TOC entry 330 (class 1259 OID 19593)
-- Name: currency_exchanges; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.currency_exchanges (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    from_currency_id uuid NOT NULL,
    to_currency_id uuid NOT NULL,
    from_amount numeric(15,2) NOT NULL,
    to_amount numeric(15,2) NOT NULL,
    exchange_rate numeric(15,6) NOT NULL,
    fee numeric(15,2) DEFAULT 0,
    status character varying(20) DEFAULT 'pending'::character varying NOT NULL,
    completed_at timestamp with time zone,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT currency_exchanges_status_check CHECK (((status)::text = ANY ((ARRAY['pending'::character varying, 'completed'::character varying, 'failed'::character varying])::text[])))
);


ALTER TABLE public.currency_exchanges OWNER TO etheria_user;

--
-- TOC entry 7458 (class 0 OID 0)
-- Dependencies: 330
-- Name: TABLE currency_exchanges; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.currency_exchanges IS 'Intercambios de monedas';


--
-- TOC entry 396 (class 1259 OID 21061)
-- Name: currency_transactions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.currency_transactions (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    world_id uuid,
    currency_type character varying(10) NOT NULL,
    amount bigint NOT NULL,
    type character varying(20) NOT NULL,
    description character varying(200),
    balance bigint NOT NULL,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT currency_transactions_currency_type_check CHECK (((currency_type)::text = ANY ((ARRAY['global'::character varying, 'world'::character varying])::text[]))),
    CONSTRAINT currency_transactions_type_check CHECK (((type)::text = ANY ((ARRAY['earn'::character varying, 'spend'::character varying, 'transfer'::character varying])::text[])))
);


ALTER TABLE public.currency_transactions OWNER TO postgres;

--
-- TOC entry 7459 (class 0 OID 0)
-- Dependencies: 396
-- Name: TABLE currency_transactions; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.currency_transactions IS 'Historial de transacciones de monedas';


--
-- TOC entry 7460 (class 0 OID 0)
-- Dependencies: 396
-- Name: COLUMN currency_transactions.currency_type; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.currency_transactions.currency_type IS 'Tipo de moneda: global o world';


--
-- TOC entry 7461 (class 0 OID 0)
-- Dependencies: 396
-- Name: COLUMN currency_transactions.type; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.currency_transactions.type IS 'Tipo de transacción: earn, spend, transfer';


--
-- TOC entry 7462 (class 0 OID 0)
-- Dependencies: 396
-- Name: COLUMN currency_transactions.balance; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.currency_transactions.balance IS 'Balance después de la transacción';


--
-- TOC entry 274 (class 1259 OID 18113)
-- Name: database_backups; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.database_backups (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    backup_name character varying(100) NOT NULL,
    backup_type character varying(20) NOT NULL,
    file_path character varying(500),
    file_size bigint,
    checksum character varying(64),
    status character varying(20) DEFAULT 'pending'::character varying NOT NULL,
    started_at timestamp with time zone DEFAULT now(),
    completed_at timestamp with time zone,
    created_by uuid,
    notes text,
    CONSTRAINT database_backups_status_check CHECK (((status)::text = ANY ((ARRAY['pending'::character varying, 'in_progress'::character varying, 'completed'::character varying, 'failed'::character varying])::text[])))
);


ALTER TABLE public.database_backups OWNER TO etheria_user;

--
-- TOC entry 7463 (class 0 OID 0)
-- Dependencies: 274
-- Name: TABLE database_backups; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.database_backups IS 'Backups de la base de datos';


--
-- TOC entry 275 (class 1259 OID 18129)
-- Name: database_restores; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.database_restores (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    backup_id uuid NOT NULL,
    restore_name character varying(100) NOT NULL,
    status character varying(20) DEFAULT 'pending'::character varying NOT NULL,
    started_at timestamp with time zone DEFAULT now(),
    completed_at timestamp with time zone,
    created_by uuid,
    notes text,
    CONSTRAINT database_restores_status_check CHECK (((status)::text = ANY ((ARRAY['pending'::character varying, 'in_progress'::character varying, 'completed'::character varying, 'failed'::character varying])::text[])))
);


ALTER TABLE public.database_restores OWNER TO etheria_user;

--
-- TOC entry 7464 (class 0 OID 0)
-- Dependencies: 275
-- Name: TABLE database_restores; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.database_restores IS 'Restauraciones de la base de datos';


--
-- TOC entry 333 (class 1259 OID 19645)
-- Name: economy_statistics; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.economy_statistics (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    stat_date date NOT NULL,
    total_transactions integer DEFAULT 0,
    total_volume numeric(15,2) DEFAULT 0,
    avg_transaction_value numeric(15,2) DEFAULT 0,
    most_traded_item character varying(100),
    most_active_trader uuid,
    market_volatility numeric(5,2) DEFAULT 0,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.economy_statistics OWNER TO etheria_user;

--
-- TOC entry 7465 (class 0 OID 0)
-- Dependencies: 333
-- Name: TABLE economy_statistics; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.economy_statistics IS 'EstadÃ­sticas econÃ³micas del servidor';


--
-- TOC entry 317 (class 1259 OID 19313)
-- Name: economy_system_config; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.economy_system_config (
    id integer NOT NULL,
    is_enabled boolean DEFAULT true,
    primary_currency_name character varying(50) DEFAULT 'Silver'::character varying,
    secondary_currency_name character varying(50) DEFAULT 'Gold'::character varying,
    primary_currency_symbol character varying(10) DEFAULT 'S'::character varying,
    secondary_currency_symbol character varying(10) DEFAULT 'G'::character varying,
    exchange_rate numeric(10,4) DEFAULT 100.0,
    exchange_fee numeric(5,4) DEFAULT 0.05,
    min_exchange_amount integer DEFAULT 100,
    max_exchange_amount integer DEFAULT 1000000,
    market_tax numeric(5,4) DEFAULT 0.02,
    transaction_fee numeric(5,4) DEFAULT 0.01,
    max_price_fluctuation numeric(5,4) DEFAULT 0.50,
    price_update_interval integer DEFAULT 15,
    max_items_per_player integer DEFAULT 100,
    max_active_listings integer DEFAULT 10,
    min_listing_duration integer DEFAULT 1,
    max_listing_duration integer DEFAULT 168,
    advanced_config jsonb DEFAULT '{"enable_alerts": true, "enable_trends": true, "enable_auctions": true}'::jsonb,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.economy_system_config OWNER TO etheria_user;

--
-- TOC entry 7466 (class 0 OID 0)
-- Dependencies: 317
-- Name: TABLE economy_system_config; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.economy_system_config IS 'ConfiguraciÃ³n global del sistema de economÃ­a';


--
-- TOC entry 316 (class 1259 OID 19312)
-- Name: economy_system_config_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.economy_system_config_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.economy_system_config_id_seq OWNER TO etheria_user;

--
-- TOC entry 7467 (class 0 OID 0)
-- Dependencies: 316
-- Name: economy_system_config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.economy_system_config_id_seq OWNED BY public.economy_system_config.id;


--
-- TOC entry 365 (class 1259 OID 20441)
-- Name: event_categories; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.event_categories (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    icon character varying(100),
    color character varying(7) DEFAULT '#FFFFFF'::character varying,
    display_order integer DEFAULT 0,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.event_categories OWNER TO etheria_user;

--
-- TOC entry 7468 (class 0 OID 0)
-- Dependencies: 365
-- Name: TABLE event_categories; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.event_categories IS 'CategorÃ­as de eventos disponibles';


--
-- TOC entry 371 (class 1259 OID 20565)
-- Name: event_leaderboard; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.event_leaderboard (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    event_id uuid NOT NULL,
    player_id uuid NOT NULL,
    score integer DEFAULT 0,
    rank_position integer,
    matches_played integer DEFAULT 0,
    matches_won integer DEFAULT 0,
    matches_lost integer DEFAULT 0,
    last_updated timestamp with time zone DEFAULT now()
);


ALTER TABLE public.event_leaderboard OWNER TO etheria_user;

--
-- TOC entry 7469 (class 0 OID 0)
-- Dependencies: 371
-- Name: TABLE event_leaderboard; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.event_leaderboard IS 'Leaderboard de eventos';


--
-- TOC entry 241 (class 1259 OID 17522)
-- Name: events; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.events (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    event_type character varying(50) NOT NULL,
    start_time timestamp with time zone NOT NULL,
    end_time timestamp with time zone NOT NULL,
    is_active boolean DEFAULT true,
    rewards jsonb,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.events OWNER TO etheria_user;

--
-- TOC entry 7470 (class 0 OID 0)
-- Dependencies: 241
-- Name: TABLE events; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.events IS 'Eventos del juego';


--
-- TOC entry 373 (class 1259 OID 20632)
-- Name: event_leaderboards; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.event_leaderboards AS
 SELECT e.name AS event_name,
    p.username,
    el.score,
    el.rank_position,
    el.matches_played,
    el.matches_won,
    el.matches_lost
   FROM ((public.event_leaderboard el
     JOIN public.events e ON ((el.event_id = e.id)))
     JOIN public.players p ON ((el.player_id = p.id)))
  ORDER BY e.name, el.rank_position;


ALTER VIEW public.event_leaderboards OWNER TO etheria_user;

--
-- TOC entry 367 (class 1259 OID 20478)
-- Name: event_matches; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.event_matches (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    event_id uuid NOT NULL,
    player1_id uuid NOT NULL,
    player2_id uuid NOT NULL,
    winner_id uuid,
    match_type character varying(50) DEFAULT 'battle'::character varying NOT NULL,
    status character varying(20) DEFAULT 'scheduled'::character varying NOT NULL,
    score1 integer DEFAULT 0,
    score2 integer DEFAULT 0,
    scheduled_at timestamp with time zone,
    started_at timestamp with time zone,
    completed_at timestamp with time zone,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT event_matches_match_type_check CHECK (((match_type)::text = ANY ((ARRAY['battle'::character varying, 'challenge'::character varying, 'race'::character varying])::text[]))),
    CONSTRAINT event_matches_status_check CHECK (((status)::text = ANY ((ARRAY['scheduled'::character varying, 'in_progress'::character varying, 'completed'::character varying, 'cancelled'::character varying])::text[])))
);


ALTER TABLE public.event_matches OWNER TO etheria_user;

--
-- TOC entry 7471 (class 0 OID 0)
-- Dependencies: 367
-- Name: TABLE event_matches; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.event_matches IS 'Partidas de eventos';


--
-- TOC entry 372 (class 1259 OID 20588)
-- Name: event_notifications; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.event_notifications (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    event_id uuid NOT NULL,
    notification_type character varying(50) DEFAULT 'info'::character varying NOT NULL,
    message text NOT NULL,
    is_read boolean DEFAULT false,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT event_notifications_notification_type_check CHECK (((notification_type)::text = ANY ((ARRAY['info'::character varying, 'reminder'::character varying, 'result'::character varying, 'reward'::character varying])::text[])))
);


ALTER TABLE public.event_notifications OWNER TO etheria_user;

--
-- TOC entry 7472 (class 0 OID 0)
-- Dependencies: 372
-- Name: TABLE event_notifications; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.event_notifications IS 'Notificaciones de eventos';


--
-- TOC entry 366 (class 1259 OID 20455)
-- Name: event_participants; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.event_participants (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    event_id uuid NOT NULL,
    player_id uuid NOT NULL,
    status character varying(20) DEFAULT 'registered'::character varying NOT NULL,
    score integer DEFAULT 0,
    rank_position integer,
    joined_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now(),
    CONSTRAINT event_participants_status_check CHECK (((status)::text = ANY ((ARRAY['registered'::character varying, 'active'::character varying, 'eliminated'::character varying, 'winner'::character varying, 'disqualified'::character varying])::text[])))
);


ALTER TABLE public.event_participants OWNER TO etheria_user;

--
-- TOC entry 7473 (class 0 OID 0)
-- Dependencies: 366
-- Name: TABLE event_participants; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.event_participants IS 'Participantes de eventos';


--
-- TOC entry 242 (class 1259 OID 17532)
-- Name: event_participation; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.event_participation (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    event_id uuid NOT NULL,
    player_id uuid NOT NULL,
    score integer DEFAULT 0,
    rank integer,
    rewards_claimed boolean DEFAULT false,
    joined_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.event_participation OWNER TO etheria_user;

--
-- TOC entry 7474 (class 0 OID 0)
-- Dependencies: 242
-- Name: TABLE event_participation; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.event_participation IS 'ParticipaciÃ³n en eventos';


--
-- TOC entry 368 (class 1259 OID 20511)
-- Name: event_rewards; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.event_rewards (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    event_id uuid NOT NULL,
    rank_min integer NOT NULL,
    rank_max integer NOT NULL,
    reward_type character varying(50) NOT NULL,
    reward_data jsonb NOT NULL,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT event_rewards_reward_type_check CHECK (((reward_type)::text = ANY ((ARRAY['resources'::character varying, 'experience'::character varying, 'items'::character varying, 'currency'::character varying, 'titles'::character varying, 'units'::character varying])::text[])))
);


ALTER TABLE public.event_rewards OWNER TO etheria_user;

--
-- TOC entry 7475 (class 0 OID 0)
-- Dependencies: 368
-- Name: TABLE event_rewards; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.event_rewards IS 'Recompensas de eventos';


--
-- TOC entry 369 (class 1259 OID 20527)
-- Name: event_rewards_claimed; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.event_rewards_claimed (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    reward_id uuid NOT NULL,
    player_id uuid NOT NULL,
    claimed_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.event_rewards_claimed OWNER TO etheria_user;

--
-- TOC entry 7476 (class 0 OID 0)
-- Dependencies: 369
-- Name: TABLE event_rewards_claimed; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.event_rewards_claimed IS 'Recompensas reclamadas';


--
-- TOC entry 370 (class 1259 OID 20546)
-- Name: event_statistics; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.event_statistics (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    event_id uuid NOT NULL,
    total_participants integer DEFAULT 0,
    total_matches integer DEFAULT 0,
    average_score numeric(10,2) DEFAULT 0,
    highest_score integer DEFAULT 0,
    lowest_score integer DEFAULT 0,
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.event_statistics OWNER TO etheria_user;

--
-- TOC entry 7477 (class 0 OID 0)
-- Dependencies: 370
-- Name: TABLE event_statistics; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.event_statistics IS 'EstadÃ­sticas de eventos';


--
-- TOC entry 276 (class 1259 OID 18150)
-- Name: generated_reports; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.generated_reports (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    report_name character varying(100) NOT NULL,
    report_type character varying(50) NOT NULL,
    file_path character varying(500),
    file_size bigint,
    parameters jsonb,
    status character varying(20) DEFAULT 'pending'::character varying NOT NULL,
    requested_by uuid,
    requested_at timestamp with time zone DEFAULT now(),
    completed_at timestamp with time zone,
    expires_at timestamp with time zone,
    CONSTRAINT generated_reports_status_check CHECK (((status)::text = ANY ((ARRAY['pending'::character varying, 'generating'::character varying, 'completed'::character varying, 'failed'::character varying])::text[])))
);


ALTER TABLE public.generated_reports OWNER TO etheria_user;

--
-- TOC entry 7478 (class 0 OID 0)
-- Dependencies: 276
-- Name: TABLE generated_reports; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.generated_reports IS 'Reportes generados';


--
-- TOC entry 247 (class 1259 OID 17679)
-- Name: hero_abilities; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.hero_abilities (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    hero_id uuid NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    ability_type character varying(50) NOT NULL,
    level integer DEFAULT 1,
    max_level integer DEFAULT 5,
    cooldown integer DEFAULT 0,
    effects jsonb,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.hero_abilities OWNER TO etheria_user;

--
-- TOC entry 7479 (class 0 OID 0)
-- Dependencies: 247
-- Name: TABLE hero_abilities; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.hero_abilities IS 'Habilidades de los hÃ©roes';


--
-- TOC entry 296 (class 1259 OID 18830)
-- Name: hero_artifacts; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.hero_artifacts (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    hero_id uuid NOT NULL,
    artifact_name character varying(100) NOT NULL,
    artifact_type character varying(50) NOT NULL,
    description text,
    effect jsonb NOT NULL,
    rarity character varying(20) DEFAULT 'common'::character varying NOT NULL,
    level integer DEFAULT 1,
    max_level integer DEFAULT 10,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.hero_artifacts OWNER TO etheria_user;

--
-- TOC entry 7480 (class 0 OID 0)
-- Dependencies: 296
-- Name: TABLE hero_artifacts; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.hero_artifacts IS 'Artefactos de los hÃ©roes';


--
-- TOC entry 299 (class 1259 OID 18884)
-- Name: hero_battles; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.hero_battles (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    hero_id uuid NOT NULL,
    opponent_type character varying(50) NOT NULL,
    opponent_id uuid,
    opponent_name character varying(100) NOT NULL,
    battle_type character varying(50) NOT NULL,
    result character varying(20) NOT NULL,
    hero_health_before integer NOT NULL,
    hero_health_after integer NOT NULL,
    opponent_health_before integer NOT NULL,
    opponent_health_after integer NOT NULL,
    experience_gained integer DEFAULT 0,
    rewards jsonb,
    battle_log jsonb,
    duration integer NOT NULL,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT hero_battles_battle_type_check CHECK (((battle_type)::text = ANY ((ARRAY['pve'::character varying, 'pvp'::character varying, 'boss'::character varying, 'arena'::character varying])::text[]))),
    CONSTRAINT hero_battles_result_check CHECK (((result)::text = ANY ((ARRAY['victory'::character varying, 'defeat'::character varying, 'draw'::character varying])::text[])))
);


ALTER TABLE public.hero_battles OWNER TO etheria_user;

--
-- TOC entry 7481 (class 0 OID 0)
-- Dependencies: 299
-- Name: TABLE hero_battles; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.hero_battles IS 'Historial de batallas de hÃ©roes';


--
-- TOC entry 246 (class 1259 OID 17655)
-- Name: heroes; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.heroes (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    name character varying(100) NOT NULL,
    hero_type character varying(50) NOT NULL,
    level integer DEFAULT 1,
    experience integer DEFAULT 0,
    attack integer DEFAULT 10,
    defense integer DEFAULT 10,
    speed integer DEFAULT 10,
    intelligence integer DEFAULT 10,
    charisma integer DEFAULT 10,
    health integer DEFAULT 100,
    max_health integer DEFAULT 100,
    is_active boolean DEFAULT true,
    is_injured boolean DEFAULT false,
    injury_recovery_time timestamp with time zone,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.heroes OWNER TO etheria_user;

--
-- TOC entry 7482 (class 0 OID 0)
-- Dependencies: 246
-- Name: TABLE heroes; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.heroes IS 'HÃ©roes de los jugadores';


--
-- TOC entry 260 (class 1259 OID 17938)
-- Name: hero_details; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.hero_details AS
 SELECT h.id,
    h.name,
    h.hero_type,
    h.level,
    h.experience,
    h.attack,
    h.defense,
    h.speed,
    h.intelligence,
    h.charisma,
    h.health,
    h.max_health,
    h.is_active,
    h.is_injured,
    p.username AS player_name
   FROM (public.heroes h
     JOIN public.players p ON ((h.player_id = p.id)));


ALTER VIEW public.hero_details OWNER TO etheria_user;

--
-- TOC entry 302 (class 1259 OID 18957)
-- Name: hero_equipment; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.hero_equipment (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    hero_id uuid NOT NULL,
    slot character varying(50) NOT NULL,
    item_name character varying(100) NOT NULL,
    item_type character varying(50) NOT NULL,
    rarity character varying(20) DEFAULT 'common'::character varying NOT NULL,
    stats jsonb NOT NULL,
    level integer DEFAULT 1,
    durability integer DEFAULT 100,
    max_durability integer DEFAULT 100,
    is_equipped boolean DEFAULT false,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT hero_equipment_slot_check CHECK (((slot)::text = ANY ((ARRAY['weapon'::character varying, 'armor'::character varying, 'helmet'::character varying, 'gloves'::character varying, 'boots'::character varying, 'accessory'::character varying])::text[])))
);


ALTER TABLE public.hero_equipment OWNER TO etheria_user;

--
-- TOC entry 292 (class 1259 OID 18736)
-- Name: hero_events; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.hero_events (
    id integer NOT NULL,
    name character varying(64) NOT NULL,
    description text,
    type character varying(32),
    category character varying(32),
    start_time timestamp without time zone NOT NULL,
    end_time timestamp without time zone NOT NULL,
    is_active boolean DEFAULT true NOT NULL,
    config jsonb DEFAULT '{}'::jsonb NOT NULL,
    rewards jsonb DEFAULT '{}'::jsonb NOT NULL,
    requirements jsonb DEFAULT '[]'::jsonb NOT NULL,
    max_participants integer DEFAULT 0 NOT NULL,
    current_participants integer DEFAULT 0 NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.hero_events OWNER TO etheria_user;

--
-- TOC entry 291 (class 1259 OID 18735)
-- Name: hero_events_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.hero_events_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.hero_events_id_seq OWNER TO etheria_user;

--
-- TOC entry 7483 (class 0 OID 0)
-- Dependencies: 291
-- Name: hero_events_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.hero_events_id_seq OWNED BY public.hero_events.id;


--
-- TOC entry 297 (class 1259 OID 18848)
-- Name: hero_quests; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.hero_quests (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    hero_id uuid NOT NULL,
    quest_name character varying(100) NOT NULL,
    quest_type character varying(50) NOT NULL,
    description text,
    requirements jsonb,
    rewards jsonb,
    difficulty integer DEFAULT 1,
    duration integer NOT NULL,
    status character varying(20) DEFAULT 'available'::character varying,
    start_time timestamp with time zone,
    end_time timestamp with time zone,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT hero_quests_difficulty_check CHECK (((difficulty >= 1) AND (difficulty <= 10))),
    CONSTRAINT hero_quests_quest_type_check CHECK (((quest_type)::text = ANY ((ARRAY['exploration'::character varying, 'combat'::character varying, 'gathering'::character varying, 'escort'::character varying, 'defense'::character varying])::text[]))),
    CONSTRAINT hero_quests_status_check CHECK (((status)::text = ANY ((ARRAY['available'::character varying, 'in_progress'::character varying, 'completed'::character varying, 'failed'::character varying])::text[])))
);


ALTER TABLE public.hero_quests OWNER TO etheria_user;

--
-- TOC entry 7484 (class 0 OID 0)
-- Dependencies: 297
-- Name: TABLE hero_quests; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.hero_quests IS 'Misiones especÃ­ficas de hÃ©roes';


--
-- TOC entry 295 (class 1259 OID 18810)
-- Name: hero_skills; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.hero_skills (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    hero_id uuid NOT NULL,
    skill_name character varying(100) NOT NULL,
    skill_type character varying(50) NOT NULL,
    description text,
    effect jsonb NOT NULL,
    level integer DEFAULT 1,
    max_level integer DEFAULT 5,
    cooldown integer DEFAULT 0,
    mana_cost integer DEFAULT 0,
    is_unlocked boolean DEFAULT false,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT hero_skills_skill_type_check CHECK (((skill_type)::text = ANY ((ARRAY['passive'::character varying, 'active'::character varying, 'ultimate'::character varying])::text[])))
);


ALTER TABLE public.hero_skills OWNER TO etheria_user;

--
-- TOC entry 7485 (class 0 OID 0)
-- Dependencies: 295
-- Name: TABLE hero_skills; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.hero_skills IS 'Habilidades de los hÃ©roes';


--
-- TOC entry 300 (class 1259 OID 18906)
-- Name: hero_statistics; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.hero_statistics (
    player_id uuid NOT NULL,
    total_heroes integer DEFAULT 0,
    total_levels integer DEFAULT 0,
    total_experience integer DEFAULT 0,
    battles_won integer DEFAULT 0,
    battles_lost integer DEFAULT 0,
    quests_completed integer DEFAULT 0,
    artifacts_collected integer DEFAULT 0,
    legendary_heroes integer DEFAULT 0,
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.hero_statistics OWNER TO etheria_user;

--
-- TOC entry 7486 (class 0 OID 0)
-- Dependencies: 300
-- Name: TABLE hero_statistics; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.hero_statistics IS 'EstadÃ­sticas de hÃ©roes por jugador';


--
-- TOC entry 290 (class 1259 OID 18573)
-- Name: hero_system_config; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.hero_system_config (
    id integer NOT NULL,
    is_enabled boolean DEFAULT true NOT NULL,
    max_heroes_per_player integer DEFAULT 10 NOT NULL,
    max_active_heroes integer DEFAULT 3 NOT NULL,
    experience_multiplier double precision DEFAULT 1.0 NOT NULL,
    injury_duration integer DEFAULT 3600 NOT NULL,
    recovery_cost jsonb DEFAULT '{"gold": 100}'::jsonb NOT NULL,
    advanced_config jsonb DEFAULT '{"enable_hero_events": true, "enable_auto_recovery": true}'::jsonb NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.hero_system_config OWNER TO etheria_user;

--
-- TOC entry 289 (class 1259 OID 18572)
-- Name: hero_system_config_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.hero_system_config_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.hero_system_config_id_seq OWNER TO etheria_user;

--
-- TOC entry 7487 (class 0 OID 0)
-- Dependencies: 289
-- Name: hero_system_config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.hero_system_config_id_seq OWNED BY public.hero_system_config.id;


--
-- TOC entry 293 (class 1259 OID 18751)
-- Name: hero_types; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.hero_types (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(100) NOT NULL,
    display_name character varying(100) NOT NULL,
    description text,
    class character varying(50) NOT NULL,
    base_attack integer DEFAULT 10 NOT NULL,
    base_defense integer DEFAULT 10 NOT NULL,
    base_health integer DEFAULT 100 NOT NULL,
    base_speed integer DEFAULT 10 NOT NULL,
    base_intelligence integer DEFAULT 10 NOT NULL,
    base_charisma integer DEFAULT 10 NOT NULL,
    special_ability character varying(100),
    ability_description text,
    icon character varying(100),
    color character varying(20),
    rarity character varying(20) DEFAULT 'common'::character varying NOT NULL,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT hero_types_class_check CHECK (((class)::text = ANY ((ARRAY['warrior'::character varying, 'archer'::character varying, 'mage'::character varying, 'support'::character varying, 'tank'::character varying])::text[]))),
    CONSTRAINT hero_types_rarity_check CHECK (((rarity)::text = ANY ((ARRAY['common'::character varying, 'uncommon'::character varying, 'rare'::character varying, 'epic'::character varying, 'legendary'::character varying])::text[])))
);


ALTER TABLE public.hero_types OWNER TO etheria_user;

--
-- TOC entry 7488 (class 0 OID 0)
-- Dependencies: 293
-- Name: TABLE hero_types; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.hero_types IS 'Tipos de hÃ©roes disponibles';


--
-- TOC entry 272 (class 1259 OID 18086)
-- Name: maintenance_tasks; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.maintenance_tasks (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    task_name character varying(100) NOT NULL,
    task_type character varying(50) NOT NULL,
    description text,
    schedule_cron character varying(100),
    last_run timestamp with time zone,
    next_run timestamp with time zone,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.maintenance_tasks OWNER TO etheria_user;

--
-- TOC entry 7489 (class 0 OID 0)
-- Dependencies: 272
-- Name: TABLE maintenance_tasks; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.maintenance_tasks IS 'Tareas de mantenimiento programadas';


--
-- TOC entry 332 (class 1259 OID 19631)
-- Name: market_alerts; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.market_alerts (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    alert_type character varying(50) NOT NULL,
    item_type character varying(50) NOT NULL,
    item_name character varying(100) NOT NULL,
    target_price numeric(15,2),
    is_active boolean DEFAULT true,
    triggered_at timestamp with time zone,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT market_alerts_alert_type_check CHECK (((alert_type)::text = ANY ((ARRAY['price_drop'::character varying, 'price_rise'::character varying, 'low_stock'::character varying, 'high_demand'::character varying])::text[])))
);


ALTER TABLE public.market_alerts OWNER TO etheria_user;

--
-- TOC entry 7490 (class 0 OID 0)
-- Dependencies: 332
-- Name: TABLE market_alerts; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.market_alerts IS 'Alertas del mercado para jugadores';


--
-- TOC entry 319 (class 1259 OID 19342)
-- Name: market_items; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.market_items (
    id integer NOT NULL,
    item_type character varying(50) NOT NULL,
    item_id integer NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    category character varying(50) NOT NULL,
    rarity character varying(20) DEFAULT 'common'::character varying,
    current_price integer DEFAULT 0,
    current_price_gold integer DEFAULT 0,
    price_history jsonb DEFAULT '[]'::jsonb,
    total_listed integer DEFAULT 0,
    total_sold integer DEFAULT 0,
    average_price integer DEFAULT 0,
    price_change_24h numeric(8,4) DEFAULT 0.0,
    price_change_7d numeric(8,4) DEFAULT 0.0,
    is_tradeable boolean DEFAULT true,
    min_price integer DEFAULT 0,
    max_price integer DEFAULT 999999999,
    price_multiplier numeric(5,4) DEFAULT 1.0,
    icon character varying(100),
    color character varying(20),
    is_active boolean DEFAULT true,
    last_updated timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.market_items OWNER TO etheria_user;

--
-- TOC entry 7491 (class 0 OID 0)
-- Dependencies: 319
-- Name: TABLE market_items; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.market_items IS 'CatÃ¡logo de items disponibles en el mercado';


--
-- TOC entry 318 (class 1259 OID 19341)
-- Name: market_items_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.market_items_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.market_items_id_seq OWNER TO etheria_user;

--
-- TOC entry 7492 (class 0 OID 0)
-- Dependencies: 318
-- Name: market_items_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.market_items_id_seq OWNED BY public.market_items.id;


--
-- TOC entry 321 (class 1259 OID 19434)
-- Name: market_statistics; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.market_statistics (
    id integer NOT NULL,
    date date NOT NULL,
    total_transactions integer DEFAULT 0,
    total_volume integer DEFAULT 0,
    total_volume_gold integer DEFAULT 0,
    top_items jsonb DEFAULT '[]'::jsonb,
    top_categories jsonb DEFAULT '[]'::jsonb,
    average_prices jsonb DEFAULT '{}'::jsonb,
    price_changes jsonb DEFAULT '{}'::jsonb,
    active_sellers integer DEFAULT 0,
    active_buyers integer DEFAULT 0,
    new_users integer DEFAULT 0,
    total_taxes integer DEFAULT 0,
    total_fees integer DEFAULT 0,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.market_statistics OWNER TO etheria_user;

--
-- TOC entry 7493 (class 0 OID 0)
-- Dependencies: 321
-- Name: TABLE market_statistics; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.market_statistics IS 'EstadÃ­sticas diarias del mercado';


--
-- TOC entry 320 (class 1259 OID 19433)
-- Name: market_statistics_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.market_statistics_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.market_statistics_id_seq OWNER TO etheria_user;

--
-- TOC entry 7494 (class 0 OID 0)
-- Dependencies: 320
-- Name: market_statistics_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.market_statistics_id_seq OWNED BY public.market_statistics.id;


--
-- TOC entry 328 (class 1259 OID 19546)
-- Name: market_transactions; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.market_transactions (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    listing_id uuid NOT NULL,
    buyer_id uuid NOT NULL,
    seller_id uuid NOT NULL,
    item_type character varying(50) NOT NULL,
    item_id uuid,
    item_name character varying(100) NOT NULL,
    quantity integer NOT NULL,
    price_per_unit numeric(15,2) NOT NULL,
    total_price numeric(15,2) NOT NULL,
    currency_id uuid NOT NULL,
    transaction_fee numeric(15,2) DEFAULT 0,
    status character varying(20) DEFAULT 'pending'::character varying NOT NULL,
    completed_at timestamp with time zone,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT market_transactions_status_check CHECK (((status)::text = ANY ((ARRAY['pending'::character varying, 'completed'::character varying, 'failed'::character varying, 'cancelled'::character varying])::text[])))
);


ALTER TABLE public.market_transactions OWNER TO etheria_user;

--
-- TOC entry 7495 (class 0 OID 0)
-- Dependencies: 328
-- Name: TABLE market_transactions; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.market_transactions IS 'Transacciones del mercado';


--
-- TOC entry 323 (class 1259 OID 19458)
-- Name: market_trends; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.market_trends (
    id integer NOT NULL,
    item_type character varying(50) NOT NULL,
    item_id integer NOT NULL,
    trend_type character varying(20) NOT NULL,
    period character varying(10) NOT NULL,
    start_price integer NOT NULL,
    end_price integer NOT NULL,
    price_change numeric(8,4) NOT NULL,
    volume_change numeric(8,4) NOT NULL,
    predicted_price integer,
    confidence numeric(3,2) DEFAULT 0.0,
    data_points jsonb DEFAULT '[]'::jsonb,
    factors jsonb DEFAULT '[]'::jsonb,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.market_trends OWNER TO etheria_user;

--
-- TOC entry 7496 (class 0 OID 0)
-- Dependencies: 323
-- Name: TABLE market_trends; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.market_trends IS 'AnÃ¡lisis de tendencias del mercado';


--
-- TOC entry 322 (class 1259 OID 19457)
-- Name: market_trends_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.market_trends_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.market_trends_id_seq OWNER TO etheria_user;

--
-- TOC entry 7497 (class 0 OID 0)
-- Dependencies: 322
-- Name: market_trends_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.market_trends_id_seq OWNED BY public.market_trends.id;


--
-- TOC entry 304 (class 1259 OID 18998)
-- Name: military_units; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.military_units (
    id integer NOT NULL,
    name character varying(64) NOT NULL,
    description text,
    type character varying(32),
    category character varying(32),
    tier integer DEFAULT 1 NOT NULL,
    health integer DEFAULT 100 NOT NULL,
    max_health integer DEFAULT 100 NOT NULL,
    attack_speed double precision DEFAULT 1.0 NOT NULL,
    range integer DEFAULT 1 NOT NULL,
    physical_attack integer DEFAULT 10 NOT NULL,
    physical_penetration integer DEFAULT 0 NOT NULL,
    magic_attack integer DEFAULT 0 NOT NULL,
    magic_penetration integer DEFAULT 0 NOT NULL,
    physical_defense integer DEFAULT 5 NOT NULL,
    physical_resistance integer DEFAULT 0 NOT NULL,
    magic_defense integer DEFAULT 0 NOT NULL,
    magic_resistance integer DEFAULT 0 NOT NULL,
    critical_chance double precision DEFAULT 0.05 NOT NULL,
    critical_damage double precision DEFAULT 1.5 NOT NULL,
    dodge_chance double precision DEFAULT 0.02 NOT NULL,
    block_chance double precision DEFAULT 0.03 NOT NULL,
    moral integer DEFAULT 50 NOT NULL,
    training_cost jsonb DEFAULT '{"gold": 100}'::jsonb NOT NULL,
    upgrade_cost jsonb DEFAULT '{"gold": 50}'::jsonb NOT NULL,
    requirements jsonb DEFAULT '[]'::jsonb NOT NULL,
    advantages jsonb DEFAULT '{}'::jsonb NOT NULL,
    disadvantages jsonb DEFAULT '{}'::jsonb NOT NULL,
    icon character varying(128),
    model character varying(128),
    animation character varying(128),
    is_active boolean DEFAULT true NOT NULL,
    is_elite boolean DEFAULT false NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.military_units OWNER TO etheria_user;

--
-- TOC entry 303 (class 1259 OID 18997)
-- Name: military_units_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.military_units_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.military_units_id_seq OWNER TO etheria_user;

--
-- TOC entry 7498 (class 0 OID 0)
-- Dependencies: 303
-- Name: military_units_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.military_units_id_seq OWNED BY public.military_units.id;


--
-- TOC entry 256 (class 1259 OID 17840)
-- Name: notifications; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.notifications (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    title character varying(200) NOT NULL,
    message text NOT NULL,
    notification_type character varying(50) NOT NULL,
    priority integer DEFAULT 1,
    is_read boolean DEFAULT false,
    data jsonb,
    expires_at timestamp with time zone,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.notifications OWNER TO etheria_user;

--
-- TOC entry 7499 (class 0 OID 0)
-- Dependencies: 256
-- Name: TABLE notifications; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.notifications IS 'Notificaciones de jugadores';


--
-- TOC entry 268 (class 1259 OID 18031)
-- Name: performance_logs; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.performance_logs (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    endpoint character varying(200) NOT NULL,
    method character varying(10) NOT NULL,
    response_time integer NOT NULL,
    status_code integer NOT NULL,
    player_id uuid,
    ip_address inet,
    user_agent text,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.performance_logs OWNER TO etheria_user;

--
-- TOC entry 7500 (class 0 OID 0)
-- Dependencies: 268
-- Name: TABLE performance_logs; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.performance_logs IS 'Logs de rendimiento';


--
-- TOC entry 239 (class 1259 OID 17488)
-- Name: player_achievements; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.player_achievements (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    achievement_id uuid NOT NULL,
    unlocked_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.player_achievements OWNER TO etheria_user;

--
-- TOC entry 7501 (class 0 OID 0)
-- Dependencies: 239
-- Name: TABLE player_achievements; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.player_achievements IS 'Achievements de jugadores y su progreso';


--
-- TOC entry 310 (class 1259 OID 19228)
-- Name: player_battle_stats; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.player_battle_stats AS
 SELECT p.id AS player_id,
    p.username,
    count(b.id) AS total_battles,
    count(
        CASE
            WHEN (b.winner_id = p.id) THEN 1
            ELSE NULL::integer
        END) AS battles_won,
    count(
        CASE
            WHEN ((b.winner_id <> p.id) AND (b.winner_id IS NOT NULL)) THEN 1
            ELSE NULL::integer
        END) AS battles_lost,
    round((((count(
        CASE
            WHEN (b.winner_id = p.id) THEN 1
            ELSE NULL::integer
        END))::numeric / (NULLIF(count(b.id), 0))::numeric) * (100)::numeric), 2) AS win_rate,
    avg(
        CASE
            WHEN (b.winner_id = p.id) THEN 1
            ELSE 0
        END) AS win_ratio
   FROM (public.players p
     LEFT JOIN public.battles b ON (((p.id = b.attacker_id) OR (p.id = b.defender_id))))
  GROUP BY p.id, p.username;


ALTER VIEW public.player_battle_stats OWNER TO etheria_user;

--
-- TOC entry 329 (class 1259 OID 19576)
-- Name: player_economy; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.player_economy (
    player_id uuid NOT NULL,
    total_wealth numeric(15,2) DEFAULT 0,
    total_spent numeric(15,2) DEFAULT 0,
    total_earned numeric(15,2) DEFAULT 0,
    market_transactions integer DEFAULT 0,
    successful_trades integer DEFAULT 0,
    failed_trades integer DEFAULT 0,
    last_transaction_at timestamp with time zone,
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.player_economy OWNER TO etheria_user;

--
-- TOC entry 7502 (class 0 OID 0)
-- Dependencies: 329
-- Name: TABLE player_economy; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.player_economy IS 'EstadÃ­sticas econÃ³micas de jugadores';


--
-- TOC entry 335 (class 1259 OID 19686)
-- Name: player_economy_stats; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.player_economy_stats AS
 SELECT p.id AS player_id,
    p.username,
    pe.total_wealth,
    pe.total_spent,
    pe.total_earned,
    pe.market_transactions,
    pe.successful_trades,
    round((((pe.successful_trades)::numeric / (NULLIF(pe.market_transactions, 0))::numeric) * (100)::numeric), 2) AS success_rate,
    pe.last_transaction_at
   FROM (public.players p
     LEFT JOIN public.player_economy pe ON ((p.id = pe.player_id)));


ALTER VIEW public.player_economy_stats OWNER TO etheria_user;

--
-- TOC entry 394 (class 1259 OID 21024)
-- Name: player_global_currency; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.player_global_currency (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    amount bigint DEFAULT 0 NOT NULL,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.player_global_currency OWNER TO postgres;

--
-- TOC entry 7503 (class 0 OID 0)
-- Dependencies: 394
-- Name: TABLE player_global_currency; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.player_global_currency IS 'Moneda global de cada jugador (persiste entre mundos)';


--
-- TOC entry 7504 (class 0 OID 0)
-- Dependencies: 394
-- Name: COLUMN player_global_currency.amount; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.player_global_currency.amount IS 'Cantidad de moneda global del jugador';


--
-- TOC entry 298 (class 1259 OID 18867)
-- Name: player_hero_quests; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.player_hero_quests (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    quest_name character varying(100) NOT NULL,
    quest_type character varying(50) NOT NULL,
    description text,
    requirements jsonb,
    rewards jsonb,
    progress jsonb DEFAULT '{}'::jsonb,
    status character varying(20) DEFAULT 'available'::character varying,
    created_at timestamp with time zone DEFAULT now(),
    completed_at timestamp with time zone,
    CONSTRAINT player_hero_quests_status_check CHECK (((status)::text = ANY ((ARRAY['available'::character varying, 'in_progress'::character varying, 'completed'::character varying, 'failed'::character varying])::text[])))
);


ALTER TABLE public.player_hero_quests OWNER TO etheria_user;

--
-- TOC entry 7505 (class 0 OID 0)
-- Dependencies: 298
-- Name: TABLE player_hero_quests; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.player_hero_quests IS 'Misiones de hÃ©roes por jugador';


--
-- TOC entry 301 (class 1259 OID 18951)
-- Name: player_hero_stats; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.player_hero_stats AS
 SELECT p.id AS player_id,
    p.username,
    hs.total_heroes,
    hs.total_levels,
    hs.total_experience,
    hs.battles_won,
    hs.battles_lost,
    hs.quests_completed,
    hs.artifacts_collected,
    hs.legendary_heroes,
    round((((hs.battles_won)::numeric / (NULLIF((hs.battles_won + hs.battles_lost), 0))::numeric) * (100)::numeric), 2) AS win_rate
   FROM (public.players p
     LEFT JOIN public.hero_statistics hs ON ((p.id = hs.player_id)));


ALTER VIEW public.player_hero_stats OWNER TO etheria_user;

--
-- TOC entry 294 (class 1259 OID 18772)
-- Name: player_heroes; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.player_heroes (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    hero_type_id uuid NOT NULL,
    name character varying(100) NOT NULL,
    level integer DEFAULT 1,
    experience integer DEFAULT 0,
    experience_to_next integer DEFAULT 100,
    attack integer DEFAULT 10 NOT NULL,
    defense integer DEFAULT 10 NOT NULL,
    health integer DEFAULT 100 NOT NULL,
    max_health integer DEFAULT 100 NOT NULL,
    speed integer DEFAULT 10 NOT NULL,
    intelligence integer DEFAULT 10 NOT NULL,
    charisma integer DEFAULT 10 NOT NULL,
    current_health integer DEFAULT 100 NOT NULL,
    is_active boolean DEFAULT true,
    is_in_battle boolean DEFAULT false,
    current_village_id uuid,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.player_heroes OWNER TO etheria_user;

--
-- TOC entry 7506 (class 0 OID 0)
-- Dependencies: 294
-- Name: TABLE player_heroes; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.player_heroes IS 'HÃ©roes de cada jugador';


--
-- TOC entry 386 (class 1259 OID 20832)
-- Name: player_prestige; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.player_prestige (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    prestige_level integer DEFAULT 0,
    prestige_points integer DEFAULT 0,
    total_prestige_earned integer DEFAULT 0,
    last_prestige_gain timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.player_prestige OWNER TO etheria_user;

--
-- TOC entry 7507 (class 0 OID 0)
-- Dependencies: 386
-- Name: TABLE player_prestige; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.player_prestige IS 'Sistema de prestigio de jugadores';


--
-- TOC entry 240 (class 1259 OID 17507)
-- Name: player_statistics; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.player_statistics (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    stat_name character varying(50) NOT NULL,
    stat_value bigint DEFAULT 0,
    last_updated timestamp with time zone DEFAULT now()
);


ALTER TABLE public.player_statistics OWNER TO etheria_user;

--
-- TOC entry 7508 (class 0 OID 0)
-- Dependencies: 240
-- Name: TABLE player_statistics; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.player_statistics IS 'EstadÃ­sticas detalladas de jugadores';


--
-- TOC entry 245 (class 1259 OID 17633)
-- Name: player_technologies; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.player_technologies (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    technology_id uuid NOT NULL,
    level integer DEFAULT 0,
    is_researching boolean DEFAULT false,
    research_completion_time timestamp with time zone,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.player_technologies OWNER TO etheria_user;

--
-- TOC entry 7509 (class 0 OID 0)
-- Dependencies: 245
-- Name: TABLE player_technologies; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.player_technologies IS 'TecnologÃ­as investigadas por cada jugador';


--
-- TOC entry 244 (class 1259 OID 17615)
-- Name: technologies; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.technologies (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(100) NOT NULL,
    display_name character varying(100) NOT NULL,
    description text,
    category character varying(50) NOT NULL,
    max_level integer DEFAULT 10,
    base_research_time integer DEFAULT 3600,
    base_cost_wood integer DEFAULT 0,
    base_cost_stone integer DEFAULT 0,
    base_cost_food integer DEFAULT 0,
    base_cost_gold integer DEFAULT 0,
    cost_multiplier numeric(5,2) DEFAULT 1.5,
    prerequisites jsonb,
    effects jsonb,
    created_at timestamp with time zone DEFAULT now(),
    sub_category character varying(50),
    is_active boolean DEFAULT true,
    level integer DEFAULT 1,
    research_time integer DEFAULT 3600,
    research_cost jsonb,
    requirements jsonb,
    icon character varying(100),
    color character varying(20),
    is_special boolean DEFAULT false,
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.technologies OWNER TO etheria_user;

--
-- TOC entry 7510 (class 0 OID 0)
-- Dependencies: 244
-- Name: TABLE technologies; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.technologies IS 'TecnologÃ­as disponibles para investigaciÃ³n';


--
-- TOC entry 259 (class 1259 OID 17933)
-- Name: player_technology_details; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.player_technology_details AS
 SELECT pt.id,
    pt.level,
    pt.is_researching,
    pt.research_completion_time,
    t.name AS technology_name,
    t.display_name,
    t.description,
    t.category,
    t.max_level,
    p.username AS player_name
   FROM ((public.player_technologies pt
     JOIN public.technologies t ON ((pt.technology_id = t.id)))
     JOIN public.players p ON ((pt.player_id = p.id)));


ALTER VIEW public.player_technology_details OWNER TO etheria_user;

--
-- TOC entry 395 (class 1259 OID 21040)
-- Name: player_world_currency; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.player_world_currency (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    world_id uuid NOT NULL,
    amount bigint DEFAULT 0 NOT NULL,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.player_world_currency OWNER TO postgres;

--
-- TOC entry 7511 (class 0 OID 0)
-- Dependencies: 395
-- Name: TABLE player_world_currency; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.player_world_currency IS 'Moneda de mundo de cada jugador (específica por mundo)';


--
-- TOC entry 7512 (class 0 OID 0)
-- Dependencies: 395
-- Name: COLUMN player_world_currency.amount; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.player_world_currency.amount IS 'Cantidad de moneda de mundo del jugador en este mundo específico';


--
-- TOC entry 392 (class 1259 OID 20979)
-- Name: player_world_entries; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.player_world_entries (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    world_id uuid NOT NULL,
    entered_at timestamp with time zone DEFAULT now(),
    is_active boolean DEFAULT true,
    last_seen timestamp with time zone DEFAULT now(),
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.player_world_entries OWNER TO postgres;

--
-- TOC entry 7513 (class 0 OID 0)
-- Dependencies: 392
-- Name: TABLE player_world_entries; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.player_world_entries IS 'Registro de entradas de jugadores a mundos específicos';


--
-- TOC entry 7514 (class 0 OID 0)
-- Dependencies: 392
-- Name: COLUMN player_world_entries.player_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.player_world_entries.player_id IS 'ID del jugador';


--
-- TOC entry 7515 (class 0 OID 0)
-- Dependencies: 392
-- Name: COLUMN player_world_entries.world_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.player_world_entries.world_id IS 'ID del mundo';


--
-- TOC entry 7516 (class 0 OID 0)
-- Dependencies: 392
-- Name: COLUMN player_world_entries.entered_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.player_world_entries.entered_at IS 'Fecha y hora de entrada al mundo';


--
-- TOC entry 7517 (class 0 OID 0)
-- Dependencies: 392
-- Name: COLUMN player_world_entries.is_active; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.player_world_entries.is_active IS 'Indica si el jugador está activo en este mundo';


--
-- TOC entry 7518 (class 0 OID 0)
-- Dependencies: 392
-- Name: COLUMN player_world_entries.last_seen; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.player_world_entries.last_seen IS 'Última vez que se vio al jugador en este mundo';


--
-- TOC entry 385 (class 1259 OID 20780)
-- Name: prestige_achievements; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.prestige_achievements (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    requirements jsonb NOT NULL,
    prestige_reward integer DEFAULT 0,
    title_reward_id integer,
    is_hidden boolean DEFAULT false,
    category character varying(50),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.prestige_achievements OWNER TO etheria_user;

--
-- TOC entry 7520 (class 0 OID 0)
-- Dependencies: 385
-- Name: TABLE prestige_achievements; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.prestige_achievements IS 'Logros que otorgan prestigio';


--
-- TOC entry 384 (class 1259 OID 20779)
-- Name: prestige_achievements_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.prestige_achievements_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.prestige_achievements_id_seq OWNER TO etheria_user;

--
-- TOC entry 7521 (class 0 OID 0)
-- Dependencies: 384
-- Name: prestige_achievements_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.prestige_achievements_id_seq OWNED BY public.prestige_achievements.id;


--
-- TOC entry 383 (class 1259 OID 20736)
-- Name: prestige_events; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.prestige_events (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    start_time timestamp without time zone NOT NULL,
    end_time timestamp without time zone NOT NULL,
    prestige_multiplier numeric(5,2) DEFAULT 1.0,
    affected_sources jsonb,
    is_active boolean DEFAULT true,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.prestige_events OWNER TO etheria_user;

--
-- TOC entry 382 (class 1259 OID 20735)
-- Name: prestige_events_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.prestige_events_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.prestige_events_id_seq OWNER TO etheria_user;

--
-- TOC entry 7522 (class 0 OID 0)
-- Dependencies: 382
-- Name: prestige_events_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.prestige_events_id_seq OWNED BY public.prestige_events.id;


--
-- TOC entry 379 (class 1259 OID 20688)
-- Name: prestige_levels; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.prestige_levels (
    id integer NOT NULL,
    level integer NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    prestige_required integer NOT NULL,
    rewards jsonb,
    title_reward_id integer,
    stat_bonuses jsonb,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.prestige_levels OWNER TO etheria_user;

--
-- TOC entry 378 (class 1259 OID 20687)
-- Name: prestige_levels_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.prestige_levels_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.prestige_levels_id_seq OWNER TO etheria_user;

--
-- TOC entry 7523 (class 0 OID 0)
-- Dependencies: 378
-- Name: prestige_levels_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.prestige_levels_id_seq OWNED BY public.prestige_levels.id;


--
-- TOC entry 389 (class 1259 OID 20900)
-- Name: prestige_notifications; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.prestige_notifications (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    notification_type character varying(50) DEFAULT 'prestige_gain'::character varying NOT NULL,
    message text NOT NULL,
    prestige_points integer DEFAULT 0,
    is_read boolean DEFAULT false,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT prestige_notifications_notification_type_check CHECK (((notification_type)::text = ANY ((ARRAY['prestige_gain'::character varying, 'title_earned'::character varying, 'level_up'::character varying, 'achievement'::character varying])::text[])))
);


ALTER TABLE public.prestige_notifications OWNER TO etheria_user;

--
-- TOC entry 7524 (class 0 OID 0)
-- Dependencies: 389
-- Name: TABLE prestige_notifications; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.prestige_notifications IS 'Notificaciones de prestigio';


--
-- TOC entry 387 (class 1259 OID 20864)
-- Name: prestige_rankings; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.prestige_rankings (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    prestige_level integer DEFAULT 0,
    prestige_points integer DEFAULT 0,
    rank_position integer,
    last_updated timestamp with time zone DEFAULT now()
);


ALTER TABLE public.prestige_rankings OWNER TO etheria_user;

--
-- TOC entry 7525 (class 0 OID 0)
-- Dependencies: 387
-- Name: TABLE prestige_rankings; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.prestige_rankings IS 'Rankings de prestigio';


--
-- TOC entry 381 (class 1259 OID 20723)
-- Name: prestige_sources; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.prestige_sources (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    base_prestige integer NOT NULL,
    multiplier_formula text,
    daily_limit integer,
    is_active boolean DEFAULT true,
    category character varying(50),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.prestige_sources OWNER TO etheria_user;

--
-- TOC entry 380 (class 1259 OID 20722)
-- Name: prestige_sources_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.prestige_sources_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.prestige_sources_id_seq OWNER TO etheria_user;

--
-- TOC entry 7526 (class 0 OID 0)
-- Dependencies: 380
-- Name: prestige_sources_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.prestige_sources_id_seq OWNED BY public.prestige_sources.id;


--
-- TOC entry 388 (class 1259 OID 20880)
-- Name: prestige_stats; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.prestige_stats (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    titles_earned integer DEFAULT 0,
    achievements_earned integer DEFAULT 0,
    total_prestige_gained integer DEFAULT 0,
    prestige_sources jsonb DEFAULT '{}'::jsonb,
    last_updated timestamp with time zone DEFAULT now()
);


ALTER TABLE public.prestige_stats OWNER TO etheria_user;

--
-- TOC entry 7527 (class 0 OID 0)
-- Dependencies: 388
-- Name: TABLE prestige_stats; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.prestige_stats IS 'EstadÃ­sticas de prestigio';


--
-- TOC entry 325 (class 1259 OID 19487)
-- Name: price_history; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.price_history (
    id integer NOT NULL,
    item_id integer NOT NULL,
    "timestamp" timestamp without time zone NOT NULL,
    price integer NOT NULL,
    volume integer DEFAULT 0,
    transactions integer DEFAULT 0,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.price_history OWNER TO etheria_user;

--
-- TOC entry 7528 (class 0 OID 0)
-- Dependencies: 325
-- Name: TABLE price_history; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.price_history IS 'Historial detallado de precios';


--
-- TOC entry 324 (class 1259 OID 19486)
-- Name: price_history_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.price_history_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.price_history_id_seq OWNER TO etheria_user;

--
-- TOC entry 7529 (class 0 OID 0)
-- Dependencies: 324
-- Name: price_history_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.price_history_id_seq OWNED BY public.price_history.id;


--
-- TOC entry 361 (class 1259 OID 20356)
-- Name: quest_categories; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.quest_categories (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    icon character varying(100),
    color character varying(7) DEFAULT '#FFFFFF'::character varying,
    display_order integer DEFAULT 0,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.quest_categories OWNER TO etheria_user;

--
-- TOC entry 7530 (class 0 OID 0)
-- Dependencies: 361
-- Name: TABLE quest_categories; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.quest_categories IS 'CategorÃ­as de quests disponibles';


--
-- TOC entry 364 (class 1259 OID 20404)
-- Name: quest_notifications; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.quest_notifications (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    quest_id uuid NOT NULL,
    notification_type character varying(50) DEFAULT 'completed'::character varying NOT NULL,
    message text NOT NULL,
    is_read boolean DEFAULT false,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT quest_notifications_notification_type_check CHECK (((notification_type)::text = ANY ((ARRAY['progress'::character varying, 'completed'::character varying, 'reward'::character varying])::text[])))
);


ALTER TABLE public.quest_notifications OWNER TO etheria_user;

--
-- TOC entry 7531 (class 0 OID 0)
-- Dependencies: 364
-- Name: TABLE quest_notifications; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.quest_notifications IS 'Notificaciones de quests';


--
-- TOC entry 362 (class 1259 OID 20370)
-- Name: quest_rewards; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.quest_rewards (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    quest_id uuid NOT NULL,
    reward_type character varying(50) NOT NULL,
    reward_data jsonb NOT NULL,
    quantity integer DEFAULT 1 NOT NULL,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT quest_rewards_reward_type_check CHECK (((reward_type)::text = ANY ((ARRAY['resources'::character varying, 'experience'::character varying, 'items'::character varying, 'currency'::character varying, 'titles'::character varying, 'units'::character varying])::text[])))
);


ALTER TABLE public.quest_rewards OWNER TO etheria_user;

--
-- TOC entry 7532 (class 0 OID 0)
-- Dependencies: 362
-- Name: TABLE quest_rewards; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.quest_rewards IS 'Recompensas de quests';


--
-- TOC entry 363 (class 1259 OID 20387)
-- Name: quest_statistics; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.quest_statistics (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    total_quests integer DEFAULT 0,
    completed_quests integer DEFAULT 0,
    total_points integer DEFAULT 0,
    average_completion_time interval,
    last_quest_at timestamp with time zone,
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.quest_statistics OWNER TO etheria_user;

--
-- TOC entry 7533 (class 0 OID 0)
-- Dependencies: 363
-- Name: TABLE quest_statistics; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.quest_statistics IS 'EstadÃ­sticas de quests por jugador';


--
-- TOC entry 224 (class 1259 OID 17154)
-- Name: races; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.races (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(50) NOT NULL,
    trait_attack integer DEFAULT 10 NOT NULL,
    trait_defense integer DEFAULT 10 NOT NULL,
    description text,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.races OWNER TO etheria_user;

--
-- TOC entry 7534 (class 0 OID 0)
-- Dependencies: 224
-- Name: TABLE races; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.races IS 'Razas disponibles para los jugadores';


--
-- TOC entry 337 (class 1259 OID 19692)
-- Name: ranking_categories; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.ranking_categories (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    type character varying(50) NOT NULL,
    sub_type character varying(50),
    icon character varying(100),
    color character varying(7),
    update_interval integer DEFAULT 60,
    max_positions integer DEFAULT 1000,
    min_score integer DEFAULT 0,
    score_formula text,
    rewards_enabled boolean DEFAULT false,
    rewards_config text,
    display_order integer DEFAULT 0,
    is_public boolean DEFAULT true,
    show_in_dashboard boolean DEFAULT true,
    is_active boolean DEFAULT true,
    last_updated timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.ranking_categories OWNER TO etheria_user;

--
-- TOC entry 7535 (class 0 OID 0)
-- Dependencies: 337
-- Name: TABLE ranking_categories; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.ranking_categories IS 'CategorÃ­as de ranking disponibles en el sistema';


--
-- TOC entry 7536 (class 0 OID 0)
-- Dependencies: 337
-- Name: COLUMN ranking_categories.score_formula; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.ranking_categories.score_formula IS 'FÃ³rmula JSON para calcular la puntuaciÃ³n';


--
-- TOC entry 7537 (class 0 OID 0)
-- Dependencies: 337
-- Name: COLUMN ranking_categories.rewards_config; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.ranking_categories.rewards_config IS 'ConfiguraciÃ³n JSON de recompensas';


--
-- TOC entry 336 (class 1259 OID 19691)
-- Name: ranking_categories_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.ranking_categories_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.ranking_categories_id_seq OWNER TO etheria_user;

--
-- TOC entry 7538 (class 0 OID 0)
-- Dependencies: 336
-- Name: ranking_categories_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.ranking_categories_id_seq OWNED BY public.ranking_categories.id;


--
-- TOC entry 343 (class 1259 OID 19911)
-- Name: ranking_entries; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.ranking_entries (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    ranking_type_id uuid NOT NULL,
    player_id uuid,
    alliance_id uuid,
    village_id uuid,
    world_id uuid,
    rank_position integer NOT NULL,
    total_points numeric(15,2) DEFAULT 0 NOT NULL,
    previous_rank integer,
    rank_change integer DEFAULT 0,
    last_updated timestamp with time zone DEFAULT now(),
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.ranking_entries OWNER TO etheria_user;

--
-- TOC entry 7539 (class 0 OID 0)
-- Dependencies: 343
-- Name: TABLE ranking_entries; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.ranking_entries IS 'Entradas de ranking de jugadores, alianzas, aldeas y mundos';


--
-- TOC entry 341 (class 1259 OID 19844)
-- Name: ranking_history; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.ranking_history (
    id integer NOT NULL,
    category_id integer NOT NULL,
    season_id integer,
    entity_type character varying(50) NOT NULL,
    entity_id integer NOT NULL,
    "position" integer NOT NULL,
    score integer NOT NULL,
    recorded_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.ranking_history OWNER TO etheria_user;

--
-- TOC entry 7540 (class 0 OID 0)
-- Dependencies: 341
-- Name: TABLE ranking_history; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.ranking_history IS 'Historial de posiciones en rankings';


--
-- TOC entry 340 (class 1259 OID 19843)
-- Name: ranking_history_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.ranking_history_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.ranking_history_id_seq OWNER TO etheria_user;

--
-- TOC entry 7541 (class 0 OID 0)
-- Dependencies: 340
-- Name: ranking_history_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.ranking_history_id_seq OWNED BY public.ranking_history.id;


--
-- TOC entry 255 (class 1259 OID 17820)
-- Name: ranking_positions; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.ranking_positions (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    ranking_id uuid NOT NULL,
    player_id uuid NOT NULL,
    "position" integer NOT NULL,
    score bigint DEFAULT 0,
    previous_position integer,
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.ranking_positions OWNER TO etheria_user;

--
-- TOC entry 7542 (class 0 OID 0)
-- Dependencies: 255
-- Name: TABLE ranking_positions; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.ranking_positions IS 'Posiciones en rankings';


--
-- TOC entry 347 (class 1259 OID 20007)
-- Name: ranking_rewards; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.ranking_rewards (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    ranking_type_id uuid NOT NULL,
    rank_min integer NOT NULL,
    rank_max integer NOT NULL,
    reward_type character varying(50) NOT NULL,
    reward_data jsonb NOT NULL,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT ranking_rewards_reward_type_check CHECK (((reward_type)::text = ANY ((ARRAY['resources'::character varying, 'experience'::character varying, 'items'::character varying, 'currency'::character varying, 'titles'::character varying])::text[])))
);


ALTER TABLE public.ranking_rewards OWNER TO etheria_user;

--
-- TOC entry 7543 (class 0 OID 0)
-- Dependencies: 347
-- Name: TABLE ranking_rewards; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.ranking_rewards IS 'Recompensas por posiciÃ³n en rankings';


--
-- TOC entry 348 (class 1259 OID 20023)
-- Name: ranking_rewards_claimed; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.ranking_rewards_claimed (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    reward_id uuid NOT NULL,
    player_id uuid NOT NULL,
    claimed_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.ranking_rewards_claimed OWNER TO etheria_user;

--
-- TOC entry 7544 (class 0 OID 0)
-- Dependencies: 348
-- Name: TABLE ranking_rewards_claimed; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.ranking_rewards_claimed IS 'Recompensas reclamadas por jugadores';


--
-- TOC entry 339 (class 1259 OID 19713)
-- Name: ranking_seasons; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.ranking_seasons (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    season_number integer NOT NULL,
    start_date timestamp without time zone NOT NULL,
    end_date timestamp without time zone NOT NULL,
    is_active boolean DEFAULT false,
    categories text,
    rewards_enabled boolean DEFAULT false,
    rewards_config text,
    total_participants integer DEFAULT 0,
    total_alliances integer DEFAULT 0,
    total_villages integer DEFAULT 0,
    status character varying(20) DEFAULT 'upcoming'::character varying,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.ranking_seasons OWNER TO etheria_user;

--
-- TOC entry 7545 (class 0 OID 0)
-- Dependencies: 339
-- Name: TABLE ranking_seasons; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.ranking_seasons IS 'Temporadas de ranking con perÃ­odos especÃ­ficos';


--
-- TOC entry 338 (class 1259 OID 19712)
-- Name: ranking_seasons_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.ranking_seasons_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.ranking_seasons_id_seq OWNER TO etheria_user;

--
-- TOC entry 7546 (class 0 OID 0)
-- Dependencies: 338
-- Name: ranking_seasons_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.ranking_seasons_id_seq OWNED BY public.ranking_seasons.id;


--
-- TOC entry 342 (class 1259 OID 19894)
-- Name: ranking_types; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.ranking_types (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    category character varying(50) NOT NULL,
    calculation_method character varying(50) DEFAULT 'points'::character varying NOT NULL,
    update_frequency character varying(20) DEFAULT 'daily'::character varying NOT NULL,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT ranking_types_calculation_method_check CHECK (((calculation_method)::text = ANY ((ARRAY['points'::character varying, 'score'::character varying, 'level'::character varying, 'achievements'::character varying])::text[]))),
    CONSTRAINT ranking_types_category_check CHECK (((category)::text = ANY ((ARRAY['player'::character varying, 'alliance'::character varying, 'village'::character varying, 'world'::character varying])::text[]))),
    CONSTRAINT ranking_types_update_frequency_check CHECK (((update_frequency)::text = ANY ((ARRAY['hourly'::character varying, 'daily'::character varying, 'weekly'::character varying, 'monthly'::character varying])::text[])))
);


ALTER TABLE public.ranking_types OWNER TO etheria_user;

--
-- TOC entry 7547 (class 0 OID 0)
-- Dependencies: 342
-- Name: TABLE ranking_types; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.ranking_types IS 'Tipos de ranking disponibles';


--
-- TOC entry 254 (class 1259 OID 17805)
-- Name: rankings; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.rankings (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    ranking_type character varying(50) NOT NULL,
    world_id uuid,
    is_global boolean DEFAULT false,
    update_frequency integer DEFAULT 3600,
    last_updated timestamp with time zone DEFAULT now(),
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.rankings OWNER TO etheria_user;

--
-- TOC entry 7548 (class 0 OID 0)
-- Dependencies: 254
-- Name: TABLE rankings; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.rankings IS 'Rankings del juego';


--
-- TOC entry 269 (class 1259 OID 18045)
-- Name: server_metrics; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.server_metrics (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    metric_name character varying(100) NOT NULL,
    metric_value numeric(15,2) NOT NULL,
    metric_unit character varying(20),
    tags jsonb,
    recorded_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.server_metrics OWNER TO etheria_user;

--
-- TOC entry 7549 (class 0 OID 0)
-- Dependencies: 269
-- Name: TABLE server_metrics; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.server_metrics IS 'MÃ©tricas del servidor';


--
-- TOC entry 280 (class 1259 OID 18221)
-- Name: recent_metrics; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.recent_metrics AS
 SELECT metric_name,
    metric_value,
    metric_unit,
    recorded_at,
    tags
   FROM public.server_metrics
  WHERE (recorded_at >= (now() - '24:00:00'::interval))
  ORDER BY recorded_at DESC;


ALTER VIEW public.recent_metrics OWNER TO etheria_user;

--
-- TOC entry 266 (class 1259 OID 18003)
-- Name: system_logs; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.system_logs (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    log_level character varying(20) NOT NULL,
    category character varying(50) NOT NULL,
    message text NOT NULL,
    data jsonb,
    player_id uuid,
    ip_address inet,
    user_agent text,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.system_logs OWNER TO etheria_user;

--
-- TOC entry 7550 (class 0 OID 0)
-- Dependencies: 266
-- Name: TABLE system_logs; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.system_logs IS 'Logs del sistema';


--
-- TOC entry 278 (class 1259 OID 18211)
-- Name: recent_system_logs; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.recent_system_logs AS
 SELECT sl.id,
    sl.log_level,
    sl.category,
    sl.message,
    sl.data,
    sl.created_at,
    p.username AS player_name
   FROM (public.system_logs sl
     LEFT JOIN public.players p ON ((sl.player_id = p.id)))
  ORDER BY sl.created_at DESC
 LIMIT 1000;


ALTER VIEW public.recent_system_logs OWNER TO etheria_user;

--
-- TOC entry 283 (class 1259 OID 18469)
-- Name: research_queue; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.research_queue (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    technology_id uuid NOT NULL,
    "position" integer NOT NULL,
    start_time timestamp with time zone NOT NULL,
    end_time timestamp with time zone NOT NULL,
    status character varying(20) DEFAULT 'queued'::character varying,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT research_queue_status_check CHECK (((status)::text = ANY ((ARRAY['queued'::character varying, 'researching'::character varying, 'completed'::character varying, 'cancelled'::character varying])::text[])))
);


ALTER TABLE public.research_queue OWNER TO etheria_user;

--
-- TOC entry 7551 (class 0 OID 0)
-- Dependencies: 283
-- Name: TABLE research_queue; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.research_queue IS 'Cola de investigaciÃ³n de jugadores';


--
-- TOC entry 287 (class 1259 OID 18535)
-- Name: research_statistics; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.research_statistics (
    player_id uuid NOT NULL,
    total_technologies integer DEFAULT 0,
    military_techs integer DEFAULT 0,
    economic_techs integer DEFAULT 0,
    social_techs integer DEFAULT 0,
    scientific_techs integer DEFAULT 0,
    total_levels integer DEFAULT 0,
    research_time integer DEFAULT 0,
    resources_spent jsonb,
    last_research_at timestamp with time zone,
    research_efficiency numeric(10,2) DEFAULT 0,
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.research_statistics OWNER TO etheria_user;

--
-- TOC entry 7552 (class 0 OID 0)
-- Dependencies: 287
-- Name: TABLE research_statistics; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.research_statistics IS 'EstadÃ­sticas de investigaciÃ³n por jugador';


--
-- TOC entry 222 (class 1259 OID 17076)
-- Name: resources; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.resources (
    id uuid NOT NULL,
    village_id uuid NOT NULL,
    wood integer DEFAULT 1000 NOT NULL,
    stone integer DEFAULT 1000 NOT NULL,
    food integer DEFAULT 1000 NOT NULL,
    gold integer DEFAULT 1000 NOT NULL,
    last_updated timestamp without time zone NOT NULL
);


ALTER TABLE public.resources OWNER TO etheria_user;

--
-- TOC entry 7553 (class 0 OID 0)
-- Dependencies: 222
-- Name: TABLE resources; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.resources IS 'Recursos de las aldeas';


--
-- TOC entry 273 (class 1259 OID 18096)
-- Name: task_executions; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.task_executions (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    task_id uuid NOT NULL,
    started_at timestamp with time zone DEFAULT now(),
    completed_at timestamp with time zone,
    status character varying(20) DEFAULT 'running'::character varying NOT NULL,
    result_message text,
    execution_time integer,
    data jsonb,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT task_executions_status_check CHECK (((status)::text = ANY ((ARRAY['running'::character varying, 'completed'::character varying, 'failed'::character varying, 'cancelled'::character varying])::text[])))
);


ALTER TABLE public.task_executions OWNER TO etheria_user;

--
-- TOC entry 7554 (class 0 OID 0)
-- Dependencies: 273
-- Name: TABLE task_executions; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.task_executions IS 'Ejecuciones de tareas de mantenimiento';


--
-- TOC entry 281 (class 1259 OID 18225)
-- Name: scheduled_maintenance; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.scheduled_maintenance AS
 SELECT mt.id,
    mt.task_name,
    mt.task_type,
    mt.description,
    mt.schedule_cron,
    mt.last_run,
    mt.next_run,
    mt.is_active,
    te.status AS last_execution_status,
    te.execution_time AS last_execution_time
   FROM (public.maintenance_tasks mt
     LEFT JOIN LATERAL ( SELECT task_executions.status,
            task_executions.execution_time
           FROM public.task_executions
          WHERE (task_executions.task_id = mt.id)
          ORDER BY task_executions.started_at DESC
         LIMIT 1) te ON (true))
  WHERE (mt.is_active = true)
  ORDER BY mt.next_run;


ALTER VIEW public.scheduled_maintenance OWNER TO etheria_user;

--
-- TOC entry 267 (class 1259 OID 18017)
-- Name: security_logs; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.security_logs (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    event_type character varying(50) NOT NULL,
    player_id uuid,
    ip_address inet NOT NULL,
    user_agent text,
    success boolean NOT NULL,
    failure_reason text,
    data jsonb,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.security_logs OWNER TO etheria_user;

--
-- TOC entry 7555 (class 0 OID 0)
-- Dependencies: 267
-- Name: TABLE security_logs; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.security_logs IS 'Logs de seguridad';


--
-- TOC entry 221 (class 1259 OID 17059)
-- Name: villages; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.villages (
    id uuid NOT NULL,
    player_id uuid NOT NULL,
    world_id uuid NOT NULL,
    name character varying(100) NOT NULL,
    x_coordinate integer NOT NULL,
    y_coordinate integer NOT NULL,
    created_at timestamp without time zone NOT NULL
);


ALTER TABLE public.villages OWNER TO etheria_user;

--
-- TOC entry 7556 (class 0 OID 0)
-- Dependencies: 221
-- Name: TABLE villages; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.villages IS 'Aldeas de los jugadores';


--
-- TOC entry 282 (class 1259 OID 18367)
-- Name: server_statistics; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.server_statistics AS
 SELECT ( SELECT count(*) AS count
           FROM public.players
          WHERE (players.is_online = true)) AS active_players,
    ( SELECT count(*) AS count
           FROM public.players
          WHERE (players.is_online = true)) AS online_players,
    ( SELECT count(*) AS count
           FROM public.villages) AS total_villages,
    ( SELECT count(*) AS count
           FROM public.alliances
          WHERE (alliances.is_active = true)) AS active_alliances,
    ( SELECT count(*) AS count
           FROM public.battles
          WHERE ((battles.status)::text = 'in_progress'::text)) AS active_battles,
    ( SELECT count(*) AS count
           FROM public.chat_messages
          WHERE (chat_messages.created_at >= (now() - '01:00:00'::interval))) AS messages_last_hour,
    ( SELECT count(*) AS count
           FROM public.system_logs
          WHERE (system_logs.created_at >= (now() - '01:00:00'::interval))) AS logs_last_hour,
    ( SELECT count(*) AS count
           FROM public.system_alerts
          WHERE (system_alerts.is_active = true)) AS active_alerts;


ALTER VIEW public.server_statistics OWNER TO etheria_user;

--
-- TOC entry 250 (class 1259 OID 17733)
-- Name: special_buildings; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.special_buildings (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    village_id uuid NOT NULL,
    building_type character varying(50) NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    level integer DEFAULT 1,
    max_level integer DEFAULT 10,
    is_constructing boolean DEFAULT false,
    construction_completion_time timestamp with time zone,
    effects jsonb,
    requirements jsonb,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.special_buildings OWNER TO etheria_user;

--
-- TOC entry 7557 (class 0 OID 0)
-- Dependencies: 250
-- Name: TABLE special_buildings; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.special_buildings IS 'Construcciones especiales';


--
-- TOC entry 253 (class 1259 OID 17784)
-- Name: special_event_participation; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.special_event_participation (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    event_id uuid NOT NULL,
    player_id uuid NOT NULL,
    score integer DEFAULT 0,
    rank integer,
    rewards_claimed boolean DEFAULT false,
    joined_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.special_event_participation OWNER TO etheria_user;

--
-- TOC entry 7558 (class 0 OID 0)
-- Dependencies: 253
-- Name: TABLE special_event_participation; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.special_event_participation IS 'ParticipaciÃ³n en eventos especiales';


--
-- TOC entry 252 (class 1259 OID 17768)
-- Name: special_events; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.special_events (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    event_type character varying(50) NOT NULL,
    start_time timestamp with time zone NOT NULL,
    end_time timestamp with time zone NOT NULL,
    world_id uuid,
    is_global boolean DEFAULT false,
    requirements jsonb,
    rewards jsonb,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.special_events OWNER TO etheria_user;

--
-- TOC entry 7559 (class 0 OID 0)
-- Dependencies: 252
-- Name: TABLE special_events; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.special_events IS 'Eventos especiales';


--
-- TOC entry 251 (class 1259 OID 17751)
-- Name: special_resources; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.special_resources (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    village_id uuid NOT NULL,
    resource_type character varying(50) NOT NULL,
    quantity integer DEFAULT 0,
    max_quantity integer DEFAULT 1000,
    production_rate numeric(10,2) DEFAULT 0,
    last_updated timestamp with time zone DEFAULT now()
);


ALTER TABLE public.special_resources OWNER TO etheria_user;

--
-- TOC entry 7560 (class 0 OID 0)
-- Dependencies: 251
-- Name: TABLE special_resources; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.special_resources IS 'Recursos especiales';


--
-- TOC entry 349 (class 1259 OID 20042)
-- Name: statistics_snapshots; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.statistics_snapshots (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    snapshot_date date NOT NULL,
    ranking_type_id uuid NOT NULL,
    snapshot_data jsonb NOT NULL,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.statistics_snapshots OWNER TO etheria_user;

--
-- TOC entry 7561 (class 0 OID 0)
-- Dependencies: 349
-- Name: TABLE statistics_snapshots; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.statistics_snapshots IS 'Snapshots de estadÃ­sticas para anÃ¡lisis histÃ³rico';


--
-- TOC entry 271 (class 1259 OID 18069)
-- Name: system_config; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.system_config (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    config_key character varying(100) NOT NULL,
    config_value text NOT NULL,
    config_type character varying(50) NOT NULL,
    description text,
    is_public boolean DEFAULT false,
    updated_by uuid,
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.system_config OWNER TO etheria_user;

--
-- TOC entry 7562 (class 0 OID 0)
-- Dependencies: 271
-- Name: TABLE system_config; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.system_config IS 'ConfiguraciÃ³n del sistema';


--
-- TOC entry 331 (class 1259 OID 19618)
-- Name: taxes; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.taxes (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    tax_name character varying(100) NOT NULL,
    description text,
    tax_type character varying(50) NOT NULL,
    rate numeric(5,4) NOT NULL,
    min_amount numeric(15,2) DEFAULT 0,
    max_amount numeric(15,2),
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT taxes_rate_check CHECK (((rate >= (0)::numeric) AND (rate <= (1)::numeric))),
    CONSTRAINT taxes_tax_type_check CHECK (((tax_type)::text = ANY ((ARRAY['income'::character varying, 'sales'::character varying, 'property'::character varying, 'trade'::character varying])::text[])))
);


ALTER TABLE public.taxes OWNER TO etheria_user;

--
-- TOC entry 7563 (class 0 OID 0)
-- Dependencies: 331
-- Name: TABLE taxes; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.taxes IS 'Sistema de impuestos';


--
-- TOC entry 286 (class 1259 OID 18520)
-- Name: technology_costs; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.technology_costs (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    technology_id uuid NOT NULL,
    level integer NOT NULL,
    resource_type character varying(20) NOT NULL,
    amount integer NOT NULL,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT technology_costs_resource_type_check CHECK (((resource_type)::text = ANY ((ARRAY['wood'::character varying, 'stone'::character varying, 'food'::character varying, 'gold'::character varying])::text[])))
);


ALTER TABLE public.technology_costs OWNER TO etheria_user;

--
-- TOC entry 7564 (class 0 OID 0)
-- Dependencies: 286
-- Name: TABLE technology_costs; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.technology_costs IS 'Costos de investigaciÃ³n por nivel';


--
-- TOC entry 288 (class 1259 OID 18567)
-- Name: technology_details; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.technology_details AS
 SELECT t.id,
    t.name,
    t.display_name,
    t.description,
    t.category,
    t.sub_category,
    t.level,
    t.max_level,
    t.research_time,
    t.research_cost,
    t.requirements,
    t.effects,
    t.icon,
    t.color,
    t.is_active,
    t.is_special,
    count(pt.player_id) AS players_researching,
    avg(pt.level) AS average_level
   FROM (public.technologies t
     LEFT JOIN public.player_technologies pt ON ((t.id = pt.technology_id)))
  GROUP BY t.id, t.name, t.display_name, t.description, t.category, t.sub_category, t.level, t.max_level, t.research_time, t.research_cost, t.requirements, t.effects, t.icon, t.color, t.is_active, t.is_special;


ALTER VIEW public.technology_details OWNER TO etheria_user;

--
-- TOC entry 284 (class 1259 OID 18488)
-- Name: technology_effects; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.technology_effects (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    technology_id uuid NOT NULL,
    effect_type character varying(50) NOT NULL,
    target character varying(100) NOT NULL,
    value numeric(10,2) NOT NULL,
    is_percentage boolean DEFAULT false,
    level integer NOT NULL,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.technology_effects OWNER TO etheria_user;

--
-- TOC entry 7565 (class 0 OID 0)
-- Dependencies: 284
-- Name: TABLE technology_effects; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.technology_effects IS 'Efectos especÃ­ficos de cada tecnologÃ­a';


--
-- TOC entry 285 (class 1259 OID 18501)
-- Name: technology_requirements; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.technology_requirements (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    technology_id uuid NOT NULL,
    required_tech_id uuid,
    required_level integer DEFAULT 1,
    required_village integer DEFAULT 0,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.technology_requirements OWNER TO etheria_user;

--
-- TOC entry 7566 (class 0 OID 0)
-- Dependencies: 285
-- Name: TABLE technology_requirements; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.technology_requirements IS 'Requisitos para investigar tecnologÃ­as';


--
-- TOC entry 375 (class 1259 OID 20638)
-- Name: title_categories; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.title_categories (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    color character varying(7) DEFAULT '#FFFFFF'::character varying,
    icon character varying(50),
    sort_order integer DEFAULT 0,
    is_active boolean DEFAULT true,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.title_categories OWNER TO etheria_user;

--
-- TOC entry 374 (class 1259 OID 20637)
-- Name: title_categories_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.title_categories_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.title_categories_id_seq OWNER TO etheria_user;

--
-- TOC entry 7567 (class 0 OID 0)
-- Dependencies: 374
-- Name: title_categories_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.title_categories_id_seq OWNED BY public.title_categories.id;


--
-- TOC entry 377 (class 1259 OID 20654)
-- Name: titles; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.titles (
    id integer NOT NULL,
    category_id integer,
    name character varying(100) NOT NULL,
    description text,
    requirements jsonb,
    prestige_bonus integer DEFAULT 0,
    stat_bonuses jsonb,
    rarity character varying(20) DEFAULT 'COMMON'::character varying,
    is_hidden boolean DEFAULT false,
    is_event_only boolean DEFAULT false,
    event_id integer,
    max_holders integer,
    current_holders integer DEFAULT 0,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.titles OWNER TO etheria_user;

--
-- TOC entry 7568 (class 0 OID 0)
-- Dependencies: 377
-- Name: TABLE titles; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.titles IS 'TÃ­tulos disponibles en el juego';


--
-- TOC entry 376 (class 1259 OID 20653)
-- Name: titles_id_seq; Type: SEQUENCE; Schema: public; Owner: etheria_user
--

CREATE SEQUENCE public.titles_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.titles_id_seq OWNER TO etheria_user;

--
-- TOC entry 7569 (class 0 OID 0)
-- Dependencies: 376
-- Name: titles_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: etheria_user
--

ALTER SEQUENCE public.titles_id_seq OWNED BY public.titles.id;


--
-- TOC entry 350 (class 1259 OID 20078)
-- Name: top_alliances; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.top_alliances AS
 SELECT re.rank_position,
    a.name AS alliance_name,
    a.tag AS alliance_tag,
    als.total_points,
    als.member_count,
    als.total_battles_won,
    rt.name AS ranking_type
   FROM (((public.ranking_entries re
     JOIN public.alliances a ON ((re.alliance_id = a.id)))
     LEFT JOIN public.alliance_statistics als ON ((a.id = als.alliance_id)))
     JOIN public.ranking_types rt ON ((re.ranking_type_id = rt.id)))
  WHERE (re.alliance_id IS NOT NULL)
  ORDER BY re.ranking_type_id, re.rank_position;


ALTER VIEW public.top_alliances OWNER TO etheria_user;

--
-- TOC entry 236 (class 1259 OID 17432)
-- Name: trade_offers; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.trade_offers (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    village_id uuid NOT NULL,
    offer_type character varying(20) NOT NULL,
    resource_type character varying(20) NOT NULL,
    quantity integer NOT NULL,
    price_per_unit integer NOT NULL,
    total_price integer NOT NULL,
    is_active boolean DEFAULT true,
    expires_at timestamp with time zone DEFAULT (now() + '24:00:00'::interval),
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT trade_offers_offer_type_check CHECK (((offer_type)::text = ANY ((ARRAY['buy'::character varying, 'sell'::character varying])::text[]))),
    CONSTRAINT trade_offers_price_per_unit_check CHECK ((price_per_unit > 0)),
    CONSTRAINT trade_offers_quantity_check CHECK ((quantity > 0)),
    CONSTRAINT trade_offers_resource_type_check CHECK (((resource_type)::text = ANY ((ARRAY['wood'::character varying, 'stone'::character varying, 'food'::character varying, 'gold'::character varying])::text[])))
);


ALTER TABLE public.trade_offers OWNER TO etheria_user;

--
-- TOC entry 7570 (class 0 OID 0)
-- Dependencies: 236
-- Name: TABLE trade_offers; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.trade_offers IS 'Ofertas de comercio';


--
-- TOC entry 258 (class 1259 OID 17883)
-- Name: trade_reports; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.trade_reports (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    transaction_id uuid NOT NULL,
    player_id uuid NOT NULL,
    report_type character varying(20) DEFAULT 'buy'::character varying NOT NULL,
    trade_data jsonb NOT NULL,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT trade_reports_report_type_check CHECK (((report_type)::text = ANY ((ARRAY['buy'::character varying, 'sell'::character varying])::text[])))
);


ALTER TABLE public.trade_reports OWNER TO etheria_user;

--
-- TOC entry 7571 (class 0 OID 0)
-- Dependencies: 258
-- Name: TABLE trade_reports; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.trade_reports IS 'Reportes de comercio';


--
-- TOC entry 237 (class 1259 OID 17455)
-- Name: trade_transactions; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.trade_transactions (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    buyer_id uuid NOT NULL,
    seller_id uuid NOT NULL,
    offer_id uuid NOT NULL,
    resource_type character varying(20) NOT NULL,
    quantity integer NOT NULL,
    price_per_unit integer NOT NULL,
    total_amount integer NOT NULL,
    transaction_time timestamp with time zone DEFAULT now()
);


ALTER TABLE public.trade_transactions OWNER TO etheria_user;

--
-- TOC entry 7572 (class 0 OID 0)
-- Dependencies: 237
-- Name: TABLE trade_transactions; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.trade_transactions IS 'Transacciones de comercio';


--
-- TOC entry 228 (class 1259 OID 17231)
-- Name: training_queue; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.training_queue (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    village_id uuid NOT NULL,
    unit_type_id uuid NOT NULL,
    quantity integer NOT NULL,
    queued_at timestamp with time zone DEFAULT now(),
    completes_at timestamp with time zone NOT NULL,
    status character varying(20) DEFAULT 'queued'::character varying,
    CONSTRAINT training_queue_quantity_check CHECK ((quantity > 0)),
    CONSTRAINT training_queue_status_check CHECK (((status)::text = ANY ((ARRAY['queued'::character varying, 'training'::character varying, 'completed'::character varying, 'cancelled'::character varying])::text[])))
);


ALTER TABLE public.training_queue OWNER TO etheria_user;

--
-- TOC entry 7573 (class 0 OID 0)
-- Dependencies: 228
-- Name: TABLE training_queue; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.training_queue IS 'Cola de entrenamiento de unidades';


--
-- TOC entry 235 (class 1259 OID 17399)
-- Name: troop_movements; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.troop_movements (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    player_id uuid NOT NULL,
    from_village_id uuid NOT NULL,
    to_village_id uuid NOT NULL,
    units jsonb NOT NULL,
    movement_type character varying(20) DEFAULT 'attack'::character varying NOT NULL,
    start_time timestamp with time zone DEFAULT now(),
    arrival_time timestamp with time zone NOT NULL,
    status character varying(20) DEFAULT 'moving'::character varying NOT NULL,
    battle_id uuid,
    CONSTRAINT troop_movements_movement_type_check CHECK (((movement_type)::text = ANY ((ARRAY['attack'::character varying, 'support'::character varying, 'return'::character varying])::text[]))),
    CONSTRAINT troop_movements_status_check CHECK (((status)::text = ANY ((ARRAY['moving'::character varying, 'arrived'::character varying, 'returning'::character varying, 'cancelled'::character varying])::text[])))
);


ALTER TABLE public.troop_movements OWNER TO etheria_user;

--
-- TOC entry 7574 (class 0 OID 0)
-- Dependencies: 235
-- Name: TABLE troop_movements; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.troop_movements IS 'Movimientos de tropas';


--
-- TOC entry 227 (class 1259 OID 17209)
-- Name: units; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.units (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    village_id uuid NOT NULL,
    unit_type_id uuid NOT NULL,
    quantity integer DEFAULT 0,
    is_training boolean DEFAULT false,
    training_completion_time timestamp with time zone,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.units OWNER TO etheria_user;

--
-- TOC entry 7575 (class 0 OID 0)
-- Dependencies: 227
-- Name: TABLE units; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.units IS 'Unidades militares de las aldeas';


--
-- TOC entry 243 (class 1259 OID 17609)
-- Name: unit_details; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.unit_details AS
 SELECT u.id,
    u.quantity,
    u.is_training,
    u.training_completion_time,
    ut.name AS unit_name,
    ut.display_name,
    ut.attack,
    ut.defense,
    ut.speed,
    v.name AS village_name,
    p.username AS player_name
   FROM (((public.units u
     JOIN public.unit_types ut ON ((u.unit_type_id = ut.id)))
     JOIN public.villages v ON ((u.village_id = v.id)))
     JOIN public.players p ON ((v.player_id = p.id)));


ALTER VIEW public.unit_details OWNER TO etheria_user;

--
-- TOC entry 262 (class 1259 OID 17948)
-- Name: unread_notifications; Type: VIEW; Schema: public; Owner: etheria_user
--

CREATE VIEW public.unread_notifications AS
 SELECT n.id,
    n.title,
    n.message,
    n.notification_type,
    n.priority,
    n.created_at,
    p.username AS player_name
   FROM (public.notifications n
     JOIN public.players p ON ((n.player_id = p.id)))
  WHERE (n.is_read = false)
  ORDER BY n.priority DESC, n.created_at DESC;


ALTER VIEW public.unread_notifications OWNER TO etheria_user;

--
-- TOC entry 345 (class 1259 OID 19967)
-- Name: village_statistics; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.village_statistics (
    village_id uuid NOT NULL,
    total_points numeric(15,2) DEFAULT 0,
    building_levels integer DEFAULT 0,
    unit_count integer DEFAULT 0,
    resource_production jsonb DEFAULT '{}'::jsonb,
    defense_strength integer DEFAULT 0,
    attack_strength integer DEFAULT 0,
    population integer DEFAULT 0,
    last_updated timestamp with time zone DEFAULT now()
);


ALTER TABLE public.village_statistics OWNER TO etheria_user;

--
-- TOC entry 7576 (class 0 OID 0)
-- Dependencies: 345
-- Name: TABLE village_statistics; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.village_statistics IS 'EstadÃ­sticas de aldeas';


--
-- TOC entry 346 (class 1259 OID 19987)
-- Name: world_statistics; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.world_statistics (
    world_id uuid NOT NULL,
    total_players integer DEFAULT 0,
    active_players integer DEFAULT 0,
    total_alliances integer DEFAULT 0,
    total_villages integer DEFAULT 0,
    total_battles integer DEFAULT 0,
    average_player_level numeric(5,2) DEFAULT 0,
    total_resources_produced jsonb DEFAULT '{}'::jsonb,
    last_updated timestamp with time zone DEFAULT now()
);


ALTER TABLE public.world_statistics OWNER TO etheria_user;

--
-- TOC entry 7577 (class 0 OID 0)
-- Dependencies: 346
-- Name: TABLE world_statistics; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.world_statistics IS 'EstadÃ­sticas de mundos';


--
-- TOC entry 220 (class 1259 OID 17053)
-- Name: worlds; Type: TABLE; Schema: public; Owner: etheria_user
--

CREATE TABLE public.worlds (
    id uuid NOT NULL,
    name character varying(100) NOT NULL,
    max_players integer NOT NULL,
    is_active boolean DEFAULT true NOT NULL,
    created_at timestamp without time zone NOT NULL,
    description text DEFAULT ''::text,
    current_players integer DEFAULT 0,
    world_type character varying(50) DEFAULT 'normal'::character varying,
    updated_at timestamp with time zone DEFAULT now(),
    is_online boolean DEFAULT false,
    status character varying(20) DEFAULT 'offline'::character varying,
    last_started_at timestamp with time zone,
    last_stopped_at timestamp with time zone
);


ALTER TABLE public.worlds OWNER TO etheria_user;

--
-- TOC entry 7578 (class 0 OID 0)
-- Dependencies: 220
-- Name: TABLE worlds; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON TABLE public.worlds IS 'Mundos disponibles';


--
-- TOC entry 7579 (class 0 OID 0)
-- Dependencies: 220
-- Name: COLUMN worlds.description; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.worlds.description IS 'DescripciÃ³n del mundo';


--
-- TOC entry 7580 (class 0 OID 0)
-- Dependencies: 220
-- Name: COLUMN worlds.current_players; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.worlds.current_players IS 'NÃºmero actual de jugadores en el mundo';


--
-- TOC entry 7581 (class 0 OID 0)
-- Dependencies: 220
-- Name: COLUMN worlds.world_type; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.worlds.world_type IS 'Tipo de mundo: normal, pvp, peaceful';


--
-- TOC entry 7582 (class 0 OID 0)
-- Dependencies: 220
-- Name: COLUMN worlds.updated_at; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.worlds.updated_at IS 'Fecha de Ãºltima actualizaciÃ³n';


--
-- TOC entry 7583 (class 0 OID 0)
-- Dependencies: 220
-- Name: COLUMN worlds.is_online; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.worlds.is_online IS 'Indica si la instancia del mundo estÃ¡ ejecutÃ¡ndose';


--
-- TOC entry 7584 (class 0 OID 0)
-- Dependencies: 220
-- Name: COLUMN worlds.status; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.worlds.status IS 'Estado del mundo: offline, starting, online, stopping';


--
-- TOC entry 7585 (class 0 OID 0)
-- Dependencies: 220
-- Name: COLUMN worlds.last_started_at; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.worlds.last_started_at IS 'Ãšltima vez que se iniciÃ³ el mundo';


--
-- TOC entry 7586 (class 0 OID 0)
-- Dependencies: 220
-- Name: COLUMN worlds.last_stopped_at; Type: COMMENT; Schema: public; Owner: etheria_user
--

COMMENT ON COLUMN public.worlds.last_stopped_at IS 'Ãšltima vez que se detuvo el mundo';


--
-- TOC entry 5961 (class 2604 OID 20088)
-- Name: achievement_categories id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_categories ALTER COLUMN id SET DEFAULT nextval('public.achievement_categories_id_seq'::regclass);


--
-- TOC entry 5973 (class 2604 OID 20139)
-- Name: achievement_events id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_events ALTER COLUMN id SET DEFAULT nextval('public.achievement_events_id_seq'::regclass);


--
-- TOC entry 5765 (class 2604 OID 19082)
-- Name: battle_formations id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_formations ALTER COLUMN id SET DEFAULT nextval('public.battle_formations_id_seq'::regclass);


--
-- TOC entry 6105 (class 2604 OID 20937)
-- Name: building_configs id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.building_configs ALTER COLUMN id SET DEFAULT nextval('public.building_configs_id_seq'::regclass);


--
-- TOC entry 5798 (class 2604 OID 19316)
-- Name: economy_system_config id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.economy_system_config ALTER COLUMN id SET DEFAULT nextval('public.economy_system_config_id_seq'::regclass);


--
-- TOC entry 5664 (class 2604 OID 18739)
-- Name: hero_events id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_events ALTER COLUMN id SET DEFAULT nextval('public.hero_events_id_seq'::regclass);


--
-- TOC entry 5654 (class 2604 OID 18576)
-- Name: hero_system_config id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_system_config ALTER COLUMN id SET DEFAULT nextval('public.hero_system_config_id_seq'::regclass);


--
-- TOC entry 5819 (class 2604 OID 19345)
-- Name: market_items id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_items ALTER COLUMN id SET DEFAULT nextval('public.market_items_id_seq'::regclass);


--
-- TOC entry 5836 (class 2604 OID 19437)
-- Name: market_statistics id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_statistics ALTER COLUMN id SET DEFAULT nextval('public.market_statistics_id_seq'::regclass);


--
-- TOC entry 5850 (class 2604 OID 19461)
-- Name: market_trends id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_trends ALTER COLUMN id SET DEFAULT nextval('public.market_trends_id_seq'::regclass);


--
-- TOC entry 5738 (class 2604 OID 19001)
-- Name: military_units id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.military_units ALTER COLUMN id SET DEFAULT nextval('public.military_units_id_seq'::regclass);


--
-- TOC entry 6080 (class 2604 OID 20783)
-- Name: prestige_achievements id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_achievements ALTER COLUMN id SET DEFAULT nextval('public.prestige_achievements_id_seq'::regclass);


--
-- TOC entry 6076 (class 2604 OID 20739)
-- Name: prestige_events id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_events ALTER COLUMN id SET DEFAULT nextval('public.prestige_events_id_seq'::regclass);


--
-- TOC entry 6071 (class 2604 OID 20691)
-- Name: prestige_levels id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_levels ALTER COLUMN id SET DEFAULT nextval('public.prestige_levels_id_seq'::regclass);


--
-- TOC entry 6073 (class 2604 OID 20726)
-- Name: prestige_sources id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_sources ALTER COLUMN id SET DEFAULT nextval('public.prestige_sources_id_seq'::regclass);


--
-- TOC entry 5855 (class 2604 OID 19490)
-- Name: price_history id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.price_history ALTER COLUMN id SET DEFAULT nextval('public.price_history_id_seq'::regclass);


--
-- TOC entry 5896 (class 2604 OID 19695)
-- Name: ranking_categories id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_categories ALTER COLUMN id SET DEFAULT nextval('public.ranking_categories_id_seq'::regclass);


--
-- TOC entry 5916 (class 2604 OID 19847)
-- Name: ranking_history id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_history ALTER COLUMN id SET DEFAULT nextval('public.ranking_history_id_seq'::regclass);


--
-- TOC entry 5907 (class 2604 OID 19716)
-- Name: ranking_seasons id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_seasons ALTER COLUMN id SET DEFAULT nextval('public.ranking_seasons_id_seq'::regclass);


--
-- TOC entry 6057 (class 2604 OID 20641)
-- Name: title_categories id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.title_categories ALTER COLUMN id SET DEFAULT nextval('public.title_categories_id_seq'::regclass);


--
-- TOC entry 6063 (class 2604 OID 20657)
-- Name: titles id; Type: DEFAULT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.titles ALTER COLUMN id SET DEFAULT nextval('public.titles_id_seq'::regclass);


--
-- TOC entry 7350 (class 0 OID 20085)
-- Dependencies: 352
-- Data for Name: achievement_categories; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.achievement_categories (id, name, description, icon, color, background_color, display_order, is_public, show_in_dashboard, total_achievements, completed_count, completion_rate, is_active, created_at, updated_at) FROM stdin;
1	Combate	Logros relacionados con batallas y combate	sword	#FF4444	#f8f9fa	1	t	t	0	0	0.00	t	2025-06-19 18:22:27.614158	2025-06-19 18:22:27.614158
2	Construccion	Logros de construccion y desarrollo	hammer	#44AA44	#f8f9fa	2	t	t	0	0	0.00	t	2025-06-19 18:22:27.614158	2025-06-19 18:22:27.614158
3	Recursos	Logros de recoleccion de recursos	pickaxe	#FFAA44	#f8f9fa	3	t	t	0	0	0.00	t	2025-06-19 18:22:27.614158	2025-06-19 18:22:27.614158
4	Social	Logros de interaccion social	users	#4444FF	#f8f9fa	4	t	t	0	0	0.00	t	2025-06-19 18:22:27.614158	2025-06-19 18:22:27.614158
5	Exploracion	Logros de exploracion del mundo	compass	#AA44FF	#f8f9fa	5	t	t	0	0	0.00	t	2025-06-19 18:22:27.614158	2025-06-19 18:22:27.614158
6	Economia	Logros relacionados con el comercio	coins	#FFAA44	#f8f9fa	6	t	t	0	0	0.00	t	2025-06-19 18:22:27.614158	2025-06-19 18:22:27.614158
7	Alianzas	Logros de alianzas y cooperacion	shield	#44FFAA	#f8f9fa	7	t	t	0	0	0.00	t	2025-06-19 18:22:27.614158	2025-06-19 18:22:27.614158
8	Eventos	Logros de eventos especiales	star	#FF44AA	#f8f9fa	8	t	t	0	0	0.00	t	2025-06-19 18:22:27.614158	2025-06-19 18:22:27.614158
\.


--
-- TOC entry 7352 (class 0 OID 20136)
-- Dependencies: 354
-- Data for Name: achievement_events; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.achievement_events (id, event_type, event_data, entity_type, entity_id, progress_value, progress_data, source, description, occurred_at, created_at) FROM stdin;
\.


--
-- TOC entry 7356 (class 0 OID 20283)
-- Dependencies: 358
-- Data for Name: achievement_leaderboard; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.achievement_leaderboard (id, player_id, total_achievements, total_points, rank_position, last_updated) FROM stdin;
\.


--
-- TOC entry 7357 (class 0 OID 20299)
-- Dependencies: 359
-- Data for Name: achievement_milestones; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.achievement_milestones (id, achievement_id, milestone_number, progress_required, reward_data, is_active, created_at) FROM stdin;
\.


--
-- TOC entry 7358 (class 0 OID 20316)
-- Dependencies: 360
-- Data for Name: achievement_notifications; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.achievement_notifications (id, player_id, achievement_id, notification_type, message, is_read, created_at) FROM stdin;
\.


--
-- TOC entry 7353 (class 0 OID 20229)
-- Dependencies: 355
-- Data for Name: achievement_progress; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.achievement_progress (id, player_id, achievement_id, current_progress, target_progress, last_updated) FROM stdin;
\.


--
-- TOC entry 7354 (class 0 OID 20249)
-- Dependencies: 356
-- Data for Name: achievement_rewards; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.achievement_rewards (id, achievement_id, reward_type, reward_data, quantity, is_active, created_at) FROM stdin;
\.


--
-- TOC entry 7355 (class 0 OID 20266)
-- Dependencies: 357
-- Data for Name: achievement_statistics; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.achievement_statistics (id, player_id, total_achievements, completed_achievements, total_points, average_completion_time, last_achievement_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7254 (class 0 OID 17477)
-- Dependencies: 238
-- Data for Name: achievements; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.achievements (id, name, description, category, requirement_type, requirement_value, reward_type, reward_value, icon_url, created_at) FROM stdin;
4f4f30e5-8d49-43f9-8d62-45add4ba274e	Primera Aldea	Construye tu primera aldea	construction	villages_created	1	experience	100	\N	2025-06-19 12:59:19.53218-03
a2c8aef7-17c4-43a4-b662-9019e8066fb9	Constructor	Mejora un edificio al nivel 5	construction	building_level	5	experience	200	\N	2025-06-19 12:59:19.53218-03
69238771-735d-4739-b312-b79a88ded67d	Granjero	Almacena 10,000 unidades de comida	resources	food_stored	10000	experience	150	\N	2025-06-19 12:59:19.53218-03
ea7c16bc-e411-4b9e-99c4-da9b1ed78695	Miner	Almacena 10,000 unidades de piedra	resources	stone_stored	10000	experience	150	\N	2025-06-19 12:59:19.53218-03
faa53b80-4caa-4fd5-9e27-e1c7340cee5d	Lumberjack	Almacena 10,000 unidades de madera	resources	wood_stored	10000	experience	150	\N	2025-06-19 12:59:19.53218-03
dbf102a8-609e-4ddc-a8fb-bb3fe277d728	Comerciante	Realiza tu primera transacciÃ³n comercial	trade	trades_completed	1	experience	100	\N	2025-06-19 12:59:19.53218-03
03b778fc-63b5-4648-9a4d-d3f82457d311	Soldado	Entrena tu primera unidad militar	military	units_trained	1	experience	100	\N	2025-06-19 12:59:19.53218-03
6df9ebef-0ec0-4c6f-b455-2fd20f8bcc32	Comandante	Entrena 100 unidades militares	military	units_trained	100	experience	500	\N	2025-06-19 12:59:19.53218-03
\.


--
-- TOC entry 7276 (class 0 OID 17989)
-- Dependencies: 265
-- Data for Name: admin_actions; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.admin_actions (id, admin_id, action_type, target_type, target_id, reason, duration, data, created_at) FROM stdin;
\.


--
-- TOC entry 7274 (class 0 OID 17953)
-- Dependencies: 263
-- Data for Name: admin_roles; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.admin_roles (id, name, description, permissions, created_at) FROM stdin;
0df23058-c137-4e14-bac7-08578bbd349a	Super Admin	Administrador con todos los permisos	["*"]	2025-06-19 13:00:23.04869-03
44c75814-6705-4af0-bb35-4158913de9fb	Moderator	Moderador con permisos limitados	["view_logs", "mute_players", "kick_players", "view_reports"]	2025-06-19 13:00:23.04869-03
ffaee38d-f6c9-437e-b83e-f8361c93de07	Support	Soporte con permisos bÃ¡sicos	["view_logs", "view_reports", "send_notifications"]	2025-06-19 13:00:23.04869-03
0e1f2218-30e8-46e1-aa07-bb0defeb25a2	Developer	Desarrollador con permisos tÃ©cnicos	["view_logs", "view_metrics", "manage_config", "run_maintenance"]	2025-06-19 13:00:23.04869-03
\.


--
-- TOC entry 7275 (class 0 OID 17964)
-- Dependencies: 264
-- Data for Name: admins; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.admins (id, player_id, role_id, is_active, assigned_by, assigned_at, last_action) FROM stdin;
\.


--
-- TOC entry 7249 (class 0 OID 17338)
-- Dependencies: 233
-- Data for Name: alliance_members; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.alliance_members (id, alliance_id, player_id, role, joined_at, contribution_points) FROM stdin;
\.


--
-- TOC entry 7343 (class 0 OID 19948)
-- Dependencies: 344
-- Data for Name: alliance_statistics; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.alliance_statistics (alliance_id, total_points, member_count, active_members, total_battles_won, total_battles_lost, total_villages, average_level, total_contributions, last_updated) FROM stdin;
\.


--
-- TOC entry 7248 (class 0 OID 17311)
-- Dependencies: 232
-- Data for Name: alliances; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.alliances (id, name, tag, description, leader_id, world_id, member_count, max_members, is_active, created_at, updated_at, level, experience) FROM stdin;
\.


--
-- TOC entry 7309 (class 0 OID 19079)
-- Dependencies: 306
-- Data for Name: battle_formations; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.battle_formations (id, name, description, type, layout, bonuses, penalties, requirements, min_units, max_units, icon, preview, is_active, is_advanced, created_at) FROM stdin;
\.


--
-- TOC entry 7272 (class 0 OID 17856)
-- Dependencies: 257
-- Data for Name: battle_reports; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.battle_reports (id, battle_id, attacker_id, defender_id, report_type, battle_data, casualties, loot, experience_gained, created_at) FROM stdin;
\.


--
-- TOC entry 7311 (class 0 OID 19181)
-- Dependencies: 308
-- Data for Name: battle_simulations; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.battle_simulations (id, player_id, simulation_data, created_at) FROM stdin;
\.


--
-- TOC entry 7316 (class 0 OID 19294)
-- Dependencies: 315
-- Data for Name: battle_system_config; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.battle_system_config (id, config_key, config_value, config_type, description, is_active, created_at) FROM stdin;
be53e486-2dbf-4dd8-b924-242839c5957e	battle_duration_base	300	integer	DuraciÃ³n base de batallas en segundos	t	2025-06-19 14:41:01.889056-03
f6ad5c64-65bf-4f1b-9003-4947b5c339d4	max_battle_waves	5	integer	MÃ¡ximo nÃºmero de oleadas por batalla	t	2025-06-19 14:41:01.889056-03
8d1ae11b-1dd7-453c-b361-69552cf0bef0	morale_effect	0.1	decimal	Efecto de la moral en el combate	t	2025-06-19 14:41:01.889056-03
975a36f5-0996-4316-ac16-3da0abb5c4ae	terrain_effect_multiplier	1.5	decimal	Multiplicador de efectos de terreno	t	2025-06-19 14:41:01.889056-03
99b4e917-97bc-4ae1-8c33-c10f1352c948	weather_effect_multiplier	1.2	decimal	Multiplicador de efectos climÃ¡ticos	t	2025-06-19 14:41:01.889056-03
5d2a9a0f-8ad7-4091-9f85-cd006a845259	formation_bonus_max	25	integer	MÃ¡ximo bonus por formaciÃ³n	t	2025-06-19 14:41:01.889056-03
ff1b0c1b-fae3-4992-9a2b-4ea00d1ad2dc	tactic_bonus_max	30	integer	MÃ¡ximo bonus por tÃ¡ctica	t	2025-06-19 14:41:01.889056-03
\.


--
-- TOC entry 7313 (class 0 OID 19256)
-- Dependencies: 312
-- Data for Name: battle_tactics; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.battle_tactics (id, tactic_name, description, tactic_type, effects, requirements, is_active, created_at) FROM stdin;
5c5f3d55-fcd2-48ab-a511-3c65b8eb6635	Carga Frontal	Ataque directo con todas las fuerzas	aggressive	{"attack_bonus": 20, "defense_penalty": -10}	\N	t	2025-06-19 14:41:01.879803-03
3ae3ce77-902d-42ec-b0fe-0ce8fcc23bf1	Defensa en Profundidad	MÃºltiples lÃ­neas de defensa	defensive	{"defense_bonus": 25, "attack_penalty": -15}	\N	t	2025-06-19 14:41:01.879803-03
39147f01-152e-4e71-8f4d-decf12b4b20c	Equilibrio	Estrategia balanceada	balanced	{"attack_bonus": 5, "defense_bonus": 5}	\N	t	2025-06-19 14:41:01.879803-03
7b80d3cf-e37b-49c5-8c50-47b1b4bb2dec	Golpe y Fuga	Ataques rÃ¡pidos y retirada	hit_and_run	{"speed_bonus": 30, "damage_penalty": -20}	\N	t	2025-06-19 14:41:01.879803-03
933cb696-b7f5-4d94-82cc-a69e569716d3	Asedio	Estrategia para fortalezas	siege	{"siege_bonus": 40, "speed_penalty": -25}	\N	t	2025-06-19 14:41:01.879803-03
\.


--
-- TOC entry 7314 (class 0 OID 19269)
-- Dependencies: 313
-- Data for Name: battle_terrain; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.battle_terrain (id, terrain_name, description, terrain_type, effects, icon, created_at) FROM stdin;
6666444c-ee39-4bdb-b50b-6c65b5149b80	Llanuras	Terreno abierto ideal para caballerÃ­a	plains	{"cavalry_bonus": 15, "archer_penalty": -5}	plains	2025-06-19 14:41:01.883539-03
6d697f47-5b13-45da-baa5-7a97ef161708	Bosque	Terreno denso que favorece arqueros	forest	{"archer_bonus": 20, "cavalry_penalty": -15}	forest	2025-06-19 14:41:01.883539-03
8e4a6f5d-14b3-42e0-bfd9-6ba8369d3021	MontaÃ±a	Terreno elevado con ventaja defensiva	mountain	{"defense_bonus": 25, "speed_penalty": -20}	mountain	2025-06-19 14:41:01.883539-03
fe976ae9-096f-4479-9d0f-260db4174032	Desierto	Terreno hostil que afecta a todos	desert	{"speed_penalty": -10, "health_penalty": -5}	desert	2025-06-19 14:41:01.883539-03
2cac9ad2-071d-4c31-9792-6cedd72bd20c	Pantano	Terreno difÃ­cil que ralentiza unidades	swamp	{"defense_bonus": 10, "speed_penalty": -30}	swamp	2025-06-19 14:41:01.883539-03
f47bf4b7-c9f8-4fc4-949c-a57f1ce394d9	Urbano	Terreno de ciudad con ventajas mixtas	urban	{"defense_bonus": 15, "cavalry_penalty": -20}	city	2025-06-19 14:41:01.883539-03
\.


--
-- TOC entry 7310 (class 0 OID 19166)
-- Dependencies: 307
-- Data for Name: battle_waves; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.battle_waves (id, battle_id, wave_number, attacker_units, defender_units, result, created_at) FROM stdin;
\.


--
-- TOC entry 7315 (class 0 OID 19281)
-- Dependencies: 314
-- Data for Name: battle_weather; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.battle_weather (id, weather_name, description, weather_type, effects, probability, created_at) FROM stdin;
73fa5322-c61d-459f-8c74-70fb962bc0d9	Despejado	Condiciones ideales para el combate	clear	{}	0.40	2025-06-19 14:41:01.886571-03
431dc911-b6a4-424d-a442-869b4ca2d34d	Lluvia	Lluvia que afecta la visibilidad	rain	{"speed_penalty": -5, "archer_penalty": -10}	0.25	2025-06-19 14:41:01.886571-03
ac0d4b6f-0d85-46f8-9381-6df7367bc63d	Tormenta	Condiciones extremas	storm	{"speed_penalty": -15, "archer_penalty": -20, "visibility_penalty": -30}	0.10	2025-06-19 14:41:01.886571-03
1197da97-d273-4ea7-9a35-28effdbcac24	Niebla	Visibilidad reducida	fog	{"archer_penalty": -15, "visibility_penalty": -25}	0.15	2025-06-19 14:41:01.886571-03
1bcd2455-2051-426d-985d-4914e7a6b945	Nieve	Condiciones invernales	snow	{"defense_bonus": 10, "speed_penalty": -20}	0.10	2025-06-19 14:41:01.886571-03
\.


--
-- TOC entry 7250 (class 0 OID 17360)
-- Dependencies: 234
-- Data for Name: battles; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.battles (id, attacker_id, defender_id, attacker_village_id, defender_village_id, battle_type, start_time, end_time, winner_id, status, attacker_units, defender_units, battle_report, created_at, mode, max_waves, max_duration, current_wave, duration, terrain, weather, attacker_formation, defender_formation, attacker_tactics, defender_tactics) FROM stdin;
\.


--
-- TOC entry 7388 (class 0 OID 20934)
-- Dependencies: 391
-- Data for Name: building_configs; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.building_configs (id, type, level, wood_cost, stone_cost, food_cost, gold_cost, build_time_seconds, production_per_hour, storage_capacity, training_speed_modifier, construction_speed_modifier) FROM stdin;
1	town_hall	1	100	100	50	20	300	0	0	1	1
2	town_hall	2	200	200	100	40	600	0	0	1	0.95
3	town_hall	3	400	400	200	80	900	0	0	1	0.9
4	warehouse	1	80	60	30	10	180	0	200	1	1
5	warehouse	2	160	120	60	20	360	0	400	1	1
6	warehouse	3	320	240	120	40	540	0	800	1	1
7	granary	1	60	80	40	10	180	0	200	1	1
8	granary	2	120	160	80	20	360	0	400	1	1
9	granary	3	240	320	160	40	540	0	800	1	1
10	barracks	1	120	100	60	30	240	0	0	1	1
11	barracks	2	240	200	120	60	480	0	0	0.95	1
12	barracks	3	480	400	240	120	720	0	0	0.9	1
13	wood_cutter	1	50	30	20	5	120	10	0	1	1
14	wood_cutter	2	100	60	40	10	240	22	0	1	1
15	wood_cutter	3	200	120	80	20	360	46	0	1	1
16	stone_quarry	1	40	50	20	5	120	8	0	1	1
17	stone_quarry	2	80	100	40	10	240	18	0	1	1
18	stone_quarry	3	160	200	80	20	360	38	0	1	1
19	farm	1	60	40	30	5	120	12	0	1	1
20	farm	2	120	80	60	10	240	26	0	1	1
21	farm	3	240	160	120	20	360	54	0	1	1
22	gold_mine	1	80	60	40	10	180	3	0	1	1
23	gold_mine	2	160	120	80	20	360	7	0	1	1
24	gold_mine	3	320	240	160	40	540	15	0	1	1
\.


--
-- TOC entry 7241 (class 0 OID 17167)
-- Dependencies: 225
-- Data for Name: building_types; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.building_types (id, name, display_name, description, max_level, base_production_wood, base_production_stone, base_production_food, base_production_gold, base_storage_wood, base_storage_stone, base_storage_food, base_storage_gold, upgrade_time_base, upgrade_cost_multiplier, created_at) FROM stdin;
281fb185-1ef7-4bbc-9ab5-8f2878f8b964	town_hall	Ayuntamiento	Centro de la aldea, aumenta la producciÃ³n de todos los recursos	20	5	3	8	2	0	0	0	0	60	1.50	2025-06-19 12:59:19.5227-03
7b369710-7cae-4c6e-a06a-4ba50c2747e3	warehouse	AlmacÃ©n	Almacena madera y piedra	20	0	0	0	0	200	200	0	0	120	1.80	2025-06-19 12:59:19.5227-03
563ea419-5345-4a5e-9f62-f8f3075bc2b3	granary	Granero	Almacena comida	20	0	0	0	0	0	0	200	0	120	1.80	2025-06-19 12:59:19.5227-03
5542f556-0d94-46fa-9cca-d78ae7036c20	marketplace	Mercado	Genera oro y permite el comercio	20	0	0	0	5	0	0	0	100	180	2.00	2025-06-19 12:59:19.5227-03
274ab092-530b-488e-80c4-dd379a1ca3e7	barracks	Cuartel	Entrena unidades militares	20	0	0	0	0	0	0	0	0	300	2.20	2025-06-19 12:59:19.5227-03
65cfb7a5-5701-41d8-b9eb-e620340455d9	academy	Academia	Mejora las unidades militares	15	0	0	0	0	0	0	0	0	600	2.50	2025-06-19 12:59:19.5227-03
abd8cdb2-5da7-4b9b-b43e-c76a88da30d4	smithy	HerrerÃ­a	Mejora el ataque de las unidades	15	0	0	0	0	0	0	0	0	600	2.50	2025-06-19 12:59:19.5227-03
1c3b2e14-49bc-4253-aab0-16a2649de329	armory	Arsenal	Mejora la defensa de las unidades	15	0	0	0	0	0	0	0	0	600	2.50	2025-06-19 12:59:19.5227-03
2c81a21d-1f1b-494d-a679-b845af91537e	farm	Granja	Produce comida	20	0	0	0	0	0	0	0	0	60	1.50	2025-07-06 01:42:32.015197-03
222dc86c-eadb-42c8-8b33-4d2ea6b3088f	mine	Mina	Extrae piedra	20	0	0	0	0	0	0	0	0	60	1.50	2025-07-06 01:42:32.015197-03
226de3a5-f030-4481-9ad3-79a501c1aaec	lumber_mill	Aserradero	Produce madera	20	0	0	0	0	0	0	0	0	60	1.50	2025-07-06 01:42:32.015197-03
67441b57-70f2-46e2-845f-3eb56e965a26	wall	Muro	Defiende la aldea	20	0	0	0	0	0	0	0	0	60	1.50	2025-07-06 01:42:32.015197-03
2bec75a9-acaf-4641-87a6-4f38a74b28d9	tower	Torre	Proporciona defensa adicional	20	0	0	0	0	0	0	0	0	60	1.50	2025-07-06 01:42:32.015197-03
92e5826d-ec11-4603-8f11-ca51de5ee4fa	stable	Establo	Entrena unidades de caballería	20	0	0	0	0	0	0	0	0	60	1.50	2025-07-06 01:42:32.015197-03
c6584518-05ed-457d-ad8c-e5fb5f88e6a6	workshop	Taller	Mejora la producción de recursos	20	0	0	0	0	0	0	0	0	60	1.50	2025-07-06 01:42:32.015197-03
660e9f35-aea4-4559-a074-a86a9da5d44d	temple	Templo	Aumenta la felicidad de la población	20	0	0	0	0	0	0	0	0	60	1.50	2025-07-06 01:42:32.015197-03
\.


--
-- TOC entry 7239 (class 0 OID 17092)
-- Dependencies: 223
-- Data for Name: buildings; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.buildings (id, village_id, type, level, is_upgrading, upgrade_completion_time, building_type_id) FROM stdin;
b869109e-0b5a-4f14-a5c4-6d75a6ddf6cb	82df7336-33e9-4293-a195-c03f68cdd1db	town_hall	1	f	\N	\N
98f88491-8f24-4b75-890d-31c2dc10d394	82df7336-33e9-4293-a195-c03f68cdd1db	warehouse	1	f	\N	\N
9ab91061-0505-4fcc-818e-f01b994452b0	82df7336-33e9-4293-a195-c03f68cdd1db	granary	1	f	\N	\N
b67d959d-e9b2-4192-96bf-a15170a40b4f	82df7336-33e9-4293-a195-c03f68cdd1db	marketplace	1	f	\N	\N
c0f790ad-2991-46f6-9757-ec576be303e4	82df7336-33e9-4293-a195-c03f68cdd1db	barracks	1	f	\N	\N
e2c5c4d0-81ef-45ed-9673-c05134fb9897	82df7336-33e9-4293-a195-c03f68cdd1db	wood_cutter	1	f	\N	\N
bffe6bb5-831c-47cf-ab62-bfc805fb5a84	82df7336-33e9-4293-a195-c03f68cdd1db	stone_quarry	1	f	\N	\N
eb697f91-b151-4869-bd19-d5790e556b3f	82df7336-33e9-4293-a195-c03f68cdd1db	farm	1	f	\N	\N
17accd40-ffbc-497f-9110-34abe4dd51e5	82df7336-33e9-4293-a195-c03f68cdd1db	gold_mine	1	f	\N	\N
\.


--
-- TOC entry 7247 (class 0 OID 17290)
-- Dependencies: 231
-- Data for Name: chat_channel_members; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.chat_channel_members (id, channel_id, player_id, username, is_admin, is_moderator, joined_at) FROM stdin;
\.


--
-- TOC entry 7245 (class 0 OID 17251)
-- Dependencies: 229
-- Data for Name: chat_channels; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.chat_channels (id, name, description, type, world_id, is_active, max_members, created_at) FROM stdin;
97fc369b-0490-4107-a31d-be3539e62ec3	Global	Chat global para todos los jugadores	global	\N	t	1000	2025-06-19 12:59:19.528311-03
76f2c0fd-0b03-4792-9462-8e448cf45337	Ayuda	Canal de ayuda y soporte	global	\N	t	1000	2025-06-19 12:59:19.528311-03
82c60f1d-b983-4724-8ac2-f827cc8111b4	Comercio	Canal para intercambios y comercio	global	\N	t	1000	2025-06-19 12:59:19.528311-03
7894bd69-40a2-4318-a087-9fa022804f15	Novedades	Canal oficial de novedades del juego	global	\N	t	1000	2025-06-19 12:59:19.528311-03
\.


--
-- TOC entry 7246 (class 0 OID 17270)
-- Dependencies: 230
-- Data for Name: chat_messages; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.chat_messages (id, channel_id, player_id, username, message, type, created_at) FROM stdin;
\.


--
-- TOC entry 7327 (class 0 OID 19508)
-- Dependencies: 326
-- Data for Name: currencies; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.currencies (id, name, symbol, description, exchange_rate, is_active, created_at) FROM stdin;
c46eda2b-b906-4d0a-ab92-ecb69f603043	Oro	G	Moneda principal del reino	1.000000	t	2025-06-19 18:19:01.375018-03
295b5b97-acf8-4c30-9fc1-897917268b88	Plata	S	Moneda secundaria	0.010000	t	2025-06-19 18:19:01.375018-03
b018cd32-a4f5-426d-86a4-d5b645eb0ebb	Cobre	C	Moneda menor	0.000100	t	2025-06-19 18:19:01.375018-03
0fceb65e-86ba-49b6-99ae-5bcf0bf6aad3	Gemas	GE	Moneda premium	100.000000	t	2025-06-19 18:19:01.375018-03
b1b837c0-e661-4026-ae10-3eda54b11376	Puntos de Honor	PH	Moneda de honor	10.000000	t	2025-06-19 18:19:01.375018-03
\.


--
-- TOC entry 7390 (class 0 OID 21014)
-- Dependencies: 393
-- Data for Name: currency_config; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.currency_config (id, global_coin, world_coin, created_at, updated_at) FROM stdin;
ded54c52-a71d-4ba0-b33a-4ce6e5222238	Oro	Plata	2025-06-20 18:48:12.930411-03	2025-06-20 18:48:12.930411-03
\.


--
-- TOC entry 7331 (class 0 OID 19593)
-- Dependencies: 330
-- Data for Name: currency_exchanges; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.currency_exchanges (id, player_id, from_currency_id, to_currency_id, from_amount, to_amount, exchange_rate, fee, status, completed_at, created_at) FROM stdin;
\.


--
-- TOC entry 7393 (class 0 OID 21061)
-- Dependencies: 396
-- Data for Name: currency_transactions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.currency_transactions (id, player_id, world_id, currency_type, amount, type, description, balance, created_at) FROM stdin;
\.


--
-- TOC entry 7285 (class 0 OID 18113)
-- Dependencies: 274
-- Data for Name: database_backups; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.database_backups (id, backup_name, backup_type, file_path, file_size, checksum, status, started_at, completed_at, created_by, notes) FROM stdin;
\.


--
-- TOC entry 7286 (class 0 OID 18129)
-- Dependencies: 275
-- Data for Name: database_restores; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.database_restores (id, backup_id, restore_name, status, started_at, completed_at, created_by, notes) FROM stdin;
\.


--
-- TOC entry 7334 (class 0 OID 19645)
-- Dependencies: 333
-- Data for Name: economy_statistics; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.economy_statistics (id, stat_date, total_transactions, total_volume, avg_transaction_value, most_traded_item, most_active_trader, market_volatility, created_at) FROM stdin;
\.


--
-- TOC entry 7318 (class 0 OID 19313)
-- Dependencies: 317
-- Data for Name: economy_system_config; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.economy_system_config (id, is_enabled, primary_currency_name, secondary_currency_name, primary_currency_symbol, secondary_currency_symbol, exchange_rate, exchange_fee, min_exchange_amount, max_exchange_amount, market_tax, transaction_fee, max_price_fluctuation, price_update_interval, max_items_per_player, max_active_listings, min_listing_duration, max_listing_duration, advanced_config, created_at, updated_at) FROM stdin;
1	t	Silver	Gold	S	G	100.0000	0.0500	100	1000000	0.0200	0.0100	0.5000	15	100	10	1	168	{"enable_alerts": true, "enable_trends": true, "enable_auctions": true, "enable_notifications": true}	2025-06-19 18:17:32.744856	2025-06-19 18:17:32.744856
\.


--
-- TOC entry 7363 (class 0 OID 20441)
-- Dependencies: 365
-- Data for Name: event_categories; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.event_categories (id, name, description, icon, color, display_order, is_active, created_at) FROM stdin;
9a696ee9-2fcc-483e-8900-cb712075b6ac	Torneos	Eventos de competencia entre jugadores	trophy	#FFD700	1	t	2025-06-19 18:32:01.107973-03
6487c1d0-7da1-4daa-82a0-46e0c064906b	Desafios	Eventos de desafios individuales	target	#FF4444	2	t	2025-06-19 18:32:01.107973-03
a75a5ebb-610e-4c10-9d71-9d2ebd4530fb	Festivales	Eventos de celebracion y recompensas	star	#44AA44	3	t	2025-06-19 18:32:01.107973-03
06d704b6-1966-4686-a554-449945dfbfde	Invasiones	Eventos de defensa cooperativa	shield	#4444FF	4	t	2025-06-19 18:32:01.107973-03
\.


--
-- TOC entry 7369 (class 0 OID 20565)
-- Dependencies: 371
-- Data for Name: event_leaderboard; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.event_leaderboard (id, event_id, player_id, score, rank_position, matches_played, matches_won, matches_lost, last_updated) FROM stdin;
\.


--
-- TOC entry 7365 (class 0 OID 20478)
-- Dependencies: 367
-- Data for Name: event_matches; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.event_matches (id, event_id, player1_id, player2_id, winner_id, match_type, status, score1, score2, scheduled_at, started_at, completed_at, created_at) FROM stdin;
\.


--
-- TOC entry 7370 (class 0 OID 20588)
-- Dependencies: 372
-- Data for Name: event_notifications; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.event_notifications (id, player_id, event_id, notification_type, message, is_read, created_at) FROM stdin;
\.


--
-- TOC entry 7364 (class 0 OID 20455)
-- Dependencies: 366
-- Data for Name: event_participants; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.event_participants (id, event_id, player_id, status, score, rank_position, joined_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7258 (class 0 OID 17532)
-- Dependencies: 242
-- Data for Name: event_participation; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.event_participation (id, event_id, player_id, score, rank, rewards_claimed, joined_at) FROM stdin;
\.


--
-- TOC entry 7366 (class 0 OID 20511)
-- Dependencies: 368
-- Data for Name: event_rewards; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.event_rewards (id, event_id, rank_min, rank_max, reward_type, reward_data, is_active, created_at) FROM stdin;
\.


--
-- TOC entry 7367 (class 0 OID 20527)
-- Dependencies: 369
-- Data for Name: event_rewards_claimed; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.event_rewards_claimed (id, reward_id, player_id, claimed_at) FROM stdin;
\.


--
-- TOC entry 7368 (class 0 OID 20546)
-- Dependencies: 370
-- Data for Name: event_statistics; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.event_statistics (id, event_id, total_participants, total_matches, average_score, highest_score, lowest_score, updated_at) FROM stdin;
\.


--
-- TOC entry 7257 (class 0 OID 17522)
-- Dependencies: 241
-- Data for Name: events; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.events (id, name, description, event_type, start_time, end_time, is_active, rewards, created_at) FROM stdin;
\.


--
-- TOC entry 7287 (class 0 OID 18150)
-- Dependencies: 276
-- Data for Name: generated_reports; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.generated_reports (id, report_name, report_type, file_path, file_size, parameters, status, requested_by, requested_at, completed_at, expires_at) FROM stdin;
\.


--
-- TOC entry 7262 (class 0 OID 17679)
-- Dependencies: 247
-- Data for Name: hero_abilities; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.hero_abilities (id, hero_id, name, description, ability_type, level, max_level, cooldown, effects, created_at) FROM stdin;
\.


--
-- TOC entry 7300 (class 0 OID 18830)
-- Dependencies: 296
-- Data for Name: hero_artifacts; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.hero_artifacts (id, hero_id, artifact_name, artifact_type, description, effect, rarity, level, max_level, is_active, created_at) FROM stdin;
\.


--
-- TOC entry 7303 (class 0 OID 18884)
-- Dependencies: 299
-- Data for Name: hero_battles; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.hero_battles (id, player_id, hero_id, opponent_type, opponent_id, opponent_name, battle_type, result, hero_health_before, hero_health_after, opponent_health_before, opponent_health_after, experience_gained, rewards, battle_log, duration, created_at) FROM stdin;
\.


--
-- TOC entry 7305 (class 0 OID 18957)
-- Dependencies: 302
-- Data for Name: hero_equipment; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.hero_equipment (id, hero_id, slot, item_name, item_type, rarity, stats, level, durability, max_durability, is_equipped, created_at) FROM stdin;
\.


--
-- TOC entry 7296 (class 0 OID 18736)
-- Dependencies: 292
-- Data for Name: hero_events; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.hero_events (id, name, description, type, category, start_time, end_time, is_active, config, rewards, requirements, max_participants, current_participants, created_at) FROM stdin;
\.


--
-- TOC entry 7301 (class 0 OID 18848)
-- Dependencies: 297
-- Data for Name: hero_quests; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.hero_quests (id, hero_id, quest_name, quest_type, description, requirements, rewards, difficulty, duration, status, start_time, end_time, created_at) FROM stdin;
\.


--
-- TOC entry 7299 (class 0 OID 18810)
-- Dependencies: 295
-- Data for Name: hero_skills; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.hero_skills (id, hero_id, skill_name, skill_type, description, effect, level, max_level, cooldown, mana_cost, is_unlocked, created_at) FROM stdin;
\.


--
-- TOC entry 7304 (class 0 OID 18906)
-- Dependencies: 300
-- Data for Name: hero_statistics; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.hero_statistics (player_id, total_heroes, total_levels, total_experience, battles_won, battles_lost, quests_completed, artifacts_collected, legendary_heroes, updated_at) FROM stdin;
\.


--
-- TOC entry 7294 (class 0 OID 18573)
-- Dependencies: 290
-- Data for Name: hero_system_config; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.hero_system_config (id, is_enabled, max_heroes_per_player, max_active_heroes, experience_multiplier, injury_duration, recovery_cost, advanced_config, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7297 (class 0 OID 18751)
-- Dependencies: 293
-- Data for Name: hero_types; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.hero_types (id, name, display_name, description, class, base_attack, base_defense, base_health, base_speed, base_intelligence, base_charisma, special_ability, ability_description, icon, color, rarity, is_active, created_at) FROM stdin;
00d5104e-e655-46f5-91ca-1c43cedd46af	warrior	Guerrero	Un luchador valiente especializado en combate cuerpo a cuerpo	warrior	15	12	120	8	6	8	Furia Berserker	Aumenta el ataque cuando la salud estÃ¡ baja	sword	#8B4513	common	t	2025-06-19 13:48:37.173187-03
79a5b956-ebd8-48a6-ae8f-cbf6e6872e13	archer	Arquero	Un tirador experto que ataca desde la distancia	archer	18	8	90	12	8	6	Disparo Preciso	Mayor probabilidad de crÃ­tico	bow	#228B22	common	t	2025-06-19 13:48:37.173187-03
002ad2ed-3512-431f-aebc-d1777863b9df	mage	Mago	Un hechicero poderoso que domina la magia	mage	20	6	80	6	15	10	ExplosiÃ³n Arcana	DaÃ±o mÃ¡gico masivo	staff	#4169E1	uncommon	t	2025-06-19 13:48:37.173187-03
b95eb8b9-eba9-441e-b0ac-d39c69f69598	support	Sanador	Un curandero que protege y fortalece aliados	support	8	10	100	10	12	14	CuraciÃ³n Masiva	Cura a todos los aliados	cross	#32CD32	rare	t	2025-06-19 13:48:37.173187-03
9a5a4333-3c70-4f37-95bd-59f922833f04	tank	Tanque	Un defensor impenetrable que protege al equipo	tank	10	18	150	6	4	6	Escudo Defensivo	Reduce el daÃ±o recibido	shield	#696969	uncommon	t	2025-06-19 13:48:37.173187-03
\.


--
-- TOC entry 7261 (class 0 OID 17655)
-- Dependencies: 246
-- Data for Name: heroes; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.heroes (id, player_id, name, hero_type, level, experience, attack, defense, speed, intelligence, charisma, health, max_health, is_active, is_injured, injury_recovery_time, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7283 (class 0 OID 18086)
-- Dependencies: 272
-- Data for Name: maintenance_tasks; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.maintenance_tasks (id, task_name, task_type, description, schedule_cron, last_run, next_run, is_active, created_at) FROM stdin;
bc141bb3-8a1f-47da-86e9-11bc18e57948	Cleanup Old Logs	cleanup	Limpia logs antiguos	0 2 * * *	\N	\N	t	2025-06-19 13:00:23.054991-03
000f4092-1a33-4a20-9637-2154052f2f9d	Database Backup	backup	Backup completo de la base de datos	0 3 * * *	\N	\N	t	2025-06-19 13:00:23.054991-03
bcc9c84e-e68f-4efb-9d81-0a8250e3583e	Resource Generation	update	Genera recursos automÃ¡ticamente	*/5 * * * *	\N	\N	t	2025-06-19 13:00:23.054991-03
daeef407-c15e-425b-8da1-a2c8d337b812	Cleanup Expired Sessions	cleanup	Limpia sesiones expiradas	0 */6 * * *	\N	\N	t	2025-06-19 13:00:23.054991-03
c0d48f39-ed1a-420c-b540-ab943eeef38d	Update Rankings	update	Actualiza rankings del juego	0 */2 * * *	\N	\N	t	2025-06-19 13:00:23.054991-03
8aeb277b-f770-4697-ad40-ff7bb3a7e1ab	Cleanup Old Logs	cleanup	Limpia logs antiguos	0 2 * * *	\N	\N	t	2025-06-19 13:07:43.697488-03
ad7dace5-0bdb-4cc9-bb22-76edb6f41e3a	Database Backup	backup	Backup completo de la base de datos	0 3 * * *	\N	\N	t	2025-06-19 13:07:43.697488-03
0a79eccc-acd3-49c0-befb-5cdf1fbbac14	Resource Generation	update	Genera recursos automÃ¡ticamente	*/5 * * * *	\N	\N	t	2025-06-19 13:07:43.697488-03
f9c87ee5-bdf9-4bde-8c5f-b048ec260533	Cleanup Expired Sessions	cleanup	Limpia sesiones expiradas	0 */6 * * *	\N	\N	t	2025-06-19 13:07:43.697488-03
16a8c3fc-289e-4a60-92c4-5d80bea27f68	Update Rankings	update	Actualiza rankings del juego	0 */2 * * *	\N	\N	t	2025-06-19 13:07:43.697488-03
329a1d1d-a8dc-4854-afc6-7939c2de47ff	Cleanup Old Logs	cleanup	Limpia logs antiguos	0 2 * * *	\N	\N	t	2025-06-19 13:08:36.933579-03
1641d489-9be2-42fb-97bf-df22370c592c	Database Backup	backup	Backup completo de la base de datos	0 3 * * *	\N	\N	t	2025-06-19 13:08:36.933579-03
cbcc549c-aad7-4f67-9522-709e016080df	Resource Generation	update	Genera recursos automÃ¡ticamente	*/5 * * * *	\N	\N	t	2025-06-19 13:08:36.933579-03
560b4db4-5794-4aca-90cd-cc869b0190e9	Cleanup Expired Sessions	cleanup	Limpia sesiones expiradas	0 */6 * * *	\N	\N	t	2025-06-19 13:08:36.933579-03
1ace4887-95aa-477a-b472-19539542201c	Update Rankings	update	Actualiza rankings del juego	0 */2 * * *	\N	\N	t	2025-06-19 13:08:36.933579-03
\.


--
-- TOC entry 7333 (class 0 OID 19631)
-- Dependencies: 332
-- Data for Name: market_alerts; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.market_alerts (id, player_id, alert_type, item_type, item_name, target_price, is_active, triggered_at, created_at) FROM stdin;
\.


--
-- TOC entry 7320 (class 0 OID 19342)
-- Dependencies: 319
-- Data for Name: market_items; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.market_items (id, item_type, item_id, name, description, category, rarity, current_price, current_price_gold, price_history, total_listed, total_sold, average_price, price_change_24h, price_change_7d, is_tradeable, min_price, max_price, price_multiplier, icon, color, is_active, last_updated, created_at) FROM stdin;
1	resource	1	Madera	Recurso bÃ¡sico para construcciÃ³n	recursos	common	10	0	[]	0	0	0	0.0000	0.0000	t	0	999999999	1.0000	wood.png	#8B4513	t	2025-06-19 18:17:32.747037	2025-06-19 18:17:32.747037
2	resource	2	Piedra	Material de construcciÃ³n resistente	recursos	common	15	0	[]	0	0	0	0.0000	0.0000	t	0	999999999	1.0000	stone.png	#696969	t	2025-06-19 18:17:32.747037	2025-06-19 18:17:32.747037
3	resource	3	Hierro	Metal bÃ¡sico para herramientas	recursos	uncommon	50	0	[]	0	0	0	0.0000	0.0000	t	0	999999999	1.0000	iron.png	#708090	t	2025-06-19 18:17:32.747037	2025-06-19 18:17:32.747037
4	resource	4	Oro	Metal precioso para joyerÃ­a	recursos	rare	200	2	[]	0	0	0	0.0000	0.0000	t	0	999999999	1.0000	gold.png	#FFD700	t	2025-06-19 18:17:32.747037	2025-06-19 18:17:32.747037
5	unit	1	Soldado	Unidad bÃ¡sica de infanterÃ­a	unidades	common	100	1	[]	0	0	0	0.0000	0.0000	t	0	999999999	1.0000	soldier.png	#4169E1	t	2025-06-19 18:17:32.747037	2025-06-19 18:17:32.747037
6	unit	2	Arquero	Unidad de combate a distancia	unidades	uncommon	150	1	[]	0	0	0	0.0000	0.0000	t	0	999999999	1.0000	archer.png	#228B22	t	2025-06-19 18:17:32.747037	2025-06-19 18:17:32.747037
7	unit	3	Caballero	Unidad de caballerÃ­a pesada	unidades	rare	500	5	[]	0	0	0	0.0000	0.0000	t	0	999999999	1.0000	knight.png	#2F4F4F	t	2025-06-19 18:17:32.747037	2025-06-19 18:17:32.747037
8	equipment	1	Espada de Hierro	Arma bÃ¡sica de combate	equipamiento	common	80	0	[]	0	0	0	0.0000	0.0000	t	0	999999999	1.0000	iron_sword.png	#C0C0C0	t	2025-06-19 18:17:32.747037	2025-06-19 18:17:32.747037
9	equipment	2	Armadura de Cuero	ProtecciÃ³n ligera	equipamiento	uncommon	120	1	[]	0	0	0	0.0000	0.0000	t	0	999999999	1.0000	leather_armor.png	#8B4513	t	2025-06-19 18:17:32.747037	2025-06-19 18:17:32.747037
10	equipment	3	Corona Real	SÃ­mbolo de autoridad	equipamiento	legendary	10000	100	[]	0	0	0	0.0000	0.0000	t	0	999999999	1.0000	crown.png	#FFD700	t	2025-06-19 18:17:32.747037	2025-06-19 18:17:32.747037
\.


--
-- TOC entry 7328 (class 0 OID 19521)
-- Dependencies: 327
-- Data for Name: market_listings; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.market_listings (id, seller_id, item_type, item_id, item_name, quantity, price_per_unit, currency_id, listing_type, status, expires_at, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7322 (class 0 OID 19434)
-- Dependencies: 321
-- Data for Name: market_statistics; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.market_statistics (id, date, total_transactions, total_volume, total_volume_gold, top_items, top_categories, average_prices, price_changes, active_sellers, active_buyers, new_users, total_taxes, total_fees, created_at) FROM stdin;
1	2025-06-19	0	0	0	[]	[]	{}	{}	0	0	0	0	0	2025-06-19 18:17:32.749608
\.


--
-- TOC entry 7329 (class 0 OID 19546)
-- Dependencies: 328
-- Data for Name: market_transactions; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.market_transactions (id, listing_id, buyer_id, seller_id, item_type, item_id, item_name, quantity, price_per_unit, total_price, currency_id, transaction_fee, status, completed_at, created_at) FROM stdin;
\.


--
-- TOC entry 7324 (class 0 OID 19458)
-- Dependencies: 323
-- Data for Name: market_trends; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.market_trends (id, item_type, item_id, trend_type, period, start_price, end_price, price_change, volume_change, predicted_price, confidence, data_points, factors, created_at) FROM stdin;
\.


--
-- TOC entry 7307 (class 0 OID 18998)
-- Dependencies: 304
-- Data for Name: military_units; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.military_units (id, name, description, type, category, tier, health, max_health, attack_speed, range, physical_attack, physical_penetration, magic_attack, magic_penetration, physical_defense, physical_resistance, magic_defense, magic_resistance, critical_chance, critical_damage, dodge_chance, block_chance, moral, training_cost, upgrade_cost, requirements, advantages, disadvantages, icon, model, animation, is_active, is_elite, created_at) FROM stdin;
\.


--
-- TOC entry 7271 (class 0 OID 17840)
-- Dependencies: 256
-- Data for Name: notifications; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.notifications (id, player_id, title, message, notification_type, priority, is_read, data, expires_at, created_at) FROM stdin;
\.


--
-- TOC entry 7279 (class 0 OID 18031)
-- Dependencies: 268
-- Data for Name: performance_logs; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.performance_logs (id, endpoint, method, response_time, status_code, player_id, ip_address, user_agent, created_at) FROM stdin;
\.


--
-- TOC entry 7255 (class 0 OID 17488)
-- Dependencies: 239
-- Data for Name: player_achievements; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.player_achievements (id, player_id, achievement_id, unlocked_at) FROM stdin;
\.


--
-- TOC entry 7330 (class 0 OID 19576)
-- Dependencies: 329
-- Data for Name: player_economy; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.player_economy (player_id, total_wealth, total_spent, total_earned, market_transactions, successful_trades, failed_trades, last_transaction_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7391 (class 0 OID 21024)
-- Dependencies: 394
-- Data for Name: player_global_currency; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.player_global_currency (id, player_id, amount, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7302 (class 0 OID 18867)
-- Dependencies: 298
-- Data for Name: player_hero_quests; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.player_hero_quests (id, player_id, quest_name, quest_type, description, requirements, rewards, progress, status, created_at, completed_at) FROM stdin;
\.


--
-- TOC entry 7298 (class 0 OID 18772)
-- Dependencies: 294
-- Data for Name: player_heroes; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.player_heroes (id, player_id, hero_type_id, name, level, experience, experience_to_next, attack, defense, health, max_health, speed, intelligence, charisma, current_health, is_active, is_in_battle, current_village_id, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7383 (class 0 OID 20832)
-- Dependencies: 386
-- Data for Name: player_prestige; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.player_prestige (id, player_id, prestige_level, prestige_points, total_prestige_earned, last_prestige_gain, updated_at) FROM stdin;
\.


--
-- TOC entry 7264 (class 0 OID 17708)
-- Dependencies: 249
-- Data for Name: player_quests; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.player_quests (id, player_id, quest_id, progress, status, started_at, completed_at, expires_at, rewards_claimed) FROM stdin;
\.


--
-- TOC entry 7256 (class 0 OID 17507)
-- Dependencies: 240
-- Data for Name: player_statistics; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.player_statistics (id, player_id, stat_name, stat_value, last_updated) FROM stdin;
534e0e26-15fe-4c0f-a9f5-e29e6eb72999	2cd108ce-74ae-4fb0-a0dd-be65bc0d7130	total_points	0	2025-07-05 18:01:30.571679-03
acb0a97c-39b7-4893-9c55-8e5af004aa93	2cd108ce-74ae-4fb0-a0dd-be65bc0d7130	level	1	2025-07-05 18:01:30.571679-03
ae95641b-f5c9-4b5b-9582-f4696fb3b979	2cd108ce-74ae-4fb0-a0dd-be65bc0d7130	experience	0	2025-07-05 18:01:30.571679-03
d1ea68bd-1603-4b4a-bd69-2609c258cc44	6719a2c7-a3ef-439f-ba26-7a0365d30d26	total_points	0	2025-07-26 00:24:44.040602-03
b053b4fe-f887-42fa-912f-92ded6edf00d	6719a2c7-a3ef-439f-ba26-7a0365d30d26	level	1	2025-07-26 00:24:44.040602-03
225544f6-7050-43d7-b483-75129a1d2e3d	6719a2c7-a3ef-439f-ba26-7a0365d30d26	experience	0	2025-07-26 00:24:44.040602-03
\.


--
-- TOC entry 7260 (class 0 OID 17633)
-- Dependencies: 245
-- Data for Name: player_technologies; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.player_technologies (id, player_id, technology_id, level, is_researching, research_completion_time, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7312 (class 0 OID 19197)
-- Dependencies: 309
-- Data for Name: player_units; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.player_units (id, player_id, unit_type_id, quantity, available_quantity, in_battle, training, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7392 (class 0 OID 21040)
-- Dependencies: 395
-- Data for Name: player_world_currency; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.player_world_currency (id, player_id, world_id, amount, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7389 (class 0 OID 20979)
-- Dependencies: 392
-- Data for Name: player_world_entries; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.player_world_entries (id, player_id, world_id, entered_at, is_active, last_seen, created_at, updated_at) FROM stdin;
19a0a8f6-70ce-4458-b337-3fcaf1c626dc	2cd108ce-74ae-4fb0-a0dd-be65bc0d7130	8966b97c-abcf-4f32-8baf-ca3c1cdff8b4	2025-07-06 01:36:05.638898-03	t	2025-07-09 16:41:48.574958-03	2025-07-06 01:36:05.638898-03	2025-07-09 16:41:48.574958-03
e36008a4-0555-489b-b4d0-d7b92f9b76bc	6719a2c7-a3ef-439f-ba26-7a0365d30d26	8966b97c-abcf-4f32-8baf-ca3c1cdff8b4	2025-07-26 00:47:52.579567-03	t	2025-07-26 00:47:52.579567-03	2025-07-26 00:47:52.579567-03	2025-07-26 00:47:52.579567-03
\.


--
-- TOC entry 7235 (class 0 OID 17042)
-- Dependencies: 219
-- Data for Name: players; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.players (id, username, password, email, created_at, last_login, password_hash, race_id, level, experience, is_active, is_online, last_active, updated_at, role, is_banned, ban_reason, ban_expires_at, gold, gems, alliance_id, world_id) FROM stdin;
2cd108ce-74ae-4fb0-a0dd-be65bc0d7130	Hid33n	$2a$10$mesNeWuq6iQVZ5kfZiP.TOTJVwEGdvVOfqW1K/diAAGzEHZBZTdHW	hidden@game.com	2025-07-05 18:01:30.571679	2025-07-05 18:01:30.571679	\N	\N	1	0	t	f	2025-07-05 18:01:30.571679-03	2025-07-05 18:09:21.574035-03	admin	f	\N	\N	1000	100	\N	\N
6719a2c7-a3ef-439f-ba26-7a0365d30d26	test02@gmail.com	$2a$14$80mzUayDO8riEbTmFztJBuoIs7r4rV.OjV59kJULuaxx8HffkyFTe		2025-07-26 00:24:44.037651	2025-07-26 00:24:44.037651	\N	\N	1	0	t	f	2025-07-26 00:24:44.037651-03	2025-07-26 00:24:44.037651-03	user	f	\N	\N	0	0	\N	\N
\.


--
-- TOC entry 7382 (class 0 OID 20780)
-- Dependencies: 385
-- Data for Name: prestige_achievements; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.prestige_achievements (id, name, description, requirements, prestige_reward, title_reward_id, is_hidden, category, created_at) FROM stdin;
1	Primera Victoria	Gana tu primera batalla	{"battles_won": 1}	50	\N	f	COMBAT	2025-06-19 18:32:09.851104
2	Constructor	Construye 10 edificios	{"buildings_constructed": 10}	100	\N	f	ECONOMY	2025-06-19 18:32:09.851104
3	Comerciante	Completa 50 transacciones	{"trades_completed": 50}	75	\N	f	ECONOMY	2025-06-19 18:32:09.851104
4	Social	Ãšnete a una alianza	{"alliance_joined": true}	100	\N	f	SOCIAL	2025-06-19 18:32:09.851104
5	Explorador	Explora 10 regiones	{"regions_explored": 10}	150	\N	f	EXPLORATION	2025-06-19 18:32:09.851104
\.


--
-- TOC entry 7380 (class 0 OID 20736)
-- Dependencies: 383
-- Data for Name: prestige_events; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.prestige_events (id, name, description, start_time, end_time, prestige_multiplier, affected_sources, is_active, created_at) FROM stdin;
\.


--
-- TOC entry 7376 (class 0 OID 20688)
-- Dependencies: 379
-- Data for Name: prestige_levels; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.prestige_levels (id, level, name, description, prestige_required, rewards, title_reward_id, stat_bonuses, created_at) FROM stdin;
1	1	Novato	Un reciÃ©n llegado al mundo	0	{"resources": {"gold": 100}}	\N	\N	2025-06-19 18:32:09.846145
2	2	Aprendiz	Un aprendiz en desarrollo	100	{"resources": {"gold": 250}}	\N	\N	2025-06-19 18:32:09.846145
3	3	Experto	Un experto en su campo	500	{"resources": {"gold": 500}}	\N	\N	2025-06-19 18:32:09.846145
4	4	Maestro	Un maestro reconocido	1000	{"resources": {"gold": 1000}}	\N	\N	2025-06-19 18:32:09.846145
5	5	Leyenda	Una leyenda viviente	2500	{"resources": {"gold": 2500}}	\N	\N	2025-06-19 18:32:09.846145
\.


--
-- TOC entry 7386 (class 0 OID 20900)
-- Dependencies: 389
-- Data for Name: prestige_notifications; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.prestige_notifications (id, player_id, notification_type, message, prestige_points, is_read, created_at) FROM stdin;
\.


--
-- TOC entry 7384 (class 0 OID 20864)
-- Dependencies: 387
-- Data for Name: prestige_rankings; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.prestige_rankings (id, player_id, prestige_level, prestige_points, rank_position, last_updated) FROM stdin;
\.


--
-- TOC entry 7378 (class 0 OID 20723)
-- Dependencies: 381
-- Data for Name: prestige_sources; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.prestige_sources (id, name, description, base_prestige, multiplier_formula, daily_limit, is_active, category, created_at) FROM stdin;
1	Victoria en batalla	Ganar una batalla	10	\N	\N	t	COMBAT	2025-06-19 18:32:09.848833
2	ConstrucciÃ³n de edificio	Construir un nuevo edificio	5	\N	\N	t	ECONOMY	2025-06-19 18:32:09.848833
3	Comercio exitoso	Completar una transacciÃ³n comercial	3	\N	\N	t	ECONOMY	2025-06-19 18:32:09.848833
4	Unirse a alianza	Unirse a una alianza	15	\N	\N	t	SOCIAL	2025-06-19 18:32:09.848833
5	Completar misiÃ³n	Completar una misiÃ³n	8	\N	\N	t	ACHIEVEMENT	2025-06-19 18:32:09.848833
6	Logro desbloqueado	Desbloquear un logro	20	\N	\N	t	ACHIEVEMENT	2025-06-19 18:32:09.848833
7	ExploraciÃ³n	Explorar nueva regiÃ³n	12	\N	\N	t	EXPLORATION	2025-06-19 18:32:09.848833
8	Diplomacia	Establecer relaciones diplomÃ¡ticas	25	\N	\N	t	DIPLOMACY	2025-06-19 18:32:09.848833
\.


--
-- TOC entry 7385 (class 0 OID 20880)
-- Dependencies: 388
-- Data for Name: prestige_stats; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.prestige_stats (id, player_id, titles_earned, achievements_earned, total_prestige_gained, prestige_sources, last_updated) FROM stdin;
\.


--
-- TOC entry 7326 (class 0 OID 19487)
-- Dependencies: 325
-- Data for Name: price_history; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.price_history (id, item_id, "timestamp", price, volume, transactions, created_at) FROM stdin;
\.


--
-- TOC entry 7359 (class 0 OID 20356)
-- Dependencies: 361
-- Data for Name: quest_categories; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.quest_categories (id, name, description, icon, color, display_order, is_active, created_at) FROM stdin;
882d8859-d912-4995-8e12-5b1d6c940b38	Historia	Quests principales de la historia	book	#FF4444	1	t	2025-06-19 18:29:40.832739-03
680311eb-621e-4155-a828-4f1c100ae1d2	Secundarias	Quests secundarias	scroll	#44AA44	2	t	2025-06-19 18:29:40.832739-03
2733bcd6-730d-47e4-9394-9bad8d0ba832	Diarias	Quests diarias	calendar	#FFAA44	3	t	2025-06-19 18:29:40.832739-03
c2b9ffc2-8570-46b3-b080-dd0beb29c39b	Eventos	Quests de eventos especiales	star	#4444FF	4	t	2025-06-19 18:29:40.832739-03
\.


--
-- TOC entry 7362 (class 0 OID 20404)
-- Dependencies: 364
-- Data for Name: quest_notifications; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.quest_notifications (id, player_id, quest_id, notification_type, message, is_read, created_at) FROM stdin;
\.


--
-- TOC entry 7360 (class 0 OID 20370)
-- Dependencies: 362
-- Data for Name: quest_rewards; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.quest_rewards (id, quest_id, reward_type, reward_data, quantity, is_active, created_at) FROM stdin;
\.


--
-- TOC entry 7361 (class 0 OID 20387)
-- Dependencies: 363
-- Data for Name: quest_statistics; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.quest_statistics (id, player_id, total_quests, completed_quests, total_points, average_completion_time, last_quest_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7263 (class 0 OID 17696)
-- Dependencies: 248
-- Data for Name: quests; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.quests (id, name, description, quest_type, category, requirements, rewards, time_limit, min_level, max_level, is_repeatable, is_active, created_at) FROM stdin;
632e1bf9-9b94-48c2-b959-93d85a3e658a	Primera ConstrucciÃ³n	Mejora un edificio al nivel 2	daily	construction	{"building_level": 2}	{"gold": 100, "experience": 50}	86400	1	\N	f	t	2025-06-19 13:00:05.800749-03
09fc6d63-2e52-467a-bf9d-21f40e834afb	Entrenador Novato	Entrena 10 unidades militares	daily	combat	{"units_trained": 10}	{"gold": 150, "experience": 75}	86400	1	\N	f	t	2025-06-19 13:00:05.800749-03
239fbea6-9e85-48bf-b27c-52a4796b880c	Comerciante Inicial	Realiza 3 transacciones comerciales	daily	trade	{"trades_completed": 3}	{"gold": 200, "experience": 100}	86400	2	\N	f	t	2025-06-19 13:00:05.800749-03
dca82b91-952d-421a-a2bf-9bd9b0c10277	Constructor Experto	Mejora 5 edificios diferentes	weekly	construction	{"buildings_upgraded": 5}	{"gold": 1000, "experience": 500}	604800	5	\N	f	t	2025-06-19 13:00:05.800749-03
9ebb7a4a-5f9a-400d-b86c-47d3359ebb4b	Comandante Militar	Entrena 100 unidades militares	weekly	combat	{"units_trained": 100}	{"gold": 1500, "experience": 750}	604800	5	\N	f	t	2025-06-19 13:00:05.800749-03
\.


--
-- TOC entry 7240 (class 0 OID 17154)
-- Dependencies: 224
-- Data for Name: races; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.races (id, name, trait_attack, trait_defense, description, created_at) FROM stdin;
bfbfee4b-8245-49fe-a194-a34985bb88f7	Humanos	10	10	Raza equilibrada, buena para principiantes	2025-06-19 12:59:19.508535-03
f5c676d2-8a43-4890-ae8c-fd996e3d2a14	Elfos	8	12	Raza defensiva, excelente para construcciÃ³n	2025-06-19 12:59:19.508535-03
9ef1a534-99b1-4402-9726-3111bde06fdb	Enanos	12	10	Raza ofensiva, especialistas en minerÃ­a	2025-06-19 12:59:19.508535-03
dea7a027-c1e9-4baa-854d-029aa9774a46	Orcos	15	8	Raza agresiva, maestros del combate	2025-06-19 12:59:19.508535-03
4913fac7-bf1e-492c-9a90-185e9e189b02	Human	10	10	Humans are balanced and adaptable	2025-06-20 13:09:27.425363-03
4a56f0d0-4b46-4446-84da-f1c8c17b302f	Elf	10	10	Elves are skilled with bows and magic	2025-06-20 13:09:27.425363-03
c776a4df-fd1b-4f62-a73f-b337e4e0e550	Dwarf	10	10	Dwarves are strong and resilient	2025-06-20 13:09:27.425363-03
cbd80e13-c5f8-45dd-a1b6-bf401d5f0d22	Orc	10	10	Orcs are fierce warriors	2025-06-20 13:09:27.425363-03
\.


--
-- TOC entry 7336 (class 0 OID 19692)
-- Dependencies: 337
-- Data for Name: ranking_categories; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.ranking_categories (id, name, description, type, sub_type, icon, color, update_interval, max_positions, min_score, score_formula, rewards_enabled, rewards_config, display_order, is_public, show_in_dashboard, is_active, last_updated, created_at) FROM stdin;
1	Mejores Combatientes	Jugadores con mÃ¡s victorias en batalla	player	combat	sword	#ff4444	30	100	0	{"type": "combat", "formula": "battles_won * 100 + units_killed * 10 + heroes_active * 1000"}	f	\N	1	t	t	t	2025-06-19 18:19:09.045415	2025-06-19 18:19:09.045415
2	Mejores Constructores	Jugadores con mÃ¡s edificios construidos	player	building	hammer	#44aa44	60	100	0	{"type": "building", "formula": "buildings_built * 100 + buildings_upgraded * 200 + total_population * 10"}	f	\N	2	t	t	t	2025-06-19 18:19:09.045415	2025-06-19 18:19:09.045415
3	Mejores Investigadores	Jugadores con mÃ¡s tecnologÃ­as investigadas	player	research	book	#4444ff	60	100	0	{"type": "research", "formula": "research_points + technologies_researched * 1000"}	f	\N	3	t	t	t	2025-06-19 18:19:09.045415	2025-06-19 18:19:09.045415
4	Mejores Comerciantes	Jugadores con mÃ¡s transacciones en el mercado	player	economy	coins	#ffaa44	30	100	0	{"type": "economy", "formula": "total_earned + market_transactions * 100 + items_sold * 50"}	f	\N	4	t	t	t	2025-06-19 18:19:09.045415	2025-06-19 18:19:09.045415
5	Mejores Alianzas	Alianzas con mÃ¡s miembros y victorias	alliance	general	shield	#aa44ff	60	50	0	{"type": "alliance", "formula": "total_members * 1000 + battles_won * 500 + total_villages * 100"}	f	\N	5	t	t	t	2025-06-19 18:19:09.045415	2025-06-19 18:19:09.045415
6	Aldeas MÃ¡s Pobladas	Aldeas con mayor poblaciÃ³n	village	population	house	#44ffaa	60	100	0	{"type": "village", "formula": "population * 10 + total_building_levels * 50"}	f	\N	6	t	t	t	2025-06-19 18:19:09.045415	2025-06-19 18:19:09.045415
7	Mejores HÃ©roes	Jugadores con hÃ©roes mÃ¡s poderosos	player	heroes	crown	#ffaa44	60	100	0	{"type": "heroes", "formula": "heroes_active * 1000 + heroes_upgraded * 500"}	f	\N	7	t	t	t	2025-06-19 18:19:09.045415	2025-06-19 18:19:09.045415
8	Actividad General	Jugadores mÃ¡s activos	player	activity	clock	#aaaaaa	30	100	0	{"type": "activity", "formula": "days_active * 1000 + total_play_time / 60"}	f	\N	8	t	t	t	2025-06-19 18:19:09.045415	2025-06-19 18:19:09.045415
\.


--
-- TOC entry 7342 (class 0 OID 19911)
-- Dependencies: 343
-- Data for Name: ranking_entries; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.ranking_entries (id, ranking_type_id, player_id, alliance_id, village_id, world_id, rank_position, total_points, previous_rank, rank_change, last_updated, created_at) FROM stdin;
\.


--
-- TOC entry 7340 (class 0 OID 19844)
-- Dependencies: 341
-- Data for Name: ranking_history; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.ranking_history (id, category_id, season_id, entity_type, entity_id, "position", score, recorded_at, created_at) FROM stdin;
\.


--
-- TOC entry 7270 (class 0 OID 17820)
-- Dependencies: 255
-- Data for Name: ranking_positions; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.ranking_positions (id, ranking_id, player_id, "position", score, previous_position, updated_at) FROM stdin;
\.


--
-- TOC entry 7346 (class 0 OID 20007)
-- Dependencies: 347
-- Data for Name: ranking_rewards; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.ranking_rewards (id, ranking_type_id, rank_min, rank_max, reward_type, reward_data, is_active, created_at) FROM stdin;
e57dc0dc-f0d9-41fe-8eca-cb14d068222b	3e02d28d-d933-4b6e-8295-7cd80ae90238	1	1	resources	{"gold": 10000, "experience": 5000}	t	2025-06-19 18:20:34.337722-03
db0c8f8f-6256-45b3-982b-c21ca4733677	3e02d28d-d933-4b6e-8295-7cd80ae90238	2	3	resources	{"gold": 5000, "experience": 2500}	t	2025-06-19 18:20:34.337722-03
d27d23dc-1067-4bd5-b02a-514b254676fc	3e02d28d-d933-4b6e-8295-7cd80ae90238	4	10	resources	{"gold": 1000, "experience": 500}	t	2025-06-19 18:20:34.337722-03
7f35b80b-3b5b-4ea5-80b8-3c160b76be33	6bde65c7-908e-45f0-a0b4-b4070ac5c093	1	1	items	{"premium_chest": 1, "experience_boost": 1}	t	2025-06-19 18:20:34.337722-03
0a32367b-e880-459a-abe1-a68def6c74ab	ca10e1f1-cb28-4328-be53-8bddc765b459	1	1	currency	{"gems": 100, "gold": 5000}	t	2025-06-19 18:20:34.337722-03
ab75de3a-39be-4515-88e9-7564efe38aa7	ffffea62-2549-4558-84b0-d2e956e94586	1	1	resources	{"experience": 10000, "alliance_funds": 50000}	t	2025-06-19 18:20:34.337722-03
\.


--
-- TOC entry 7347 (class 0 OID 20023)
-- Dependencies: 348
-- Data for Name: ranking_rewards_claimed; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.ranking_rewards_claimed (id, reward_id, player_id, claimed_at) FROM stdin;
\.


--
-- TOC entry 7338 (class 0 OID 19713)
-- Dependencies: 339
-- Data for Name: ranking_seasons; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.ranking_seasons (id, name, description, season_number, start_date, end_date, is_active, categories, rewards_enabled, rewards_config, total_participants, total_alliances, total_villages, status, created_at, updated_at) FROM stdin;
1	Temporada 1	La primera temporada de rankings	1	2025-06-19 18:19:09.048971	2025-07-19 18:19:09.048971	t	\N	f	\N	0	0	0	active	2025-06-19 18:19:09.048971	2025-06-19 18:19:09.048971
\.


--
-- TOC entry 7341 (class 0 OID 19894)
-- Dependencies: 342
-- Data for Name: ranking_types; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.ranking_types (id, name, description, category, calculation_method, update_frequency, is_active, created_at) FROM stdin;
3e02d28d-d933-4b6e-8295-7cd80ae90238	Poder Militar	Ranking basado en victorias de batalla y unidades	player	points	daily	t	2025-06-19 18:20:34.335351-03
6bde65c7-908e-45f0-a0b4-b4070ac5c093	Nivel de Jugador	Ranking basado en nivel y experiencia	player	level	daily	t	2025-06-19 18:20:34.335351-03
ca10e1f1-cb28-4328-be53-8bddc765b459	Riqueza	Ranking basado en recursos y riqueza total	player	points	daily	t	2025-06-19 18:20:34.335351-03
ec202c68-87c9-4241-aa10-c7939e9a3265	Construccion	Ranking basado en edificios construidos	player	points	daily	t	2025-06-19 18:20:34.335351-03
ffffea62-2549-4558-84b0-d2e956e94586	Alianzas Poderosas	Ranking de alianzas por poder total	alliance	points	weekly	t	2025-06-19 18:20:34.335351-03
9183d8c2-e91f-4e10-9e9f-6f8573644e31	Aldeas Prosperas	Ranking de aldeas por desarrollo	village	points	daily	t	2025-06-19 18:20:34.335351-03
5d8729c6-66f5-4e33-9147-1b161d993826	Mundos Activos	Ranking de mundos por actividad	world	points	weekly	t	2025-06-19 18:20:34.335351-03
bfb333a4-145a-4166-bbdc-9f254a78124f	Logros	Ranking basado en logros desbloqueados	player	achievements	daily	t	2025-06-19 18:20:34.335351-03
\.


--
-- TOC entry 7269 (class 0 OID 17805)
-- Dependencies: 254
-- Data for Name: rankings; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.rankings (id, ranking_type, world_id, is_global, update_frequency, last_updated, created_at) FROM stdin;
1311aa3d-cb44-4133-bb82-87151412a320	power	\N	t	3600	2025-06-19 13:00:05.802782-03	2025-06-19 13:00:05.802782-03
73448b22-fcd6-4556-b85a-cd88f768b432	wealth	\N	t	3600	2025-06-19 13:00:05.802782-03	2025-06-19 13:00:05.802782-03
583468dd-5aa0-4d31-896e-9beedf96158e	military	\N	t	3600	2025-06-19 13:00:05.802782-03	2025-06-19 13:00:05.802782-03
a924b8be-fa8f-42a0-b0f0-f12e734895ce	construction	\N	t	3600	2025-06-19 13:00:05.802782-03	2025-06-19 13:00:05.802782-03
\.


--
-- TOC entry 7288 (class 0 OID 18469)
-- Dependencies: 283
-- Data for Name: research_queue; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.research_queue (id, player_id, technology_id, "position", start_time, end_time, status, created_at) FROM stdin;
\.


--
-- TOC entry 7292 (class 0 OID 18535)
-- Dependencies: 287
-- Data for Name: research_statistics; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.research_statistics (player_id, total_technologies, military_techs, economic_techs, social_techs, scientific_techs, total_levels, research_time, resources_spent, last_research_at, research_efficiency, updated_at) FROM stdin;
\.


--
-- TOC entry 7238 (class 0 OID 17076)
-- Dependencies: 222
-- Data for Name: resources; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.resources (id, village_id, wood, stone, food, gold, last_updated) FROM stdin;
878915d4-e3b7-489e-8c80-a5b1c91f2da5	82df7336-33e9-4293-a195-c03f68cdd1db	300	300	300	100	2025-07-26 01:14:42.585978
\.


--
-- TOC entry 7278 (class 0 OID 18017)
-- Dependencies: 267
-- Data for Name: security_logs; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.security_logs (id, event_type, player_id, ip_address, user_agent, success, failure_reason, data, created_at) FROM stdin;
\.


--
-- TOC entry 7280 (class 0 OID 18045)
-- Dependencies: 269
-- Data for Name: server_metrics; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.server_metrics (id, metric_name, metric_value, metric_unit, tags, recorded_at) FROM stdin;
\.


--
-- TOC entry 7265 (class 0 OID 17733)
-- Dependencies: 250
-- Data for Name: special_buildings; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.special_buildings (id, village_id, building_type, name, description, level, max_level, is_constructing, construction_completion_time, effects, requirements, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7268 (class 0 OID 17784)
-- Dependencies: 253
-- Data for Name: special_event_participation; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.special_event_participation (id, event_id, player_id, score, rank, rewards_claimed, joined_at) FROM stdin;
\.


--
-- TOC entry 7267 (class 0 OID 17768)
-- Dependencies: 252
-- Data for Name: special_events; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.special_events (id, name, description, event_type, start_time, end_time, world_id, is_global, requirements, rewards, is_active, created_at) FROM stdin;
\.


--
-- TOC entry 7266 (class 0 OID 17751)
-- Dependencies: 251
-- Data for Name: special_resources; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.special_resources (id, village_id, resource_type, quantity, max_quantity, production_rate, last_updated) FROM stdin;
\.


--
-- TOC entry 7348 (class 0 OID 20042)
-- Dependencies: 349
-- Data for Name: statistics_snapshots; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.statistics_snapshots (id, snapshot_date, ranking_type_id, snapshot_data, created_at) FROM stdin;
\.


--
-- TOC entry 7281 (class 0 OID 18054)
-- Dependencies: 270
-- Data for Name: system_alerts; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.system_alerts (id, alert_type, severity, title, message, is_active, acknowledged_by, acknowledged_at, resolved_at, data, created_at) FROM stdin;
\.


--
-- TOC entry 7282 (class 0 OID 18069)
-- Dependencies: 271
-- Data for Name: system_config; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.system_config (id, config_key, config_value, config_type, description, is_public, updated_by, updated_at) FROM stdin;
3e71c157-8a23-4ab9-af48-12ca6765bda0	server_name	MMO Server	string	Nombre del servidor	t	\N	2025-06-19 13:00:23.051901-03
ea030aae-ee68-4355-b938-710f9f168fa7	max_players_per_world	1000	integer	MÃ¡ximo nÃºmero de jugadores por mundo	t	\N	2025-06-19 13:00:23.051901-03
2a13d9a5-6ed7-4ac6-a65b-54fa590a3479	maintenance_mode	false	boolean	Modo de mantenimiento	t	\N	2025-06-19 13:00:23.051901-03
d0d5df55-0619-482c-a2a0-69898a1a9689	chat_enabled	true	boolean	Chat habilitado	t	\N	2025-06-19 13:00:23.051901-03
a85a9a3f-65cb-4fe1-8ed2-cba923099b74	trade_enabled	true	boolean	Comercio habilitado	t	\N	2025-06-19 13:00:23.051901-03
0fcb75d3-7e00-4eee-9d1f-dcc03a02dee4	battle_enabled	true	boolean	Batallas habilitadas	t	\N	2025-06-19 13:00:23.051901-03
1f52cc66-48c6-4f5e-ad1b-6820e3964f1e	resource_generation_interval	300	integer	Intervalo de generaciÃ³n de recursos (segundos)	f	\N	2025-06-19 13:00:23.051901-03
b6988fe1-386d-47a2-9bf1-b4a0574b75f2	backup_retention_days	30	integer	DÃ­as de retenciÃ³n de backups	f	\N	2025-06-19 13:00:23.051901-03
e96e08f7-0caa-4ac9-8918-66f6346b4cd4	log_retention_days	90	integer	DÃ­as de retenciÃ³n de logs	f	\N	2025-06-19 13:00:23.051901-03
75d430e9-0af4-4cd8-a3fb-6d9dc8b73b1c	max_login_attempts	5	integer	MÃ¡ximo intentos de login	f	\N	2025-06-19 13:00:23.051901-03
\.


--
-- TOC entry 7277 (class 0 OID 18003)
-- Dependencies: 266
-- Data for Name: system_logs; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.system_logs (id, log_level, category, message, data, player_id, ip_address, user_agent, created_at) FROM stdin;
\.


--
-- TOC entry 7284 (class 0 OID 18096)
-- Dependencies: 273
-- Data for Name: task_executions; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.task_executions (id, task_id, started_at, completed_at, status, result_message, execution_time, data, created_at) FROM stdin;
\.


--
-- TOC entry 7332 (class 0 OID 19618)
-- Dependencies: 331
-- Data for Name: taxes; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.taxes (id, tax_name, description, tax_type, rate, min_amount, max_amount, is_active, created_at) FROM stdin;
d8fad23b-b4cb-4972-83de-9e739bbde047	Impuesto de Comercio	Impuesto sobre transacciones comerciales	trade	0.0500	100.00	\N	t	2025-06-19 18:19:01.377535-03
62ddd4d7-777a-4e4e-adf7-30d6b601b2d3	Impuesto de Ingresos	Impuesto sobre ganancias	income	0.1000	1000.00	\N	t	2025-06-19 18:19:01.377535-03
e00e10ee-cc95-4b09-8ee1-818e6de800a3	Impuesto de Propiedad	Impuesto sobre propiedades	property	0.0200	500.00	\N	t	2025-06-19 18:19:01.377535-03
a4bb92f0-42e3-4f5d-bbd7-be006d416614	Impuesto de Ventas	Impuesto sobre ventas	sales	0.0300	50.00	\N	t	2025-06-19 18:19:01.377535-03
\.


--
-- TOC entry 7259 (class 0 OID 17615)
-- Dependencies: 244
-- Data for Name: technologies; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.technologies (id, name, display_name, description, category, max_level, base_research_time, base_cost_wood, base_cost_stone, base_cost_food, base_cost_gold, cost_multiplier, prerequisites, effects, created_at, sub_category, is_active, level, research_time, research_cost, requirements, icon, color, is_special, updated_at) FROM stdin;
d18cbf66-35c4-45ad-aede-6b6035d4ae6c	military_tactics	TÃ¡cticas Militares	Mejora el ataque de todas las unidades	military	10	1800	100	50	25	10	1.50	\N	{"unit_attack_bonus": 5}	2025-06-19 13:00:05.797799-03	\N	t	1	1800	{"food": 25, "gold": 10, "wood": 100, "stone": 50}	\N	\N	\N	f	2025-06-19 13:47:04.103336-03
72ec9f6a-0785-4b7e-9ce3-94505af23653	defensive_strategy	Estrategia Defensiva	Mejora la defensa de todas las unidades	military	10	1800	100	50	25	10	1.50	\N	{"unit_defense_bonus": 5}	2025-06-19 13:00:05.797799-03	\N	t	1	1800	{"food": 25, "gold": 10, "wood": 100, "stone": 50}	\N	\N	\N	f	2025-06-19 13:47:04.103336-03
57e91727-426c-4dea-a4a5-d16fdfd404cf	resource_efficiency	Eficiencia de Recursos	Aumenta la producciÃ³n de recursos	economy	10	1200	50	25	50	5	1.50	\N	{"resource_production_bonus": 10}	2025-06-19 13:00:05.797799-03	\N	t	1	1200	{"food": 50, "gold": 5, "wood": 50, "stone": 25}	\N	\N	\N	f	2025-06-19 13:47:04.103336-03
cf222954-c9af-4e5f-9f1a-511797763290	construction_speed	Velocidad de ConstrucciÃ³n	Reduce el tiempo de construcciÃ³n	construction	10	2400	200	100	50	20	1.50	\N	{"construction_speed_bonus": 10}	2025-06-19 13:00:05.797799-03	\N	t	1	2400	{"food": 50, "gold": 20, "wood": 200, "stone": 100}	\N	\N	\N	f	2025-06-19 13:47:04.103336-03
7275389c-d7b4-4f0d-9ac9-dceba7a8bf18	trade_mastery	MaestrÃ­a Comercial	Mejora las ganancias del comercio	economy	10	3600	100	50	25	50	1.50	\N	{"trade_bonus": 15}	2025-06-19 13:00:05.797799-03	\N	t	1	3600	{"food": 25, "gold": 50, "wood": 100, "stone": 50}	\N	\N	\N	f	2025-06-19 13:47:04.103336-03
dd73a4ae-0077-474b-b754-7fa81d83f291	leather_armor	Armadura de Cuero	Mejora la defensa de las unidades de infanterÃ­a	military	5	3600	0	0	0	0	1.50	\N	{"defense": 5}	2025-06-19 13:47:04.151214-03	infantry	t	1	300	{"food": 50, "wood": 100}	{}	armor	#8B4513	f	2025-06-19 13:47:04.151214-03
d3bec494-125b-4353-939e-32b3db700595	iron_sword	Espada de Hierro	Aumenta el ataque de las unidades de infanterÃ­a	military	5	3600	0	0	0	0	1.50	\N	{"attack": 8}	2025-06-19 13:47:04.151214-03	infantry	t	1	600	{"wood": 150, "stone": 100}	{"1": {"level": 1}}	sword	#696969	f	2025-06-19 13:47:04.151214-03
f0773f49-5ea9-4b1c-8153-4b9babc9e1ca	advanced_farming	Agricultura Avanzada	Aumenta la producciÃ³n de comida	economic	5	3600	0	0	0	0	1.50	\N	{"food_production": 10}	2025-06-19 13:47:04.151214-03	farming	t	1	300	{"food": 50, "wood": 100}	{}	wheat	#FFD700	f	2025-06-19 13:47:04.151214-03
dfaacc6e-baa9-49dc-9cb4-e41366ab993e	improved_mining	MinerÃ­a Mejorada	Aumenta la producciÃ³n de piedra	economic	5	3600	0	0	0	0	1.50	\N	{"stone_production": 15}	2025-06-19 13:47:04.151214-03	mining	t	1	600	{"wood": 150, "stone": 100}	{"1": {"level": 1}}	pickaxe	#696969	f	2025-06-19 13:47:04.151214-03
1694c857-cb70-4dae-b070-ea885bb1841f	education	EducaciÃ³n	Aumenta la experiencia ganada	social	5	3600	0	0	0	0	1.50	\N	{"experience_gain": 10}	2025-06-19 13:47:04.151214-03	education	t	1	300	{"food": 50, "wood": 100}	{}	book	#4169E1	f	2025-06-19 13:47:04.151214-03
037d0f42-6326-4740-b866-1a7f7cdddc43	mathematics	MatemÃ¡ticas	Reduce el tiempo de investigaciÃ³n	scientific	5	3600	0	0	0	0	1.50	\N	{"research_time": -5}	2025-06-19 13:47:04.151214-03	mathematics	t	1	300	{"food": 50, "wood": 100}	{}	calculator	#4169E1	f	2025-06-19 13:47:04.151214-03
\.


--
-- TOC entry 7291 (class 0 OID 18520)
-- Dependencies: 286
-- Data for Name: technology_costs; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.technology_costs (id, technology_id, level, resource_type, amount, created_at) FROM stdin;
\.


--
-- TOC entry 7289 (class 0 OID 18488)
-- Dependencies: 284
-- Data for Name: technology_effects; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.technology_effects (id, technology_id, effect_type, target, value, is_percentage, level, created_at) FROM stdin;
\.


--
-- TOC entry 7290 (class 0 OID 18501)
-- Dependencies: 285
-- Data for Name: technology_requirements; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.technology_requirements (id, technology_id, required_tech_id, required_level, required_village, created_at) FROM stdin;
\.


--
-- TOC entry 7372 (class 0 OID 20638)
-- Dependencies: 375
-- Data for Name: title_categories; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.title_categories (id, name, description, color, icon, sort_order, is_active, created_at, updated_at) FROM stdin;
1	Nobleza	TÃ­tulos de nobleza y realeza	#FFD700	crown	1	t	2025-06-19 18:32:09.839663	2025-06-19 18:32:09.839663
2	Militar	TÃ­tulos militares y de combate	#C0C0C0	sword	2	t	2025-06-19 18:32:09.839663	2025-06-19 18:32:09.839663
3	Comercio	TÃ­tulos relacionados con el comercio	#FFA500	coins	3	t	2025-06-19 18:32:09.839663	2025-06-19 18:32:09.839663
4	ExploraciÃ³n	TÃ­tulos de exploradores y aventureros	#87CEEB	compass	4	t	2025-06-19 18:32:09.839663	2025-06-19 18:32:09.839663
5	Diplomacia	TÃ­tulos diplomÃ¡ticos y polÃ­ticos	#9370DB	handshake	5	t	2025-06-19 18:32:09.839663	2025-06-19 18:32:09.839663
6	ArtesanÃ­a	TÃ­tulos de artesanos y constructores	#8B4513	hammer	6	t	2025-06-19 18:32:09.839663	2025-06-19 18:32:09.839663
7	Eventos	TÃ­tulos especiales de eventos	#FF69B4	star	7	t	2025-06-19 18:32:09.839663	2025-06-19 18:32:09.839663
8	Logros	TÃ­tulos por logros especiales	#32CD32	trophy	8	t	2025-06-19 18:32:09.839663	2025-06-19 18:32:09.839663
\.


--
-- TOC entry 7374 (class 0 OID 20654)
-- Dependencies: 377
-- Data for Name: titles; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.titles (id, category_id, name, description, requirements, prestige_bonus, stat_bonuses, rarity, is_hidden, is_event_only, event_id, max_holders, current_holders, created_at, updated_at) FROM stdin;
1	1	Campesino	Un humilde campesino del reino	{"level": 1}	0	\N	COMMON	f	f	\N	\N	0	2025-06-19 18:32:09.842599	2025-06-19 18:32:09.842599
2	1	Ciudadano	Un ciudadano respetado	{"level": 5, "buildings": 3}	10	\N	COMMON	f	f	\N	\N	0	2025-06-19 18:32:09.842599	2025-06-19 18:32:09.842599
3	1	Mercader	Un comerciante exitoso	{"level": 10, "trade_volume": 1000}	25	\N	UNCOMMON	f	f	\N	\N	0	2025-06-19 18:32:09.842599	2025-06-19 18:32:09.842599
4	2	Recluta	Un soldado novato	{"level": 3, "battles_won": 1}	15	\N	COMMON	f	f	\N	\N	0	2025-06-19 18:32:09.842599	2025-06-19 18:32:09.842599
5	2	GuardiÃ¡n	Un defensor experimentado	{"level": 15, "battles_won": 10}	50	\N	UNCOMMON	f	f	\N	\N	0	2025-06-19 18:32:09.842599	2025-06-19 18:32:09.842599
6	3	Comerciante	Un comerciante establecido	{"level": 8, "trade_volume": 5000}	30	\N	UNCOMMON	f	f	\N	\N	0	2025-06-19 18:32:09.842599	2025-06-19 18:32:09.842599
7	4	Explorador	Un aventurero intrÃ©pido	{"level": 12, "explored_regions": 5}	40	\N	UNCOMMON	f	f	\N	\N	0	2025-06-19 18:32:09.842599	2025-06-19 18:32:09.842599
8	5	DiplomÃ¡tico	Un negociador hÃ¡bil	{"level": 20, "alliance_level": 3}	75	\N	RARE	f	f	\N	\N	0	2025-06-19 18:32:09.842599	2025-06-19 18:32:09.842599
\.


--
-- TOC entry 7252 (class 0 OID 17432)
-- Dependencies: 236
-- Data for Name: trade_offers; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.trade_offers (id, player_id, village_id, offer_type, resource_type, quantity, price_per_unit, total_price, is_active, expires_at, created_at) FROM stdin;
\.


--
-- TOC entry 7273 (class 0 OID 17883)
-- Dependencies: 258
-- Data for Name: trade_reports; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.trade_reports (id, transaction_id, player_id, report_type, trade_data, created_at) FROM stdin;
\.


--
-- TOC entry 7253 (class 0 OID 17455)
-- Dependencies: 237
-- Data for Name: trade_transactions; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.trade_transactions (id, buyer_id, seller_id, offer_id, resource_type, quantity, price_per_unit, total_amount, transaction_time) FROM stdin;
\.


--
-- TOC entry 7244 (class 0 OID 17231)
-- Dependencies: 228
-- Data for Name: training_queue; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.training_queue (id, village_id, unit_type_id, quantity, queued_at, completes_at, status) FROM stdin;
\.


--
-- TOC entry 7251 (class 0 OID 17399)
-- Dependencies: 235
-- Data for Name: troop_movements; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.troop_movements (id, player_id, from_village_id, to_village_id, units, movement_type, start_time, arrival_time, status, battle_id) FROM stdin;
\.


--
-- TOC entry 7242 (class 0 OID 17189)
-- Dependencies: 226
-- Data for Name: unit_types; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.unit_types (id, name, display_name, description, attack, defense, speed, training_time, cost_wood, cost_stone, cost_food, cost_gold, food_consumption, created_at) FROM stdin;
9c51a51f-b864-452d-9e33-98d9b53adb60	soldier	Soldado	Unidad bÃ¡sica de infanterÃ­a	10	10	10	60	50	30	20	10	1	2025-06-19 12:59:19.525956-03
e86d571c-e971-4cef-a24b-cc226eb2753d	archer	Arquero	Unidad de ataque a distancia	15	8	12	90	60	40	25	15	1	2025-06-19 12:59:19.525956-03
f2b368d2-4673-4c77-a20f-d13f95abfa89	cavalry	CaballerÃ­a	Unidad rÃ¡pida y poderosa	20	15	20	180	100	60	40	30	2	2025-06-19 12:59:19.525956-03
4546281b-4004-4d06-9ea5-006fbee75beb	spearman	Lancero	Unidad defensiva especializada	8	18	8	75	40	50	20	12	1	2025-06-19 12:59:19.525956-03
aafd175f-e22d-46ca-ba12-7cadfb2c09ca	swordsman	EspadachÃ­n	Unidad de Ã©lite de infanterÃ­a	25	20	12	240	150	100	60	50	3	2025-06-19 12:59:19.525956-03
86913762-2a50-472c-8dc6-e482d0e19fdd	knight	Caballero	Unidad de Ã©lite montada	30	25	25	360	200	150	80	100	4	2025-06-19 12:59:19.525956-03
\.


--
-- TOC entry 7243 (class 0 OID 17209)
-- Dependencies: 227
-- Data for Name: units; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.units (id, village_id, unit_type_id, quantity, is_training, training_completion_time, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 7344 (class 0 OID 19967)
-- Dependencies: 345
-- Data for Name: village_statistics; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.village_statistics (village_id, total_points, building_levels, unit_count, resource_production, defense_strength, attack_strength, population, last_updated) FROM stdin;
\.


--
-- TOC entry 7237 (class 0 OID 17059)
-- Dependencies: 221
-- Data for Name: villages; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.villages (id, player_id, world_id, name, x_coordinate, y_coordinate, created_at) FROM stdin;
82df7336-33e9-4293-a195-c03f68cdd1db	2cd108ce-74ae-4fb0-a0dd-be65bc0d7130	8966b97c-abcf-4f32-8baf-ca3c1cdff8b4	Mi Aldea	0	0	2025-07-09 16:41:48.615816
\.


--
-- TOC entry 7345 (class 0 OID 19987)
-- Dependencies: 346
-- Data for Name: world_statistics; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.world_statistics (world_id, total_players, active_players, total_alliances, total_villages, total_battles, average_player_level, total_resources_produced, last_updated) FROM stdin;
\.


--
-- TOC entry 7236 (class 0 OID 17053)
-- Dependencies: 220
-- Data for Name: worlds; Type: TABLE DATA; Schema: public; Owner: etheria_user
--

COPY public.worlds (id, name, max_players, is_active, created_at, description, current_players, world_type, updated_at, is_online, status, last_started_at, last_stopped_at) FROM stdin;
8966b97c-abcf-4f32-8baf-ca3c1cdff8b4	test0	1000	t	2025-07-05 18:18:58.939485	1	2	pvp	2025-07-26 00:47:52.579567-03	t	online	2025-07-05 18:19:03.536466-03	\N
\.


--
-- TOC entry 7587 (class 0 OID 0)
-- Dependencies: 351
-- Name: achievement_categories_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.achievement_categories_id_seq', 8, true);


--
-- TOC entry 7588 (class 0 OID 0)
-- Dependencies: 353
-- Name: achievement_events_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.achievement_events_id_seq', 1, false);


--
-- TOC entry 7589 (class 0 OID 0)
-- Dependencies: 305
-- Name: battle_formations_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.battle_formations_id_seq', 1, false);


--
-- TOC entry 7590 (class 0 OID 0)
-- Dependencies: 390
-- Name: building_configs_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.building_configs_id_seq', 24, true);


--
-- TOC entry 7591 (class 0 OID 0)
-- Dependencies: 316
-- Name: economy_system_config_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.economy_system_config_id_seq', 1, true);


--
-- TOC entry 7592 (class 0 OID 0)
-- Dependencies: 291
-- Name: hero_events_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.hero_events_id_seq', 1, false);


--
-- TOC entry 7593 (class 0 OID 0)
-- Dependencies: 289
-- Name: hero_system_config_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.hero_system_config_id_seq', 1, false);


--
-- TOC entry 7594 (class 0 OID 0)
-- Dependencies: 318
-- Name: market_items_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.market_items_id_seq', 10, true);


--
-- TOC entry 7595 (class 0 OID 0)
-- Dependencies: 320
-- Name: market_statistics_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.market_statistics_id_seq', 1, true);


--
-- TOC entry 7596 (class 0 OID 0)
-- Dependencies: 322
-- Name: market_trends_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.market_trends_id_seq', 1, false);


--
-- TOC entry 7597 (class 0 OID 0)
-- Dependencies: 303
-- Name: military_units_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.military_units_id_seq', 1, false);


--
-- TOC entry 7598 (class 0 OID 0)
-- Dependencies: 384
-- Name: prestige_achievements_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.prestige_achievements_id_seq', 5, true);


--
-- TOC entry 7599 (class 0 OID 0)
-- Dependencies: 382
-- Name: prestige_events_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.prestige_events_id_seq', 1, false);


--
-- TOC entry 7600 (class 0 OID 0)
-- Dependencies: 378
-- Name: prestige_levels_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.prestige_levels_id_seq', 5, true);


--
-- TOC entry 7601 (class 0 OID 0)
-- Dependencies: 380
-- Name: prestige_sources_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.prestige_sources_id_seq', 8, true);


--
-- TOC entry 7602 (class 0 OID 0)
-- Dependencies: 324
-- Name: price_history_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.price_history_id_seq', 1, false);


--
-- TOC entry 7603 (class 0 OID 0)
-- Dependencies: 336
-- Name: ranking_categories_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.ranking_categories_id_seq', 8, true);


--
-- TOC entry 7604 (class 0 OID 0)
-- Dependencies: 340
-- Name: ranking_history_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.ranking_history_id_seq', 1, false);


--
-- TOC entry 7605 (class 0 OID 0)
-- Dependencies: 338
-- Name: ranking_seasons_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.ranking_seasons_id_seq', 1, true);


--
-- TOC entry 7606 (class 0 OID 0)
-- Dependencies: 374
-- Name: title_categories_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.title_categories_id_seq', 8, true);


--
-- TOC entry 7607 (class 0 OID 0)
-- Dependencies: 376
-- Name: titles_id_seq; Type: SEQUENCE SET; Schema: public; Owner: etheria_user
--

SELECT pg_catalog.setval('public.titles_id_seq', 8, true);


--
-- TOC entry 6698 (class 2606 OID 20105)
-- Name: achievement_categories achievement_categories_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_categories
    ADD CONSTRAINT achievement_categories_name_key UNIQUE (name);


--
-- TOC entry 6700 (class 2606 OID 20103)
-- Name: achievement_categories achievement_categories_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_categories
    ADD CONSTRAINT achievement_categories_pkey PRIMARY KEY (id);


--
-- TOC entry 6704 (class 2606 OID 20147)
-- Name: achievement_events achievement_events_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_events
    ADD CONSTRAINT achievement_events_pkey PRIMARY KEY (id);


--
-- TOC entry 6725 (class 2606 OID 20291)
-- Name: achievement_leaderboard achievement_leaderboard_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_leaderboard
    ADD CONSTRAINT achievement_leaderboard_pkey PRIMARY KEY (id);


--
-- TOC entry 6727 (class 2606 OID 20293)
-- Name: achievement_leaderboard achievement_leaderboard_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_leaderboard
    ADD CONSTRAINT achievement_leaderboard_player_id_key UNIQUE (player_id);


--
-- TOC entry 6731 (class 2606 OID 20310)
-- Name: achievement_milestones achievement_milestones_achievement_id_milestone_number_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_milestones
    ADD CONSTRAINT achievement_milestones_achievement_id_milestone_number_key UNIQUE (achievement_id, milestone_number);


--
-- TOC entry 6733 (class 2606 OID 20308)
-- Name: achievement_milestones achievement_milestones_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_milestones
    ADD CONSTRAINT achievement_milestones_pkey PRIMARY KEY (id);


--
-- TOC entry 6736 (class 2606 OID 20327)
-- Name: achievement_notifications achievement_notifications_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_notifications
    ADD CONSTRAINT achievement_notifications_pkey PRIMARY KEY (id);


--
-- TOC entry 6709 (class 2606 OID 20236)
-- Name: achievement_progress achievement_progress_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_progress
    ADD CONSTRAINT achievement_progress_pkey PRIMARY KEY (id);


--
-- TOC entry 6711 (class 2606 OID 20238)
-- Name: achievement_progress achievement_progress_player_id_achievement_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_progress
    ADD CONSTRAINT achievement_progress_player_id_achievement_id_key UNIQUE (player_id, achievement_id);


--
-- TOC entry 6715 (class 2606 OID 20260)
-- Name: achievement_rewards achievement_rewards_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_rewards
    ADD CONSTRAINT achievement_rewards_pkey PRIMARY KEY (id);


--
-- TOC entry 6719 (class 2606 OID 20275)
-- Name: achievement_statistics achievement_statistics_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_statistics
    ADD CONSTRAINT achievement_statistics_pkey PRIMARY KEY (id);


--
-- TOC entry 6721 (class 2606 OID 20277)
-- Name: achievement_statistics achievement_statistics_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_statistics
    ADD CONSTRAINT achievement_statistics_player_id_key UNIQUE (player_id);


--
-- TOC entry 6310 (class 2606 OID 17487)
-- Name: achievements achievements_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievements
    ADD CONSTRAINT achievements_name_key UNIQUE (name);


--
-- TOC entry 6312 (class 2606 OID 17485)
-- Name: achievements achievements_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievements
    ADD CONSTRAINT achievements_pkey PRIMARY KEY (id);


--
-- TOC entry 6427 (class 2606 OID 17997)
-- Name: admin_actions admin_actions_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.admin_actions
    ADD CONSTRAINT admin_actions_pkey PRIMARY KEY (id);


--
-- TOC entry 6417 (class 2606 OID 17963)
-- Name: admin_roles admin_roles_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.admin_roles
    ADD CONSTRAINT admin_roles_name_key UNIQUE (name);


--
-- TOC entry 6419 (class 2606 OID 17961)
-- Name: admin_roles admin_roles_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.admin_roles
    ADD CONSTRAINT admin_roles_pkey PRIMARY KEY (id);


--
-- TOC entry 6421 (class 2606 OID 17971)
-- Name: admins admins_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.admins
    ADD CONSTRAINT admins_pkey PRIMARY KEY (id);


--
-- TOC entry 6423 (class 2606 OID 17973)
-- Name: admins admins_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.admins
    ADD CONSTRAINT admins_player_id_key UNIQUE (player_id);


--
-- TOC entry 6285 (class 2606 OID 17349)
-- Name: alliance_members alliance_members_alliance_id_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.alliance_members
    ADD CONSTRAINT alliance_members_alliance_id_player_id_key UNIQUE (alliance_id, player_id);


--
-- TOC entry 6287 (class 2606 OID 17347)
-- Name: alliance_members alliance_members_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.alliance_members
    ADD CONSTRAINT alliance_members_pkey PRIMARY KEY (id);


--
-- TOC entry 6674 (class 2606 OID 19961)
-- Name: alliance_statistics alliance_statistics_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.alliance_statistics
    ADD CONSTRAINT alliance_statistics_pkey PRIMARY KEY (alliance_id);


--
-- TOC entry 6278 (class 2606 OID 17325)
-- Name: alliances alliances_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.alliances
    ADD CONSTRAINT alliances_name_key UNIQUE (name);


--
-- TOC entry 6280 (class 2606 OID 17323)
-- Name: alliances alliances_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.alliances
    ADD CONSTRAINT alliances_pkey PRIMARY KEY (id);


--
-- TOC entry 6282 (class 2606 OID 17327)
-- Name: alliances alliances_tag_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.alliances
    ADD CONSTRAINT alliances_tag_key UNIQUE (tag);


--
-- TOC entry 6554 (class 2606 OID 19095)
-- Name: battle_formations battle_formations_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_formations
    ADD CONSTRAINT battle_formations_pkey PRIMARY KEY (id);


--
-- TOC entry 6409 (class 2606 OID 17867)
-- Name: battle_reports battle_reports_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_reports
    ADD CONSTRAINT battle_reports_pkey PRIMARY KEY (id);


--
-- TOC entry 6559 (class 2606 OID 19189)
-- Name: battle_simulations battle_simulations_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_simulations
    ADD CONSTRAINT battle_simulations_pkey PRIMARY KEY (id);


--
-- TOC entry 6585 (class 2606 OID 19306)
-- Name: battle_system_config battle_system_config_config_key_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_system_config
    ADD CONSTRAINT battle_system_config_config_key_key UNIQUE (config_key);


--
-- TOC entry 6587 (class 2606 OID 19304)
-- Name: battle_system_config battle_system_config_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_system_config
    ADD CONSTRAINT battle_system_config_pkey PRIMARY KEY (id);


--
-- TOC entry 6569 (class 2606 OID 19266)
-- Name: battle_tactics battle_tactics_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_tactics
    ADD CONSTRAINT battle_tactics_pkey PRIMARY KEY (id);


--
-- TOC entry 6571 (class 2606 OID 19268)
-- Name: battle_tactics battle_tactics_tactic_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_tactics
    ADD CONSTRAINT battle_tactics_tactic_name_key UNIQUE (tactic_name);


--
-- TOC entry 6575 (class 2606 OID 19278)
-- Name: battle_terrain battle_terrain_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_terrain
    ADD CONSTRAINT battle_terrain_pkey PRIMARY KEY (id);


--
-- TOC entry 6577 (class 2606 OID 19280)
-- Name: battle_terrain battle_terrain_terrain_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_terrain
    ADD CONSTRAINT battle_terrain_terrain_name_key UNIQUE (terrain_name);


--
-- TOC entry 6556 (class 2606 OID 19175)
-- Name: battle_waves battle_waves_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_waves
    ADD CONSTRAINT battle_waves_pkey PRIMARY KEY (id);


--
-- TOC entry 6580 (class 2606 OID 19291)
-- Name: battle_weather battle_weather_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_weather
    ADD CONSTRAINT battle_weather_pkey PRIMARY KEY (id);


--
-- TOC entry 6582 (class 2606 OID 19293)
-- Name: battle_weather battle_weather_weather_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_weather
    ADD CONSTRAINT battle_weather_weather_name_key UNIQUE (weather_name);


--
-- TOC entry 6291 (class 2606 OID 17373)
-- Name: battles battles_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battles
    ADD CONSTRAINT battles_pkey PRIMARY KEY (id);


--
-- TOC entry 6844 (class 2606 OID 20943)
-- Name: building_configs building_configs_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.building_configs
    ADD CONSTRAINT building_configs_pkey PRIMARY KEY (id);


--
-- TOC entry 6846 (class 2606 OID 20945)
-- Name: building_configs building_configs_type_level_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.building_configs
    ADD CONSTRAINT building_configs_type_level_key UNIQUE (type, level);


--
-- TOC entry 6242 (class 2606 OID 17188)
-- Name: building_types building_types_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.building_types
    ADD CONSTRAINT building_types_name_key UNIQUE (name);


--
-- TOC entry 6244 (class 2606 OID 17186)
-- Name: building_types building_types_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.building_types
    ADD CONSTRAINT building_types_pkey PRIMARY KEY (id);


--
-- TOC entry 6231 (class 2606 OID 17098)
-- Name: buildings buildings_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.buildings
    ADD CONSTRAINT buildings_pkey PRIMARY KEY (id);


--
-- TOC entry 6233 (class 2606 OID 17100)
-- Name: buildings buildings_village_id_type_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.buildings
    ADD CONSTRAINT buildings_village_id_type_key UNIQUE (village_id, type);


--
-- TOC entry 6272 (class 2606 OID 17300)
-- Name: chat_channel_members chat_channel_members_channel_id_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.chat_channel_members
    ADD CONSTRAINT chat_channel_members_channel_id_player_id_key UNIQUE (channel_id, player_id);


--
-- TOC entry 6274 (class 2606 OID 17298)
-- Name: chat_channel_members chat_channel_members_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.chat_channel_members
    ADD CONSTRAINT chat_channel_members_pkey PRIMARY KEY (id);


--
-- TOC entry 6261 (class 2606 OID 17264)
-- Name: chat_channels chat_channels_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.chat_channels
    ADD CONSTRAINT chat_channels_name_key UNIQUE (name);


--
-- TOC entry 6263 (class 2606 OID 17262)
-- Name: chat_channels chat_channels_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.chat_channels
    ADD CONSTRAINT chat_channels_pkey PRIMARY KEY (id);


--
-- TOC entry 6267 (class 2606 OID 17279)
-- Name: chat_messages chat_messages_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.chat_messages
    ADD CONSTRAINT chat_messages_pkey PRIMARY KEY (id);


--
-- TOC entry 6611 (class 2606 OID 19520)
-- Name: currencies currencies_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.currencies
    ADD CONSTRAINT currencies_name_key UNIQUE (name);


--
-- TOC entry 6613 (class 2606 OID 19518)
-- Name: currencies currencies_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.currencies
    ADD CONSTRAINT currencies_pkey PRIMARY KEY (id);


--
-- TOC entry 6857 (class 2606 OID 21023)
-- Name: currency_config currency_config_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.currency_config
    ADD CONSTRAINT currency_config_pkey PRIMARY KEY (id);


--
-- TOC entry 6630 (class 2606 OID 19602)
-- Name: currency_exchanges currency_exchanges_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.currency_exchanges
    ADD CONSTRAINT currency_exchanges_pkey PRIMARY KEY (id);


--
-- TOC entry 6871 (class 2606 OID 21069)
-- Name: currency_transactions currency_transactions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.currency_transactions
    ADD CONSTRAINT currency_transactions_pkey PRIMARY KEY (id);


--
-- TOC entry 6473 (class 2606 OID 18123)
-- Name: database_backups database_backups_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.database_backups
    ADD CONSTRAINT database_backups_pkey PRIMARY KEY (id);


--
-- TOC entry 6478 (class 2606 OID 18139)
-- Name: database_restores database_restores_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.database_restores
    ADD CONSTRAINT database_restores_pkey PRIMARY KEY (id);


--
-- TOC entry 6641 (class 2606 OID 19655)
-- Name: economy_statistics economy_statistics_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.economy_statistics
    ADD CONSTRAINT economy_statistics_pkey PRIMARY KEY (id);


--
-- TOC entry 6643 (class 2606 OID 19657)
-- Name: economy_statistics economy_statistics_stat_date_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.economy_statistics
    ADD CONSTRAINT economy_statistics_stat_date_key UNIQUE (stat_date);


--
-- TOC entry 6589 (class 2606 OID 19340)
-- Name: economy_system_config economy_system_config_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.economy_system_config
    ADD CONSTRAINT economy_system_config_pkey PRIMARY KEY (id);


--
-- TOC entry 6758 (class 2606 OID 20454)
-- Name: event_categories event_categories_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_categories
    ADD CONSTRAINT event_categories_name_key UNIQUE (name);


--
-- TOC entry 6760 (class 2606 OID 20452)
-- Name: event_categories event_categories_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_categories
    ADD CONSTRAINT event_categories_pkey PRIMARY KEY (id);


--
-- TOC entry 6789 (class 2606 OID 20577)
-- Name: event_leaderboard event_leaderboard_event_id_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_leaderboard
    ADD CONSTRAINT event_leaderboard_event_id_player_id_key UNIQUE (event_id, player_id);


--
-- TOC entry 6791 (class 2606 OID 20575)
-- Name: event_leaderboard event_leaderboard_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_leaderboard
    ADD CONSTRAINT event_leaderboard_pkey PRIMARY KEY (id);


--
-- TOC entry 6770 (class 2606 OID 20490)
-- Name: event_matches event_matches_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_matches
    ADD CONSTRAINT event_matches_pkey PRIMARY KEY (id);


--
-- TOC entry 6795 (class 2606 OID 20599)
-- Name: event_notifications event_notifications_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_notifications
    ADD CONSTRAINT event_notifications_pkey PRIMARY KEY (id);


--
-- TOC entry 6762 (class 2606 OID 20467)
-- Name: event_participants event_participants_event_id_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_participants
    ADD CONSTRAINT event_participants_event_id_player_id_key UNIQUE (event_id, player_id);


--
-- TOC entry 6764 (class 2606 OID 20465)
-- Name: event_participants event_participants_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_participants
    ADD CONSTRAINT event_participants_pkey PRIMARY KEY (id);


--
-- TOC entry 6334 (class 2606 OID 17542)
-- Name: event_participation event_participation_event_id_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_participation
    ADD CONSTRAINT event_participation_event_id_player_id_key UNIQUE (event_id, player_id);


--
-- TOC entry 6336 (class 2606 OID 17540)
-- Name: event_participation event_participation_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_participation
    ADD CONSTRAINT event_participation_pkey PRIMARY KEY (id);


--
-- TOC entry 6780 (class 2606 OID 20533)
-- Name: event_rewards_claimed event_rewards_claimed_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_rewards_claimed
    ADD CONSTRAINT event_rewards_claimed_pkey PRIMARY KEY (id);


--
-- TOC entry 6782 (class 2606 OID 20535)
-- Name: event_rewards_claimed event_rewards_claimed_reward_id_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_rewards_claimed
    ADD CONSTRAINT event_rewards_claimed_reward_id_player_id_key UNIQUE (reward_id, player_id);


--
-- TOC entry 6776 (class 2606 OID 20521)
-- Name: event_rewards event_rewards_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_rewards
    ADD CONSTRAINT event_rewards_pkey PRIMARY KEY (id);


--
-- TOC entry 6784 (class 2606 OID 20559)
-- Name: event_statistics event_statistics_event_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_statistics
    ADD CONSTRAINT event_statistics_event_id_key UNIQUE (event_id);


--
-- TOC entry 6786 (class 2606 OID 20557)
-- Name: event_statistics event_statistics_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_statistics
    ADD CONSTRAINT event_statistics_pkey PRIMARY KEY (id);


--
-- TOC entry 6329 (class 2606 OID 17531)
-- Name: events events_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.events
    ADD CONSTRAINT events_pkey PRIMARY KEY (id);


--
-- TOC entry 6480 (class 2606 OID 18160)
-- Name: generated_reports generated_reports_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.generated_reports
    ADD CONSTRAINT generated_reports_pkey PRIMARY KEY (id);


--
-- TOC entry 6359 (class 2606 OID 17690)
-- Name: hero_abilities hero_abilities_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_abilities
    ADD CONSTRAINT hero_abilities_pkey PRIMARY KEY (id);


--
-- TOC entry 6525 (class 2606 OID 18842)
-- Name: hero_artifacts hero_artifacts_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_artifacts
    ADD CONSTRAINT hero_artifacts_pkey PRIMARY KEY (id);


--
-- TOC entry 6539 (class 2606 OID 18895)
-- Name: hero_battles hero_battles_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_battles
    ADD CONSTRAINT hero_battles_pkey PRIMARY KEY (id);


--
-- TOC entry 6547 (class 2606 OID 18971)
-- Name: hero_equipment hero_equipment_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_equipment
    ADD CONSTRAINT hero_equipment_pkey PRIMARY KEY (id);


--
-- TOC entry 6503 (class 2606 OID 18750)
-- Name: hero_events hero_events_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_events
    ADD CONSTRAINT hero_events_pkey PRIMARY KEY (id);


--
-- TOC entry 6530 (class 2606 OID 18861)
-- Name: hero_quests hero_quests_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_quests
    ADD CONSTRAINT hero_quests_pkey PRIMARY KEY (id);


--
-- TOC entry 6520 (class 2606 OID 18824)
-- Name: hero_skills hero_skills_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_skills
    ADD CONSTRAINT hero_skills_pkey PRIMARY KEY (id);


--
-- TOC entry 6545 (class 2606 OID 18919)
-- Name: hero_statistics hero_statistics_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_statistics
    ADD CONSTRAINT hero_statistics_pkey PRIMARY KEY (player_id);


--
-- TOC entry 6501 (class 2606 OID 18589)
-- Name: hero_system_config hero_system_config_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_system_config
    ADD CONSTRAINT hero_system_config_pkey PRIMARY KEY (id);


--
-- TOC entry 6505 (class 2606 OID 18771)
-- Name: hero_types hero_types_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_types
    ADD CONSTRAINT hero_types_name_key UNIQUE (name);


--
-- TOC entry 6507 (class 2606 OID 18769)
-- Name: hero_types hero_types_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_types
    ADD CONSTRAINT hero_types_pkey PRIMARY KEY (id);


--
-- TOC entry 6355 (class 2606 OID 17673)
-- Name: heroes heroes_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.heroes
    ADD CONSTRAINT heroes_pkey PRIMARY KEY (id);


--
-- TOC entry 6466 (class 2606 OID 18095)
-- Name: maintenance_tasks maintenance_tasks_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.maintenance_tasks
    ADD CONSTRAINT maintenance_tasks_pkey PRIMARY KEY (id);


--
-- TOC entry 6639 (class 2606 OID 19639)
-- Name: market_alerts market_alerts_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_alerts
    ADD CONSTRAINT market_alerts_pkey PRIMARY KEY (id);


--
-- TOC entry 6591 (class 2606 OID 19367)
-- Name: market_items market_items_item_type_item_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_items
    ADD CONSTRAINT market_items_item_type_item_id_key UNIQUE (item_type, item_id);


--
-- TOC entry 6593 (class 2606 OID 19365)
-- Name: market_items market_items_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_items
    ADD CONSTRAINT market_items_pkey PRIMARY KEY (id);


--
-- TOC entry 6620 (class 2606 OID 19535)
-- Name: market_listings market_listings_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_listings
    ADD CONSTRAINT market_listings_pkey PRIMARY KEY (id);


--
-- TOC entry 6595 (class 2606 OID 19456)
-- Name: market_statistics market_statistics_date_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_statistics
    ADD CONSTRAINT market_statistics_date_key UNIQUE (date);


--
-- TOC entry 6597 (class 2606 OID 19454)
-- Name: market_statistics market_statistics_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_statistics
    ADD CONSTRAINT market_statistics_pkey PRIMARY KEY (id);


--
-- TOC entry 6626 (class 2606 OID 19555)
-- Name: market_transactions market_transactions_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_transactions
    ADD CONSTRAINT market_transactions_pkey PRIMARY KEY (id);


--
-- TOC entry 6601 (class 2606 OID 19471)
-- Name: market_trends market_trends_item_type_item_id_period_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_trends
    ADD CONSTRAINT market_trends_item_type_item_id_period_key UNIQUE (item_type, item_id, period);


--
-- TOC entry 6603 (class 2606 OID 19469)
-- Name: market_trends market_trends_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_trends
    ADD CONSTRAINT market_trends_pkey PRIMARY KEY (id);


--
-- TOC entry 6552 (class 2606 OID 19031)
-- Name: military_units military_units_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.military_units
    ADD CONSTRAINT military_units_pkey PRIMARY KEY (id);


--
-- TOC entry 6407 (class 2606 OID 17850)
-- Name: notifications notifications_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.notifications
    ADD CONSTRAINT notifications_pkey PRIMARY KEY (id);


--
-- TOC entry 6447 (class 2606 OID 18039)
-- Name: performance_logs performance_logs_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.performance_logs
    ADD CONSTRAINT performance_logs_pkey PRIMARY KEY (id);


--
-- TOC entry 6319 (class 2606 OID 17494)
-- Name: player_achievements player_achievements_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_achievements
    ADD CONSTRAINT player_achievements_pkey PRIMARY KEY (id);


--
-- TOC entry 6321 (class 2606 OID 17496)
-- Name: player_achievements player_achievements_player_id_achievement_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_achievements
    ADD CONSTRAINT player_achievements_player_id_achievement_id_key UNIQUE (player_id, achievement_id);


--
-- TOC entry 6628 (class 2606 OID 19587)
-- Name: player_economy player_economy_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_economy
    ADD CONSTRAINT player_economy_pkey PRIMARY KEY (player_id);


--
-- TOC entry 6860 (class 2606 OID 21032)
-- Name: player_global_currency player_global_currency_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.player_global_currency
    ADD CONSTRAINT player_global_currency_pkey PRIMARY KEY (id);


--
-- TOC entry 6862 (class 2606 OID 21034)
-- Name: player_global_currency player_global_currency_player_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.player_global_currency
    ADD CONSTRAINT player_global_currency_player_id_key UNIQUE (player_id);


--
-- TOC entry 6537 (class 2606 OID 18878)
-- Name: player_hero_quests player_hero_quests_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_hero_quests
    ADD CONSTRAINT player_hero_quests_pkey PRIMARY KEY (id);


--
-- TOC entry 6516 (class 2606 OID 18792)
-- Name: player_heroes player_heroes_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_heroes
    ADD CONSTRAINT player_heroes_pkey PRIMARY KEY (id);


--
-- TOC entry 6518 (class 2606 OID 18794)
-- Name: player_heroes player_heroes_player_id_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_heroes
    ADD CONSTRAINT player_heroes_player_id_name_key UNIQUE (player_id, name);


--
-- TOC entry 6825 (class 2606 OID 20842)
-- Name: player_prestige player_prestige_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_prestige
    ADD CONSTRAINT player_prestige_pkey PRIMARY KEY (id);


--
-- TOC entry 6827 (class 2606 OID 20844)
-- Name: player_prestige player_prestige_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_prestige
    ADD CONSTRAINT player_prestige_player_id_key UNIQUE (player_id);


--
-- TOC entry 6373 (class 2606 OID 17720)
-- Name: player_quests player_quests_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_quests
    ADD CONSTRAINT player_quests_pkey PRIMARY KEY (id);


--
-- TOC entry 6375 (class 2606 OID 17722)
-- Name: player_quests player_quests_player_id_quest_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_quests
    ADD CONSTRAINT player_quests_player_id_quest_id_key UNIQUE (player_id, quest_id);


--
-- TOC entry 6325 (class 2606 OID 17514)
-- Name: player_statistics player_statistics_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_statistics
    ADD CONSTRAINT player_statistics_pkey PRIMARY KEY (id);


--
-- TOC entry 6327 (class 2606 OID 17516)
-- Name: player_statistics player_statistics_player_id_stat_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_statistics
    ADD CONSTRAINT player_statistics_player_id_stat_name_key UNIQUE (player_id, stat_name);


--
-- TOC entry 6351 (class 2606 OID 17642)
-- Name: player_technologies player_technologies_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_technologies
    ADD CONSTRAINT player_technologies_pkey PRIMARY KEY (id);


--
-- TOC entry 6353 (class 2606 OID 17644)
-- Name: player_technologies player_technologies_player_id_technology_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_technologies
    ADD CONSTRAINT player_technologies_player_id_technology_id_key UNIQUE (player_id, technology_id);


--
-- TOC entry 6565 (class 2606 OID 19208)
-- Name: player_units player_units_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_units
    ADD CONSTRAINT player_units_pkey PRIMARY KEY (id);


--
-- TOC entry 6567 (class 2606 OID 19210)
-- Name: player_units player_units_player_id_unit_type_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_units
    ADD CONSTRAINT player_units_player_id_unit_type_id_key UNIQUE (player_id, unit_type_id);


--
-- TOC entry 6867 (class 2606 OID 21048)
-- Name: player_world_currency player_world_currency_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.player_world_currency
    ADD CONSTRAINT player_world_currency_pkey PRIMARY KEY (id);


--
-- TOC entry 6869 (class 2606 OID 21050)
-- Name: player_world_currency player_world_currency_player_id_world_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.player_world_currency
    ADD CONSTRAINT player_world_currency_player_id_world_id_key UNIQUE (player_id, world_id);


--
-- TOC entry 6853 (class 2606 OID 20989)
-- Name: player_world_entries player_world_entries_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.player_world_entries
    ADD CONSTRAINT player_world_entries_pkey PRIMARY KEY (id);


--
-- TOC entry 6855 (class 2606 OID 20991)
-- Name: player_world_entries player_world_entries_player_id_world_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.player_world_entries
    ADD CONSTRAINT player_world_entries_player_id_world_id_key UNIQUE (player_id, world_id);


--
-- TOC entry 6205 (class 2606 OID 17052)
-- Name: players players_email_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.players
    ADD CONSTRAINT players_email_key UNIQUE (email);


--
-- TOC entry 6207 (class 2606 OID 17048)
-- Name: players players_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.players
    ADD CONSTRAINT players_pkey PRIMARY KEY (id);


--
-- TOC entry 6209 (class 2606 OID 17050)
-- Name: players players_username_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.players
    ADD CONSTRAINT players_username_key UNIQUE (username);


--
-- TOC entry 6818 (class 2606 OID 20792)
-- Name: prestige_achievements prestige_achievements_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_achievements
    ADD CONSTRAINT prestige_achievements_name_key UNIQUE (name);


--
-- TOC entry 6820 (class 2606 OID 20790)
-- Name: prestige_achievements prestige_achievements_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_achievements
    ADD CONSTRAINT prestige_achievements_pkey PRIMARY KEY (id);


--
-- TOC entry 6815 (class 2606 OID 20746)
-- Name: prestige_events prestige_events_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_events
    ADD CONSTRAINT prestige_events_pkey PRIMARY KEY (id);


--
-- TOC entry 6807 (class 2606 OID 20698)
-- Name: prestige_levels prestige_levels_level_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_levels
    ADD CONSTRAINT prestige_levels_level_key UNIQUE (level);


--
-- TOC entry 6809 (class 2606 OID 20696)
-- Name: prestige_levels prestige_levels_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_levels
    ADD CONSTRAINT prestige_levels_pkey PRIMARY KEY (id);


--
-- TOC entry 6842 (class 2606 OID 20912)
-- Name: prestige_notifications prestige_notifications_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_notifications
    ADD CONSTRAINT prestige_notifications_pkey PRIMARY KEY (id);


--
-- TOC entry 6831 (class 2606 OID 20872)
-- Name: prestige_rankings prestige_rankings_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_rankings
    ADD CONSTRAINT prestige_rankings_pkey PRIMARY KEY (id);


--
-- TOC entry 6833 (class 2606 OID 20874)
-- Name: prestige_rankings prestige_rankings_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_rankings
    ADD CONSTRAINT prestige_rankings_player_id_key UNIQUE (player_id);


--
-- TOC entry 6811 (class 2606 OID 20734)
-- Name: prestige_sources prestige_sources_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_sources
    ADD CONSTRAINT prestige_sources_name_key UNIQUE (name);


--
-- TOC entry 6813 (class 2606 OID 20732)
-- Name: prestige_sources prestige_sources_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_sources
    ADD CONSTRAINT prestige_sources_pkey PRIMARY KEY (id);


--
-- TOC entry 6836 (class 2606 OID 20892)
-- Name: prestige_stats prestige_stats_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_stats
    ADD CONSTRAINT prestige_stats_pkey PRIMARY KEY (id);


--
-- TOC entry 6838 (class 2606 OID 20894)
-- Name: prestige_stats prestige_stats_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_stats
    ADD CONSTRAINT prestige_stats_player_id_key UNIQUE (player_id);


--
-- TOC entry 6607 (class 2606 OID 19497)
-- Name: price_history price_history_item_id_timestamp_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.price_history
    ADD CONSTRAINT price_history_item_id_timestamp_key UNIQUE (item_id, "timestamp");


--
-- TOC entry 6609 (class 2606 OID 19495)
-- Name: price_history price_history_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.price_history
    ADD CONSTRAINT price_history_pkey PRIMARY KEY (id);


--
-- TOC entry 6740 (class 2606 OID 20369)
-- Name: quest_categories quest_categories_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.quest_categories
    ADD CONSTRAINT quest_categories_name_key UNIQUE (name);


--
-- TOC entry 6742 (class 2606 OID 20367)
-- Name: quest_categories quest_categories_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.quest_categories
    ADD CONSTRAINT quest_categories_pkey PRIMARY KEY (id);


--
-- TOC entry 6756 (class 2606 OID 20415)
-- Name: quest_notifications quest_notifications_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.quest_notifications
    ADD CONSTRAINT quest_notifications_pkey PRIMARY KEY (id);


--
-- TOC entry 6746 (class 2606 OID 20381)
-- Name: quest_rewards quest_rewards_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.quest_rewards
    ADD CONSTRAINT quest_rewards_pkey PRIMARY KEY (id);


--
-- TOC entry 6750 (class 2606 OID 20396)
-- Name: quest_statistics quest_statistics_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.quest_statistics
    ADD CONSTRAINT quest_statistics_pkey PRIMARY KEY (id);


--
-- TOC entry 6752 (class 2606 OID 20398)
-- Name: quest_statistics quest_statistics_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.quest_statistics
    ADD CONSTRAINT quest_statistics_player_id_key UNIQUE (player_id);


--
-- TOC entry 6365 (class 2606 OID 17707)
-- Name: quests quests_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.quests
    ADD CONSTRAINT quests_pkey PRIMARY KEY (id);


--
-- TOC entry 6238 (class 2606 OID 17166)
-- Name: races races_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.races
    ADD CONSTRAINT races_name_key UNIQUE (name);


--
-- TOC entry 6240 (class 2606 OID 17164)
-- Name: races races_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.races
    ADD CONSTRAINT races_pkey PRIMARY KEY (id);


--
-- TOC entry 6646 (class 2606 OID 19711)
-- Name: ranking_categories ranking_categories_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_categories
    ADD CONSTRAINT ranking_categories_name_key UNIQUE (name);


--
-- TOC entry 6648 (class 2606 OID 19709)
-- Name: ranking_categories ranking_categories_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_categories
    ADD CONSTRAINT ranking_categories_pkey PRIMARY KEY (id);


--
-- TOC entry 6670 (class 2606 OID 19920)
-- Name: ranking_entries ranking_entries_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_entries
    ADD CONSTRAINT ranking_entries_pkey PRIMARY KEY (id);


--
-- TOC entry 6672 (class 2606 OID 19922)
-- Name: ranking_entries ranking_entries_ranking_type_id_player_id_alliance_id_villa_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_entries
    ADD CONSTRAINT ranking_entries_ranking_type_id_player_id_alliance_id_villa_key UNIQUE (ranking_type_id, player_id, alliance_id, village_id, world_id);


--
-- TOC entry 6657 (class 2606 OID 19851)
-- Name: ranking_history ranking_history_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_history
    ADD CONSTRAINT ranking_history_pkey PRIMARY KEY (id);


--
-- TOC entry 6400 (class 2606 OID 17827)
-- Name: ranking_positions ranking_positions_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_positions
    ADD CONSTRAINT ranking_positions_pkey PRIMARY KEY (id);


--
-- TOC entry 6402 (class 2606 OID 17829)
-- Name: ranking_positions ranking_positions_ranking_id_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_positions
    ADD CONSTRAINT ranking_positions_ranking_id_player_id_key UNIQUE (ranking_id, player_id);


--
-- TOC entry 6688 (class 2606 OID 20029)
-- Name: ranking_rewards_claimed ranking_rewards_claimed_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_rewards_claimed
    ADD CONSTRAINT ranking_rewards_claimed_pkey PRIMARY KEY (id);


--
-- TOC entry 6690 (class 2606 OID 20031)
-- Name: ranking_rewards_claimed ranking_rewards_claimed_reward_id_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_rewards_claimed
    ADD CONSTRAINT ranking_rewards_claimed_reward_id_player_id_key UNIQUE (reward_id, player_id);


--
-- TOC entry 6686 (class 2606 OID 20017)
-- Name: ranking_rewards ranking_rewards_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_rewards
    ADD CONSTRAINT ranking_rewards_pkey PRIMARY KEY (id);


--
-- TOC entry 6650 (class 2606 OID 19728)
-- Name: ranking_seasons ranking_seasons_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_seasons
    ADD CONSTRAINT ranking_seasons_pkey PRIMARY KEY (id);


--
-- TOC entry 6652 (class 2606 OID 19730)
-- Name: ranking_seasons ranking_seasons_season_number_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_seasons
    ADD CONSTRAINT ranking_seasons_season_number_key UNIQUE (season_number);


--
-- TOC entry 6659 (class 2606 OID 19910)
-- Name: ranking_types ranking_types_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_types
    ADD CONSTRAINT ranking_types_name_key UNIQUE (name);


--
-- TOC entry 6661 (class 2606 OID 19908)
-- Name: ranking_types ranking_types_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_types
    ADD CONSTRAINT ranking_types_pkey PRIMARY KEY (id);


--
-- TOC entry 6395 (class 2606 OID 17814)
-- Name: rankings rankings_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.rankings
    ADD CONSTRAINT rankings_pkey PRIMARY KEY (id);


--
-- TOC entry 6486 (class 2606 OID 18477)
-- Name: research_queue research_queue_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.research_queue
    ADD CONSTRAINT research_queue_pkey PRIMARY KEY (id);


--
-- TOC entry 6499 (class 2606 OID 18550)
-- Name: research_statistics research_statistics_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.research_statistics
    ADD CONSTRAINT research_statistics_pkey PRIMARY KEY (player_id);


--
-- TOC entry 6227 (class 2606 OID 17084)
-- Name: resources resources_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.resources
    ADD CONSTRAINT resources_pkey PRIMARY KEY (id);


--
-- TOC entry 6229 (class 2606 OID 17086)
-- Name: resources resources_village_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.resources
    ADD CONSTRAINT resources_village_id_key UNIQUE (village_id);


--
-- TOC entry 6442 (class 2606 OID 18025)
-- Name: security_logs security_logs_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.security_logs
    ADD CONSTRAINT security_logs_pkey PRIMARY KEY (id);


--
-- TOC entry 6451 (class 2606 OID 18053)
-- Name: server_metrics server_metrics_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.server_metrics
    ADD CONSTRAINT server_metrics_pkey PRIMARY KEY (id);


--
-- TOC entry 6379 (class 2606 OID 17745)
-- Name: special_buildings special_buildings_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.special_buildings
    ADD CONSTRAINT special_buildings_pkey PRIMARY KEY (id);


--
-- TOC entry 6391 (class 2606 OID 17794)
-- Name: special_event_participation special_event_participation_event_id_player_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.special_event_participation
    ADD CONSTRAINT special_event_participation_event_id_player_id_key UNIQUE (event_id, player_id);


--
-- TOC entry 6393 (class 2606 OID 17792)
-- Name: special_event_participation special_event_participation_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.special_event_participation
    ADD CONSTRAINT special_event_participation_pkey PRIMARY KEY (id);


--
-- TOC entry 6388 (class 2606 OID 17778)
-- Name: special_events special_events_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.special_events
    ADD CONSTRAINT special_events_pkey PRIMARY KEY (id);


--
-- TOC entry 6382 (class 2606 OID 17760)
-- Name: special_resources special_resources_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.special_resources
    ADD CONSTRAINT special_resources_pkey PRIMARY KEY (id);


--
-- TOC entry 6384 (class 2606 OID 17762)
-- Name: special_resources special_resources_village_id_resource_type_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.special_resources
    ADD CONSTRAINT special_resources_village_id_resource_type_key UNIQUE (village_id, resource_type);


--
-- TOC entry 6694 (class 2606 OID 20050)
-- Name: statistics_snapshots statistics_snapshots_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.statistics_snapshots
    ADD CONSTRAINT statistics_snapshots_pkey PRIMARY KEY (id);


--
-- TOC entry 6696 (class 2606 OID 20052)
-- Name: statistics_snapshots statistics_snapshots_snapshot_date_ranking_type_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.statistics_snapshots
    ADD CONSTRAINT statistics_snapshots_snapshot_date_ranking_type_id_key UNIQUE (snapshot_date, ranking_type_id);


--
-- TOC entry 6457 (class 2606 OID 18063)
-- Name: system_alerts system_alerts_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.system_alerts
    ADD CONSTRAINT system_alerts_pkey PRIMARY KEY (id);


--
-- TOC entry 6459 (class 2606 OID 18080)
-- Name: system_config system_config_config_key_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.system_config
    ADD CONSTRAINT system_config_config_key_key UNIQUE (config_key);


--
-- TOC entry 6461 (class 2606 OID 18078)
-- Name: system_config system_config_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.system_config
    ADD CONSTRAINT system_config_pkey PRIMARY KEY (id);


--
-- TOC entry 6436 (class 2606 OID 18011)
-- Name: system_logs system_logs_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.system_logs
    ADD CONSTRAINT system_logs_pkey PRIMARY KEY (id);


--
-- TOC entry 6471 (class 2606 OID 18107)
-- Name: task_executions task_executions_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.task_executions
    ADD CONSTRAINT task_executions_pkey PRIMARY KEY (id);


--
-- TOC entry 6634 (class 2606 OID 19630)
-- Name: taxes taxes_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.taxes
    ADD CONSTRAINT taxes_pkey PRIMARY KEY (id);


--
-- TOC entry 6342 (class 2606 OID 17632)
-- Name: technologies technologies_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.technologies
    ADD CONSTRAINT technologies_name_key UNIQUE (name);


--
-- TOC entry 6344 (class 2606 OID 17630)
-- Name: technologies technologies_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.technologies
    ADD CONSTRAINT technologies_pkey PRIMARY KEY (id);


--
-- TOC entry 6495 (class 2606 OID 18527)
-- Name: technology_costs technology_costs_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.technology_costs
    ADD CONSTRAINT technology_costs_pkey PRIMARY KEY (id);


--
-- TOC entry 6497 (class 2606 OID 18529)
-- Name: technology_costs technology_costs_technology_id_level_resource_type_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.technology_costs
    ADD CONSTRAINT technology_costs_technology_id_level_resource_type_key UNIQUE (technology_id, level, resource_type);


--
-- TOC entry 6489 (class 2606 OID 18495)
-- Name: technology_effects technology_effects_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.technology_effects
    ADD CONSTRAINT technology_effects_pkey PRIMARY KEY (id);


--
-- TOC entry 6492 (class 2606 OID 18509)
-- Name: technology_requirements technology_requirements_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.technology_requirements
    ADD CONSTRAINT technology_requirements_pkey PRIMARY KEY (id);


--
-- TOC entry 6799 (class 2606 OID 20652)
-- Name: title_categories title_categories_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.title_categories
    ADD CONSTRAINT title_categories_name_key UNIQUE (name);


--
-- TOC entry 6801 (class 2606 OID 20650)
-- Name: title_categories title_categories_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.title_categories
    ADD CONSTRAINT title_categories_pkey PRIMARY KEY (id);


--
-- TOC entry 6805 (class 2606 OID 20668)
-- Name: titles titles_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.titles
    ADD CONSTRAINT titles_pkey PRIMARY KEY (id);


--
-- TOC entry 6305 (class 2606 OID 17444)
-- Name: trade_offers trade_offers_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.trade_offers
    ADD CONSTRAINT trade_offers_pkey PRIMARY KEY (id);


--
-- TOC entry 6415 (class 2606 OID 17893)
-- Name: trade_reports trade_reports_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.trade_reports
    ADD CONSTRAINT trade_reports_pkey PRIMARY KEY (id);


--
-- TOC entry 6308 (class 2606 OID 17461)
-- Name: trade_transactions trade_transactions_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.trade_transactions
    ADD CONSTRAINT trade_transactions_pkey PRIMARY KEY (id);


--
-- TOC entry 6259 (class 2606 OID 17240)
-- Name: training_queue training_queue_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.training_queue
    ADD CONSTRAINT training_queue_pkey PRIMARY KEY (id);


--
-- TOC entry 6300 (class 2606 OID 17411)
-- Name: troop_movements troop_movements_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.troop_movements
    ADD CONSTRAINT troop_movements_pkey PRIMARY KEY (id);


--
-- TOC entry 6246 (class 2606 OID 17208)
-- Name: unit_types unit_types_name_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.unit_types
    ADD CONSTRAINT unit_types_name_key UNIQUE (name);


--
-- TOC entry 6248 (class 2606 OID 17206)
-- Name: unit_types unit_types_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.unit_types
    ADD CONSTRAINT unit_types_pkey PRIMARY KEY (id);


--
-- TOC entry 6253 (class 2606 OID 17218)
-- Name: units units_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.units
    ADD CONSTRAINT units_pkey PRIMARY KEY (id);


--
-- TOC entry 6255 (class 2606 OID 17220)
-- Name: units units_village_id_unit_type_id_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.units
    ADD CONSTRAINT units_village_id_unit_type_id_key UNIQUE (village_id, unit_type_id);


--
-- TOC entry 6679 (class 2606 OID 19981)
-- Name: village_statistics village_statistics_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.village_statistics
    ADD CONSTRAINT village_statistics_pkey PRIMARY KEY (village_id);


--
-- TOC entry 6221 (class 2606 OID 17063)
-- Name: villages villages_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.villages
    ADD CONSTRAINT villages_pkey PRIMARY KEY (id);


--
-- TOC entry 6223 (class 2606 OID 17065)
-- Name: villages villages_world_id_x_coordinate_y_coordinate_key; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.villages
    ADD CONSTRAINT villages_world_id_x_coordinate_y_coordinate_key UNIQUE (world_id, x_coordinate, y_coordinate);


--
-- TOC entry 6682 (class 2606 OID 20001)
-- Name: world_statistics world_statistics_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.world_statistics
    ADD CONSTRAINT world_statistics_pkey PRIMARY KEY (world_id);


--
-- TOC entry 6216 (class 2606 OID 17058)
-- Name: worlds worlds_pkey; Type: CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.worlds
    ADD CONSTRAINT worlds_pkey PRIMARY KEY (id);


--
-- TOC entry 6701 (class 1259 OID 20216)
-- Name: idx_achievement_categories_active; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_categories_active ON public.achievement_categories USING btree (is_active);


--
-- TOC entry 6702 (class 1259 OID 20217)
-- Name: idx_achievement_categories_display_order; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_categories_display_order ON public.achievement_categories USING btree (display_order);


--
-- TOC entry 6705 (class 1259 OID 20219)
-- Name: idx_achievement_events_entity_type_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_events_entity_type_id ON public.achievement_events USING btree (entity_type, entity_id);


--
-- TOC entry 6706 (class 1259 OID 20220)
-- Name: idx_achievement_events_event_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_events_event_type ON public.achievement_events USING btree (event_type);


--
-- TOC entry 6707 (class 1259 OID 20221)
-- Name: idx_achievement_events_occurred_at; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_events_occurred_at ON public.achievement_events USING btree (occurred_at);


--
-- TOC entry 6728 (class 1259 OID 20347)
-- Name: idx_achievement_leaderboard_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_leaderboard_player ON public.achievement_leaderboard USING btree (player_id);


--
-- TOC entry 6729 (class 1259 OID 20348)
-- Name: idx_achievement_leaderboard_rank; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_leaderboard_rank ON public.achievement_leaderboard USING btree (rank_position);


--
-- TOC entry 6734 (class 1259 OID 20349)
-- Name: idx_achievement_milestones_achievement; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_milestones_achievement ON public.achievement_milestones USING btree (achievement_id);


--
-- TOC entry 6737 (class 1259 OID 20350)
-- Name: idx_achievement_notifications_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_notifications_player ON public.achievement_notifications USING btree (player_id);


--
-- TOC entry 6738 (class 1259 OID 20351)
-- Name: idx_achievement_notifications_read; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_notifications_read ON public.achievement_notifications USING btree (is_read);


--
-- TOC entry 6712 (class 1259 OID 20342)
-- Name: idx_achievement_progress_achievement; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_progress_achievement ON public.achievement_progress USING btree (achievement_id);


--
-- TOC entry 6713 (class 1259 OID 20341)
-- Name: idx_achievement_progress_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_progress_player ON public.achievement_progress USING btree (player_id);


--
-- TOC entry 6716 (class 1259 OID 20343)
-- Name: idx_achievement_rewards_achievement; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_rewards_achievement ON public.achievement_rewards USING btree (achievement_id);


--
-- TOC entry 6717 (class 1259 OID 20344)
-- Name: idx_achievement_rewards_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_rewards_type ON public.achievement_rewards USING btree (reward_type);


--
-- TOC entry 6722 (class 1259 OID 20345)
-- Name: idx_achievement_statistics_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_statistics_player ON public.achievement_statistics USING btree (player_id);


--
-- TOC entry 6723 (class 1259 OID 20346)
-- Name: idx_achievement_statistics_points; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievement_statistics_points ON public.achievement_statistics USING btree (total_points DESC);


--
-- TOC entry 6313 (class 1259 OID 20338)
-- Name: idx_achievements_category; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_achievements_category ON public.achievements USING btree (category);


--
-- TOC entry 6428 (class 1259 OID 18168)
-- Name: idx_admin_actions_admin_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_admin_actions_admin_id ON public.admin_actions USING btree (admin_id);


--
-- TOC entry 6429 (class 1259 OID 18170)
-- Name: idx_admin_actions_created_at; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_admin_actions_created_at ON public.admin_actions USING btree (created_at);


--
-- TOC entry 6430 (class 1259 OID 18169)
-- Name: idx_admin_actions_target; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_admin_actions_target ON public.admin_actions USING btree (target_type, target_id);


--
-- TOC entry 6424 (class 1259 OID 18166)
-- Name: idx_admins_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_admins_player_id ON public.admins USING btree (player_id);


--
-- TOC entry 6425 (class 1259 OID 18167)
-- Name: idx_admins_role_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_admins_role_id ON public.admins USING btree (role_id);


--
-- TOC entry 6288 (class 1259 OID 17574)
-- Name: idx_alliance_members_alliance_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_alliance_members_alliance_id ON public.alliance_members USING btree (alliance_id);


--
-- TOC entry 6289 (class 1259 OID 17575)
-- Name: idx_alliance_members_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_alliance_members_player_id ON public.alliance_members USING btree (player_id);


--
-- TOC entry 6675 (class 1259 OID 20066)
-- Name: idx_alliance_statistics_members; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_alliance_statistics_members ON public.alliance_statistics USING btree (member_count DESC);


--
-- TOC entry 6676 (class 1259 OID 20065)
-- Name: idx_alliance_statistics_points; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_alliance_statistics_points ON public.alliance_statistics USING btree (total_points DESC);


--
-- TOC entry 6283 (class 1259 OID 17576)
-- Name: idx_alliances_world_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_alliances_world_id ON public.alliances USING btree (world_id);


--
-- TOC entry 6410 (class 1259 OID 17924)
-- Name: idx_battle_reports_battle_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_battle_reports_battle_id ON public.battle_reports USING btree (battle_id);


--
-- TOC entry 6411 (class 1259 OID 17925)
-- Name: idx_battle_reports_players; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_battle_reports_players ON public.battle_reports USING btree (attacker_id, defender_id);


--
-- TOC entry 6560 (class 1259 OID 19196)
-- Name: idx_battle_simulations_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_battle_simulations_player_id ON public.battle_simulations USING btree (player_id);


--
-- TOC entry 6572 (class 1259 OID 19308)
-- Name: idx_battle_tactics_active; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_battle_tactics_active ON public.battle_tactics USING btree (is_active);


--
-- TOC entry 6573 (class 1259 OID 19307)
-- Name: idx_battle_tactics_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_battle_tactics_type ON public.battle_tactics USING btree (tactic_type);


--
-- TOC entry 6578 (class 1259 OID 19309)
-- Name: idx_battle_terrain_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_battle_terrain_type ON public.battle_terrain USING btree (terrain_type);


--
-- TOC entry 6557 (class 1259 OID 19195)
-- Name: idx_battle_waves_battle_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_battle_waves_battle_id ON public.battle_waves USING btree (battle_id);


--
-- TOC entry 6583 (class 1259 OID 19310)
-- Name: idx_battle_weather_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_battle_weather_type ON public.battle_weather USING btree (weather_type);


--
-- TOC entry 6292 (class 1259 OID 19164)
-- Name: idx_battles_attacker_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_battles_attacker_id ON public.battles USING btree (attacker_id);


--
-- TOC entry 6293 (class 1259 OID 19165)
-- Name: idx_battles_defender_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_battles_defender_id ON public.battles USING btree (defender_id);


--
-- TOC entry 6294 (class 1259 OID 17577)
-- Name: idx_battles_players; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_battles_players ON public.battles USING btree (attacker_id, defender_id);


--
-- TOC entry 6295 (class 1259 OID 17578)
-- Name: idx_battles_status; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_battles_status ON public.battles USING btree (status);


--
-- TOC entry 6296 (class 1259 OID 17579)
-- Name: idx_battles_time; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_battles_time ON public.battles USING btree (start_time);


--
-- TOC entry 6234 (class 1259 OID 21109)
-- Name: idx_buildings_building_type_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_buildings_building_type_id ON public.buildings USING btree (building_type_id);


--
-- TOC entry 6235 (class 1259 OID 17561)
-- Name: idx_buildings_upgrade_time; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_buildings_upgrade_time ON public.buildings USING btree (upgrade_completion_time);


--
-- TOC entry 6236 (class 1259 OID 17560)
-- Name: idx_buildings_village_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_buildings_village_id ON public.buildings USING btree (village_id);


--
-- TOC entry 6275 (class 1259 OID 17570)
-- Name: idx_chat_channel_members_channel_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_chat_channel_members_channel_id ON public.chat_channel_members USING btree (channel_id);


--
-- TOC entry 6276 (class 1259 OID 17571)
-- Name: idx_chat_channel_members_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_chat_channel_members_player_id ON public.chat_channel_members USING btree (player_id);


--
-- TOC entry 6264 (class 1259 OID 17572)
-- Name: idx_chat_channels_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_chat_channels_type ON public.chat_channels USING btree (type);


--
-- TOC entry 6265 (class 1259 OID 17573)
-- Name: idx_chat_channels_world_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_chat_channels_world_id ON public.chat_channels USING btree (world_id);


--
-- TOC entry 6268 (class 1259 OID 17567)
-- Name: idx_chat_messages_channel_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_chat_messages_channel_id ON public.chat_messages USING btree (channel_id);


--
-- TOC entry 6269 (class 1259 OID 17568)
-- Name: idx_chat_messages_created_at; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_chat_messages_created_at ON public.chat_messages USING btree (created_at DESC);


--
-- TOC entry 6270 (class 1259 OID 17569)
-- Name: idx_chat_messages_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_chat_messages_player_id ON public.chat_messages USING btree (player_id);


--
-- TOC entry 6631 (class 1259 OID 19672)
-- Name: idx_currency_exchanges_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_currency_exchanges_player ON public.currency_exchanges USING btree (player_id);


--
-- TOC entry 6632 (class 1259 OID 19673)
-- Name: idx_currency_exchanges_status; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_currency_exchanges_status ON public.currency_exchanges USING btree (status);


--
-- TOC entry 6872 (class 1259 OID 21087)
-- Name: idx_currency_transactions_created_at; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_currency_transactions_created_at ON public.currency_transactions USING btree (created_at);


--
-- TOC entry 6873 (class 1259 OID 21086)
-- Name: idx_currency_transactions_currency_type; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_currency_transactions_currency_type ON public.currency_transactions USING btree (currency_type);


--
-- TOC entry 6874 (class 1259 OID 21084)
-- Name: idx_currency_transactions_player_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_currency_transactions_player_id ON public.currency_transactions USING btree (player_id);


--
-- TOC entry 6875 (class 1259 OID 21085)
-- Name: idx_currency_transactions_world_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_currency_transactions_world_id ON public.currency_transactions USING btree (world_id);


--
-- TOC entry 6474 (class 1259 OID 18349)
-- Name: idx_database_backups_started_at; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_database_backups_started_at ON public.database_backups USING btree (started_at);


--
-- TOC entry 6475 (class 1259 OID 18195)
-- Name: idx_database_backups_status; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_database_backups_status ON public.database_backups USING btree (status);


--
-- TOC entry 6476 (class 1259 OID 18194)
-- Name: idx_database_backups_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_database_backups_type ON public.database_backups USING btree (backup_type);


--
-- TOC entry 6644 (class 1259 OID 19677)
-- Name: idx_economy_statistics_date; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_economy_statistics_date ON public.economy_statistics USING btree (stat_date);


--
-- TOC entry 6792 (class 1259 OID 20623)
-- Name: idx_event_leaderboard_event; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_leaderboard_event ON public.event_leaderboard USING btree (event_id);


--
-- TOC entry 6793 (class 1259 OID 20624)
-- Name: idx_event_leaderboard_score; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_leaderboard_score ON public.event_leaderboard USING btree (score DESC);


--
-- TOC entry 6771 (class 1259 OID 20616)
-- Name: idx_event_matches_event; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_matches_event ON public.event_matches USING btree (event_id);


--
-- TOC entry 6772 (class 1259 OID 20617)
-- Name: idx_event_matches_players; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_matches_players ON public.event_matches USING btree (player1_id, player2_id);


--
-- TOC entry 6773 (class 1259 OID 20619)
-- Name: idx_event_matches_scheduled; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_matches_scheduled ON public.event_matches USING btree (scheduled_at);


--
-- TOC entry 6774 (class 1259 OID 20618)
-- Name: idx_event_matches_status; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_matches_status ON public.event_matches USING btree (status);


--
-- TOC entry 6796 (class 1259 OID 20625)
-- Name: idx_event_notifications_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_notifications_player ON public.event_notifications USING btree (player_id);


--
-- TOC entry 6797 (class 1259 OID 20626)
-- Name: idx_event_notifications_read; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_notifications_read ON public.event_notifications USING btree (is_read);


--
-- TOC entry 6765 (class 1259 OID 20612)
-- Name: idx_event_participants_event; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_participants_event ON public.event_participants USING btree (event_id);


--
-- TOC entry 6766 (class 1259 OID 20613)
-- Name: idx_event_participants_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_participants_player ON public.event_participants USING btree (player_id);


--
-- TOC entry 6767 (class 1259 OID 20615)
-- Name: idx_event_participants_score; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_participants_score ON public.event_participants USING btree (score DESC);


--
-- TOC entry 6768 (class 1259 OID 20614)
-- Name: idx_event_participants_status; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_participants_status ON public.event_participants USING btree (status);


--
-- TOC entry 6337 (class 1259 OID 17589)
-- Name: idx_event_participation_event_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_participation_event_id ON public.event_participation USING btree (event_id);


--
-- TOC entry 6338 (class 1259 OID 17590)
-- Name: idx_event_participation_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_participation_player_id ON public.event_participation USING btree (player_id);


--
-- TOC entry 6777 (class 1259 OID 20620)
-- Name: idx_event_rewards_event; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_rewards_event ON public.event_rewards USING btree (event_id);


--
-- TOC entry 6778 (class 1259 OID 20621)
-- Name: idx_event_rewards_rank; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_rewards_rank ON public.event_rewards USING btree (rank_min, rank_max);


--
-- TOC entry 6787 (class 1259 OID 20622)
-- Name: idx_event_statistics_event; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_event_statistics_event ON public.event_statistics USING btree (event_id);


--
-- TOC entry 6330 (class 1259 OID 20611)
-- Name: idx_events_active; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_events_active ON public.events USING btree (is_active);


--
-- TOC entry 6331 (class 1259 OID 17591)
-- Name: idx_events_time; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_events_time ON public.events USING btree (start_time, end_time);


--
-- TOC entry 6332 (class 1259 OID 20610)
-- Name: idx_events_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_events_type ON public.events USING btree (event_type);


--
-- TOC entry 6481 (class 1259 OID 18198)
-- Name: idx_generated_reports_requested_at; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_generated_reports_requested_at ON public.generated_reports USING btree (requested_at);


--
-- TOC entry 6482 (class 1259 OID 18197)
-- Name: idx_generated_reports_status; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_generated_reports_status ON public.generated_reports USING btree (status);


--
-- TOC entry 6483 (class 1259 OID 18196)
-- Name: idx_generated_reports_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_generated_reports_type ON public.generated_reports USING btree (report_type);


--
-- TOC entry 6360 (class 1259 OID 17908)
-- Name: idx_hero_abilities_hero_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_abilities_hero_id ON public.hero_abilities USING btree (hero_id);


--
-- TOC entry 6526 (class 1259 OID 18937)
-- Name: idx_hero_artifacts_active; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_artifacts_active ON public.hero_artifacts USING btree (is_active);


--
-- TOC entry 6527 (class 1259 OID 18935)
-- Name: idx_hero_artifacts_hero; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_artifacts_hero ON public.hero_artifacts USING btree (hero_id);


--
-- TOC entry 6528 (class 1259 OID 18936)
-- Name: idx_hero_artifacts_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_artifacts_type ON public.hero_artifacts USING btree (artifact_type);


--
-- TOC entry 6540 (class 1259 OID 18944)
-- Name: idx_hero_battles_hero; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_battles_hero ON public.hero_battles USING btree (hero_id);


--
-- TOC entry 6541 (class 1259 OID 18943)
-- Name: idx_hero_battles_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_battles_player ON public.hero_battles USING btree (player_id);


--
-- TOC entry 6542 (class 1259 OID 18945)
-- Name: idx_hero_battles_result; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_battles_result ON public.hero_battles USING btree (result);


--
-- TOC entry 6543 (class 1259 OID 18946)
-- Name: idx_hero_battles_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_battles_type ON public.hero_battles USING btree (battle_type);


--
-- TOC entry 6548 (class 1259 OID 18979)
-- Name: idx_hero_equipment_equipped; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_equipment_equipped ON public.hero_equipment USING btree (is_equipped);


--
-- TOC entry 6549 (class 1259 OID 18977)
-- Name: idx_hero_equipment_hero; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_equipment_hero ON public.hero_equipment USING btree (hero_id);


--
-- TOC entry 6550 (class 1259 OID 18978)
-- Name: idx_hero_equipment_slot; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_equipment_slot ON public.hero_equipment USING btree (slot);


--
-- TOC entry 6531 (class 1259 OID 18938)
-- Name: idx_hero_quests_hero; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_quests_hero ON public.hero_quests USING btree (hero_id);


--
-- TOC entry 6532 (class 1259 OID 18940)
-- Name: idx_hero_quests_status; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_quests_status ON public.hero_quests USING btree (status);


--
-- TOC entry 6533 (class 1259 OID 18939)
-- Name: idx_hero_quests_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_quests_type ON public.hero_quests USING btree (quest_type);


--
-- TOC entry 6521 (class 1259 OID 18932)
-- Name: idx_hero_skills_hero; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_skills_hero ON public.hero_skills USING btree (hero_id);


--
-- TOC entry 6522 (class 1259 OID 18933)
-- Name: idx_hero_skills_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_skills_type ON public.hero_skills USING btree (skill_type);


--
-- TOC entry 6523 (class 1259 OID 18934)
-- Name: idx_hero_skills_unlocked; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_skills_unlocked ON public.hero_skills USING btree (is_unlocked);


--
-- TOC entry 6508 (class 1259 OID 18927)
-- Name: idx_hero_types_active; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_types_active ON public.hero_types USING btree (is_active);


--
-- TOC entry 6509 (class 1259 OID 18925)
-- Name: idx_hero_types_class; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_types_class ON public.hero_types USING btree (class);


--
-- TOC entry 6510 (class 1259 OID 18926)
-- Name: idx_hero_types_rarity; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_hero_types_rarity ON public.hero_types USING btree (rarity);


--
-- TOC entry 6356 (class 1259 OID 17906)
-- Name: idx_heroes_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_heroes_player_id ON public.heroes USING btree (player_id);


--
-- TOC entry 6357 (class 1259 OID 17907)
-- Name: idx_heroes_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_heroes_type ON public.heroes USING btree (hero_type);


--
-- TOC entry 6462 (class 1259 OID 18190)
-- Name: idx_maintenance_tasks_active; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_maintenance_tasks_active ON public.maintenance_tasks USING btree (is_active);


--
-- TOC entry 6463 (class 1259 OID 18189)
-- Name: idx_maintenance_tasks_next_run; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_maintenance_tasks_next_run ON public.maintenance_tasks USING btree (next_run);


--
-- TOC entry 6464 (class 1259 OID 18188)
-- Name: idx_maintenance_tasks_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_maintenance_tasks_type ON public.maintenance_tasks USING btree (task_type);


--
-- TOC entry 6635 (class 1259 OID 19676)
-- Name: idx_market_alerts_active; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_market_alerts_active ON public.market_alerts USING btree (is_active);


--
-- TOC entry 6636 (class 1259 OID 19674)
-- Name: idx_market_alerts_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_market_alerts_player ON public.market_alerts USING btree (player_id);


--
-- TOC entry 6637 (class 1259 OID 19675)
-- Name: idx_market_alerts_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_market_alerts_type ON public.market_alerts USING btree (alert_type);


--
-- TOC entry 6614 (class 1259 OID 19667)
-- Name: idx_market_listings_expires; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_market_listings_expires ON public.market_listings USING btree (expires_at);


--
-- TOC entry 6615 (class 1259 OID 19664)
-- Name: idx_market_listings_item_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_market_listings_item_type ON public.market_listings USING btree (item_type);


--
-- TOC entry 6616 (class 1259 OID 19666)
-- Name: idx_market_listings_price; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_market_listings_price ON public.market_listings USING btree (price_per_unit);


--
-- TOC entry 6617 (class 1259 OID 19663)
-- Name: idx_market_listings_seller; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_market_listings_seller ON public.market_listings USING btree (seller_id);


--
-- TOC entry 6618 (class 1259 OID 19665)
-- Name: idx_market_listings_status; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_market_listings_status ON public.market_listings USING btree (status);


--
-- TOC entry 6621 (class 1259 OID 19668)
-- Name: idx_market_transactions_buyer; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_market_transactions_buyer ON public.market_transactions USING btree (buyer_id);


--
-- TOC entry 6622 (class 1259 OID 19669)
-- Name: idx_market_transactions_seller; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_market_transactions_seller ON public.market_transactions USING btree (seller_id);


--
-- TOC entry 6623 (class 1259 OID 19670)
-- Name: idx_market_transactions_status; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_market_transactions_status ON public.market_transactions USING btree (status);


--
-- TOC entry 6624 (class 1259 OID 19671)
-- Name: idx_market_transactions_time; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_market_transactions_time ON public.market_transactions USING btree (created_at);


--
-- TOC entry 6598 (class 1259 OID 19503)
-- Name: idx_market_trends_item_type_item_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_market_trends_item_type_item_id ON public.market_trends USING btree (item_type, item_id);


--
-- TOC entry 6599 (class 1259 OID 19504)
-- Name: idx_market_trends_period; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_market_trends_period ON public.market_trends USING btree (period);


--
-- TOC entry 6403 (class 1259 OID 17923)
-- Name: idx_notifications_created_at; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_notifications_created_at ON public.notifications USING btree (created_at DESC);


--
-- TOC entry 6404 (class 1259 OID 17921)
-- Name: idx_notifications_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_notifications_player_id ON public.notifications USING btree (player_id);


--
-- TOC entry 6405 (class 1259 OID 17922)
-- Name: idx_notifications_read; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_notifications_read ON public.notifications USING btree (is_read);


--
-- TOC entry 6443 (class 1259 OID 18181)
-- Name: idx_performance_logs_created_at; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_performance_logs_created_at ON public.performance_logs USING btree (created_at);


--
-- TOC entry 6444 (class 1259 OID 18179)
-- Name: idx_performance_logs_endpoint; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_performance_logs_endpoint ON public.performance_logs USING btree (endpoint);


--
-- TOC entry 6445 (class 1259 OID 18180)
-- Name: idx_performance_logs_response_time; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_performance_logs_response_time ON public.performance_logs USING btree (response_time);


--
-- TOC entry 6314 (class 1259 OID 20340)
-- Name: idx_player_achievements_achievement; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_achievements_achievement ON public.player_achievements USING btree (achievement_id);


--
-- TOC entry 6315 (class 1259 OID 20218)
-- Name: idx_player_achievements_achievement_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_achievements_achievement_id ON public.player_achievements USING btree (achievement_id);


--
-- TOC entry 6316 (class 1259 OID 20339)
-- Name: idx_player_achievements_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_achievements_player ON public.player_achievements USING btree (player_id);


--
-- TOC entry 6317 (class 1259 OID 17586)
-- Name: idx_player_achievements_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_achievements_player_id ON public.player_achievements USING btree (player_id);


--
-- TOC entry 6858 (class 1259 OID 21080)
-- Name: idx_player_global_currency_player_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_player_global_currency_player_id ON public.player_global_currency USING btree (player_id);


--
-- TOC entry 6534 (class 1259 OID 18941)
-- Name: idx_player_hero_quests_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_hero_quests_player ON public.player_hero_quests USING btree (player_id);


--
-- TOC entry 6535 (class 1259 OID 18942)
-- Name: idx_player_hero_quests_status; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_hero_quests_status ON public.player_hero_quests USING btree (status);


--
-- TOC entry 6511 (class 1259 OID 18931)
-- Name: idx_player_heroes_active; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_heroes_active ON public.player_heroes USING btree (is_active);


--
-- TOC entry 6512 (class 1259 OID 18930)
-- Name: idx_player_heroes_level; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_heroes_level ON public.player_heroes USING btree (level);


--
-- TOC entry 6513 (class 1259 OID 18928)
-- Name: idx_player_heroes_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_heroes_player ON public.player_heroes USING btree (player_id);


--
-- TOC entry 6514 (class 1259 OID 18929)
-- Name: idx_player_heroes_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_heroes_type ON public.player_heroes USING btree (hero_type_id);


--
-- TOC entry 6821 (class 1259 OID 20919)
-- Name: idx_player_prestige_level; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_prestige_level ON public.player_prestige USING btree (prestige_level DESC);


--
-- TOC entry 6822 (class 1259 OID 20918)
-- Name: idx_player_prestige_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_prestige_player ON public.player_prestige USING btree (player_id);


--
-- TOC entry 6823 (class 1259 OID 20920)
-- Name: idx_player_prestige_points; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_prestige_points ON public.player_prestige USING btree (prestige_points DESC);


--
-- TOC entry 6366 (class 1259 OID 17911)
-- Name: idx_player_quests_expires; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_quests_expires ON public.player_quests USING btree (expires_at);


--
-- TOC entry 6367 (class 1259 OID 20429)
-- Name: idx_player_quests_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_quests_player ON public.player_quests USING btree (player_id);


--
-- TOC entry 6368 (class 1259 OID 17909)
-- Name: idx_player_quests_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_quests_player_id ON public.player_quests USING btree (player_id);


--
-- TOC entry 6369 (class 1259 OID 20430)
-- Name: idx_player_quests_quest; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_quests_quest ON public.player_quests USING btree (quest_id);


--
-- TOC entry 6370 (class 1259 OID 20355)
-- Name: idx_player_quests_quest_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_quests_quest_id ON public.player_quests USING btree (quest_id);


--
-- TOC entry 6371 (class 1259 OID 17910)
-- Name: idx_player_quests_status; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_quests_status ON public.player_quests USING btree (status);


--
-- TOC entry 6322 (class 1259 OID 17588)
-- Name: idx_player_statistics_name; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_statistics_name ON public.player_statistics USING btree (stat_name);


--
-- TOC entry 6323 (class 1259 OID 17587)
-- Name: idx_player_statistics_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_statistics_player_id ON public.player_statistics USING btree (player_id);


--
-- TOC entry 6345 (class 1259 OID 18342)
-- Name: idx_player_technologies_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_technologies_player ON public.player_technologies USING btree (player_id);


--
-- TOC entry 6346 (class 1259 OID 17904)
-- Name: idx_player_technologies_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_technologies_player_id ON public.player_technologies USING btree (player_id);


--
-- TOC entry 6347 (class 1259 OID 17905)
-- Name: idx_player_technologies_research_time; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_technologies_research_time ON public.player_technologies USING btree (research_completion_time);


--
-- TOC entry 6348 (class 1259 OID 18344)
-- Name: idx_player_technologies_researching; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_technologies_researching ON public.player_technologies USING btree (is_researching);


--
-- TOC entry 6349 (class 1259 OID 18343)
-- Name: idx_player_technologies_tech; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_technologies_tech ON public.player_technologies USING btree (technology_id);


--
-- TOC entry 6561 (class 1259 OID 19223)
-- Name: idx_player_units_available; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_units_available ON public.player_units USING btree (available_quantity);


--
-- TOC entry 6562 (class 1259 OID 19221)
-- Name: idx_player_units_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_units_player ON public.player_units USING btree (player_id);


--
-- TOC entry 6563 (class 1259 OID 19222)
-- Name: idx_player_units_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_player_units_type ON public.player_units USING btree (unit_type_id);


--
-- TOC entry 6863 (class 1259 OID 21081)
-- Name: idx_player_world_currency_player_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_player_world_currency_player_id ON public.player_world_currency USING btree (player_id);


--
-- TOC entry 6864 (class 1259 OID 21083)
-- Name: idx_player_world_currency_player_world; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_player_world_currency_player_world ON public.player_world_currency USING btree (player_id, world_id);


--
-- TOC entry 6865 (class 1259 OID 21082)
-- Name: idx_player_world_currency_world_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_player_world_currency_world_id ON public.player_world_currency USING btree (world_id);


--
-- TOC entry 6847 (class 1259 OID 21006)
-- Name: idx_player_world_entries_active_player; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX idx_player_world_entries_active_player ON public.player_world_entries USING btree (player_id) WHERE (is_active = true);


--
-- TOC entry 6848 (class 1259 OID 21004)
-- Name: idx_player_world_entries_is_active; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_player_world_entries_is_active ON public.player_world_entries USING btree (is_active);


--
-- TOC entry 6849 (class 1259 OID 21005)
-- Name: idx_player_world_entries_last_seen; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_player_world_entries_last_seen ON public.player_world_entries USING btree (last_seen);


--
-- TOC entry 6850 (class 1259 OID 21002)
-- Name: idx_player_world_entries_player_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_player_world_entries_player_id ON public.player_world_entries USING btree (player_id);


--
-- TOC entry 6851 (class 1259 OID 21003)
-- Name: idx_player_world_entries_world_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_player_world_entries_world_id ON public.player_world_entries USING btree (world_id);


--
-- TOC entry 6192 (class 1259 OID 20964)
-- Name: idx_players_alliance_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_players_alliance_id ON public.players USING btree (alliance_id);


--
-- TOC entry 6193 (class 1259 OID 17554)
-- Name: idx_players_email; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_players_email ON public.players USING btree (email);


--
-- TOC entry 6194 (class 1259 OID 20967)
-- Name: idx_players_gems; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_players_gems ON public.players USING btree (gems DESC);


--
-- TOC entry 6195 (class 1259 OID 20966)
-- Name: idx_players_gold; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_players_gold ON public.players USING btree (gold DESC);


--
-- TOC entry 6196 (class 1259 OID 18361)
-- Name: idx_players_is_active; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_players_is_active ON public.players USING btree (is_active);


--
-- TOC entry 6197 (class 1259 OID 20963)
-- Name: idx_players_is_banned; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_players_is_banned ON public.players USING btree (is_banned);


--
-- TOC entry 6198 (class 1259 OID 18362)
-- Name: idx_players_is_online; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_players_is_online ON public.players USING btree (is_online);


--
-- TOC entry 6199 (class 1259 OID 18360)
-- Name: idx_players_last_active; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_players_last_active ON public.players USING btree (last_active);


--
-- TOC entry 6200 (class 1259 OID 18359)
-- Name: idx_players_race_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_players_race_id ON public.players USING btree (race_id);


--
-- TOC entry 6201 (class 1259 OID 20962)
-- Name: idx_players_role; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_players_role ON public.players USING btree (role);


--
-- TOC entry 6202 (class 1259 OID 17553)
-- Name: idx_players_username; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_players_username ON public.players USING btree (username);


--
-- TOC entry 6203 (class 1259 OID 20965)
-- Name: idx_players_world_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_players_world_id ON public.players USING btree (world_id);


--
-- TOC entry 6816 (class 1259 OID 20921)
-- Name: idx_prestige_achievements_category; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_prestige_achievements_category ON public.prestige_achievements USING btree (category);


--
-- TOC entry 6839 (class 1259 OID 20925)
-- Name: idx_prestige_notifications_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_prestige_notifications_player ON public.prestige_notifications USING btree (player_id);


--
-- TOC entry 6840 (class 1259 OID 20926)
-- Name: idx_prestige_notifications_read; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_prestige_notifications_read ON public.prestige_notifications USING btree (is_read);


--
-- TOC entry 6828 (class 1259 OID 20922)
-- Name: idx_prestige_rankings_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_prestige_rankings_player ON public.prestige_rankings USING btree (player_id);


--
-- TOC entry 6829 (class 1259 OID 20923)
-- Name: idx_prestige_rankings_rank; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_prestige_rankings_rank ON public.prestige_rankings USING btree (rank_position);


--
-- TOC entry 6834 (class 1259 OID 20924)
-- Name: idx_prestige_stats_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_prestige_stats_player ON public.prestige_stats USING btree (player_id);


--
-- TOC entry 6604 (class 1259 OID 19505)
-- Name: idx_price_history_item_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_price_history_item_id ON public.price_history USING btree (item_id);


--
-- TOC entry 6605 (class 1259 OID 19506)
-- Name: idx_price_history_timestamp; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_price_history_timestamp ON public.price_history USING btree ("timestamp");


--
-- TOC entry 6753 (class 1259 OID 20435)
-- Name: idx_quest_notifications_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_quest_notifications_player ON public.quest_notifications USING btree (player_id);


--
-- TOC entry 6754 (class 1259 OID 20436)
-- Name: idx_quest_notifications_read; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_quest_notifications_read ON public.quest_notifications USING btree (is_read);


--
-- TOC entry 6743 (class 1259 OID 20431)
-- Name: idx_quest_rewards_quest; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_quest_rewards_quest ON public.quest_rewards USING btree (quest_id);


--
-- TOC entry 6744 (class 1259 OID 20432)
-- Name: idx_quest_rewards_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_quest_rewards_type ON public.quest_rewards USING btree (reward_type);


--
-- TOC entry 6747 (class 1259 OID 20433)
-- Name: idx_quest_statistics_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_quest_statistics_player ON public.quest_statistics USING btree (player_id);


--
-- TOC entry 6748 (class 1259 OID 20434)
-- Name: idx_quest_statistics_points; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_quest_statistics_points ON public.quest_statistics USING btree (total_points DESC);


--
-- TOC entry 6361 (class 1259 OID 20428)
-- Name: idx_quests_active; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_quests_active ON public.quests USING btree (is_active);


--
-- TOC entry 6362 (class 1259 OID 20426)
-- Name: idx_quests_category; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_quests_category ON public.quests USING btree (category);


--
-- TOC entry 6363 (class 1259 OID 20427)
-- Name: idx_quests_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_quests_type ON public.quests USING btree (quest_type);


--
-- TOC entry 6662 (class 1259 OID 20061)
-- Name: idx_ranking_entries_alliance; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_ranking_entries_alliance ON public.ranking_entries USING btree (alliance_id);


--
-- TOC entry 6663 (class 1259 OID 20060)
-- Name: idx_ranking_entries_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_ranking_entries_player ON public.ranking_entries USING btree (player_id);


--
-- TOC entry 6664 (class 1259 OID 20064)
-- Name: idx_ranking_entries_points; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_ranking_entries_points ON public.ranking_entries USING btree (total_points DESC);


--
-- TOC entry 6665 (class 1259 OID 20059)
-- Name: idx_ranking_entries_position; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_ranking_entries_position ON public.ranking_entries USING btree (rank_position);


--
-- TOC entry 6666 (class 1259 OID 20058)
-- Name: idx_ranking_entries_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_ranking_entries_type ON public.ranking_entries USING btree (ranking_type_id);


--
-- TOC entry 6667 (class 1259 OID 20062)
-- Name: idx_ranking_entries_village; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_ranking_entries_village ON public.ranking_entries USING btree (village_id);


--
-- TOC entry 6668 (class 1259 OID 20063)
-- Name: idx_ranking_entries_world; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_ranking_entries_world ON public.ranking_entries USING btree (world_id);


--
-- TOC entry 6653 (class 1259 OID 19885)
-- Name: idx_ranking_history_category_entity; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_ranking_history_category_entity ON public.ranking_history USING btree (category_id, entity_type, entity_id);


--
-- TOC entry 6654 (class 1259 OID 19883)
-- Name: idx_ranking_history_entity; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_ranking_history_entity ON public.ranking_history USING btree (entity_type, entity_id);


--
-- TOC entry 6655 (class 1259 OID 19884)
-- Name: idx_ranking_history_recorded_at; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_ranking_history_recorded_at ON public.ranking_history USING btree (recorded_at);


--
-- TOC entry 6396 (class 1259 OID 17920)
-- Name: idx_ranking_positions_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_ranking_positions_player_id ON public.ranking_positions USING btree (player_id);


--
-- TOC entry 6397 (class 1259 OID 17919)
-- Name: idx_ranking_positions_position; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_ranking_positions_position ON public.ranking_positions USING btree ("position");


--
-- TOC entry 6398 (class 1259 OID 17918)
-- Name: idx_ranking_positions_ranking_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_ranking_positions_ranking_id ON public.ranking_positions USING btree (ranking_id);


--
-- TOC entry 6683 (class 1259 OID 20070)
-- Name: idx_ranking_rewards_rank; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_ranking_rewards_rank ON public.ranking_rewards USING btree (rank_min, rank_max);


--
-- TOC entry 6684 (class 1259 OID 20069)
-- Name: idx_ranking_rewards_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_ranking_rewards_type ON public.ranking_rewards USING btree (ranking_type_id);


--
-- TOC entry 6484 (class 1259 OID 18556)
-- Name: idx_research_queue_player; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_research_queue_player ON public.research_queue USING btree (player_id);


--
-- TOC entry 6224 (class 1259 OID 17559)
-- Name: idx_resources_last_updated; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_resources_last_updated ON public.resources USING btree (last_updated);


--
-- TOC entry 6225 (class 1259 OID 17558)
-- Name: idx_resources_village_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_resources_village_id ON public.resources USING btree (village_id);


--
-- TOC entry 6437 (class 1259 OID 18178)
-- Name: idx_security_logs_created_at; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_security_logs_created_at ON public.security_logs USING btree (created_at);


--
-- TOC entry 6438 (class 1259 OID 18175)
-- Name: idx_security_logs_event_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_security_logs_event_type ON public.security_logs USING btree (event_type);


--
-- TOC entry 6439 (class 1259 OID 18177)
-- Name: idx_security_logs_ip_address; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_security_logs_ip_address ON public.security_logs USING btree (ip_address);


--
-- TOC entry 6440 (class 1259 OID 18176)
-- Name: idx_security_logs_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_security_logs_player_id ON public.security_logs USING btree (player_id);


--
-- TOC entry 6448 (class 1259 OID 18182)
-- Name: idx_server_metrics_name; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_server_metrics_name ON public.server_metrics USING btree (metric_name);


--
-- TOC entry 6449 (class 1259 OID 18183)
-- Name: idx_server_metrics_recorded_at; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_server_metrics_recorded_at ON public.server_metrics USING btree (recorded_at);


--
-- TOC entry 6376 (class 1259 OID 17913)
-- Name: idx_special_buildings_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_special_buildings_type ON public.special_buildings USING btree (building_type);


--
-- TOC entry 6377 (class 1259 OID 17912)
-- Name: idx_special_buildings_village_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_special_buildings_village_id ON public.special_buildings USING btree (village_id);


--
-- TOC entry 6389 (class 1259 OID 17917)
-- Name: idx_special_event_participation_event_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_special_event_participation_event_id ON public.special_event_participation USING btree (event_id);


--
-- TOC entry 6385 (class 1259 OID 17915)
-- Name: idx_special_events_time; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_special_events_time ON public.special_events USING btree (start_time, end_time);


--
-- TOC entry 6386 (class 1259 OID 17916)
-- Name: idx_special_events_world_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_special_events_world_id ON public.special_events USING btree (world_id);


--
-- TOC entry 6380 (class 1259 OID 17914)
-- Name: idx_special_resources_village_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_special_resources_village_id ON public.special_resources USING btree (village_id);


--
-- TOC entry 6691 (class 1259 OID 20071)
-- Name: idx_statistics_snapshots_date; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_statistics_snapshots_date ON public.statistics_snapshots USING btree (snapshot_date);


--
-- TOC entry 6692 (class 1259 OID 20072)
-- Name: idx_statistics_snapshots_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_statistics_snapshots_type ON public.statistics_snapshots USING btree (ranking_type_id);


--
-- TOC entry 6452 (class 1259 OID 18186)
-- Name: idx_system_alerts_active; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_system_alerts_active ON public.system_alerts USING btree (is_active);


--
-- TOC entry 6453 (class 1259 OID 18187)
-- Name: idx_system_alerts_created_at; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_system_alerts_created_at ON public.system_alerts USING btree (created_at);


--
-- TOC entry 6454 (class 1259 OID 18185)
-- Name: idx_system_alerts_severity; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_system_alerts_severity ON public.system_alerts USING btree (severity);


--
-- TOC entry 6455 (class 1259 OID 18184)
-- Name: idx_system_alerts_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_system_alerts_type ON public.system_alerts USING btree (alert_type);


--
-- TOC entry 6431 (class 1259 OID 18172)
-- Name: idx_system_logs_category; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_system_logs_category ON public.system_logs USING btree (category);


--
-- TOC entry 6432 (class 1259 OID 18173)
-- Name: idx_system_logs_created_at; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_system_logs_created_at ON public.system_logs USING btree (created_at);


--
-- TOC entry 6433 (class 1259 OID 18171)
-- Name: idx_system_logs_level; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_system_logs_level ON public.system_logs USING btree (log_level);


--
-- TOC entry 6434 (class 1259 OID 18174)
-- Name: idx_system_logs_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_system_logs_player_id ON public.system_logs USING btree (player_id);


--
-- TOC entry 6467 (class 1259 OID 18193)
-- Name: idx_task_executions_started_at; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_task_executions_started_at ON public.task_executions USING btree (started_at);


--
-- TOC entry 6468 (class 1259 OID 18192)
-- Name: idx_task_executions_status; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_task_executions_status ON public.task_executions USING btree (status);


--
-- TOC entry 6469 (class 1259 OID 18191)
-- Name: idx_task_executions_task_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_task_executions_task_id ON public.task_executions USING btree (task_id);


--
-- TOC entry 6339 (class 1259 OID 18562)
-- Name: idx_technologies_active; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_technologies_active ON public.technologies USING btree (is_active);


--
-- TOC entry 6340 (class 1259 OID 18341)
-- Name: idx_technologies_category; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_technologies_category ON public.technologies USING btree (category);


--
-- TOC entry 6493 (class 1259 OID 18559)
-- Name: idx_technology_costs_tech; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_technology_costs_tech ON public.technology_costs USING btree (technology_id);


--
-- TOC entry 6487 (class 1259 OID 18557)
-- Name: idx_technology_effects_tech; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_technology_effects_tech ON public.technology_effects USING btree (technology_id);


--
-- TOC entry 6490 (class 1259 OID 18558)
-- Name: idx_technology_requirements_tech; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_technology_requirements_tech ON public.technology_requirements USING btree (technology_id);


--
-- TOC entry 6802 (class 1259 OID 20810)
-- Name: idx_titles_category; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_titles_category ON public.titles USING btree (category_id);


--
-- TOC entry 6803 (class 1259 OID 20811)
-- Name: idx_titles_rarity; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_titles_rarity ON public.titles USING btree (rarity);


--
-- TOC entry 6301 (class 1259 OID 17584)
-- Name: idx_trade_offers_active; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_trade_offers_active ON public.trade_offers USING btree (is_active);


--
-- TOC entry 6302 (class 1259 OID 17582)
-- Name: idx_trade_offers_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_trade_offers_player_id ON public.trade_offers USING btree (player_id);


--
-- TOC entry 6303 (class 1259 OID 17583)
-- Name: idx_trade_offers_resource_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_trade_offers_resource_type ON public.trade_offers USING btree (resource_type);


--
-- TOC entry 6412 (class 1259 OID 17927)
-- Name: idx_trade_reports_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_trade_reports_player_id ON public.trade_reports USING btree (player_id);


--
-- TOC entry 6413 (class 1259 OID 17926)
-- Name: idx_trade_reports_transaction_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_trade_reports_transaction_id ON public.trade_reports USING btree (transaction_id);


--
-- TOC entry 6306 (class 1259 OID 17585)
-- Name: idx_trade_transactions_time; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_trade_transactions_time ON public.trade_transactions USING btree (transaction_time);


--
-- TOC entry 6256 (class 1259 OID 17566)
-- Name: idx_training_queue_completion; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_training_queue_completion ON public.training_queue USING btree (completes_at);


--
-- TOC entry 6257 (class 1259 OID 17565)
-- Name: idx_training_queue_village_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_training_queue_village_id ON public.training_queue USING btree (village_id);


--
-- TOC entry 6297 (class 1259 OID 17581)
-- Name: idx_troop_movements_arrival_time; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_troop_movements_arrival_time ON public.troop_movements USING btree (arrival_time);


--
-- TOC entry 6298 (class 1259 OID 17580)
-- Name: idx_troop_movements_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_troop_movements_player_id ON public.troop_movements USING btree (player_id);


--
-- TOC entry 6249 (class 1259 OID 17564)
-- Name: idx_units_training_time; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_units_training_time ON public.units USING btree (training_completion_time);


--
-- TOC entry 6250 (class 1259 OID 17563)
-- Name: idx_units_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_units_type ON public.units USING btree (unit_type_id);


--
-- TOC entry 6251 (class 1259 OID 17562)
-- Name: idx_units_village_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_units_village_id ON public.units USING btree (village_id);


--
-- TOC entry 6677 (class 1259 OID 20067)
-- Name: idx_village_statistics_points; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_village_statistics_points ON public.village_statistics USING btree (total_points DESC);


--
-- TOC entry 6217 (class 1259 OID 17557)
-- Name: idx_villages_coordinates; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_villages_coordinates ON public.villages USING btree (world_id, x_coordinate, y_coordinate);


--
-- TOC entry 6218 (class 1259 OID 17555)
-- Name: idx_villages_player_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_villages_player_id ON public.villages USING btree (player_id);


--
-- TOC entry 6219 (class 1259 OID 17556)
-- Name: idx_villages_world_id; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_villages_world_id ON public.villages USING btree (world_id);


--
-- TOC entry 6680 (class 1259 OID 20068)
-- Name: idx_world_statistics_players; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_world_statistics_players ON public.world_statistics USING btree (total_players DESC);


--
-- TOC entry 6210 (class 1259 OID 20975)
-- Name: idx_worlds_current_players; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_worlds_current_players ON public.worlds USING btree (current_players);


--
-- TOC entry 6211 (class 1259 OID 21011)
-- Name: idx_worlds_is_online; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_worlds_is_online ON public.worlds USING btree (is_online);


--
-- TOC entry 6212 (class 1259 OID 21012)
-- Name: idx_worlds_status; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_worlds_status ON public.worlds USING btree (status);


--
-- TOC entry 6213 (class 1259 OID 20976)
-- Name: idx_worlds_updated_at; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_worlds_updated_at ON public.worlds USING btree (updated_at);


--
-- TOC entry 6214 (class 1259 OID 20974)
-- Name: idx_worlds_world_type; Type: INDEX; Schema: public; Owner: etheria_user
--

CREATE INDEX idx_worlds_world_type ON public.worlds USING btree (world_type);


--
-- TOC entry 7041 (class 2620 OID 21111)
-- Name: villages create_initial_buildings; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER create_initial_buildings AFTER INSERT ON public.villages FOR EACH ROW EXECUTE FUNCTION public.create_initial_buildings();

ALTER TABLE public.villages DISABLE TRIGGER create_initial_buildings;


--
-- TOC entry 7061 (class 2620 OID 20075)
-- Name: ranking_entries trigger_calculate_rank_change; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_calculate_rank_change BEFORE UPDATE ON public.ranking_entries FOR EACH ROW EXECUTE FUNCTION public.calculate_rank_change();


--
-- TOC entry 7054 (class 2620 OID 18348)
-- Name: player_technologies trigger_check_research_achievements; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_check_research_achievements AFTER UPDATE ON public.player_technologies FOR EACH ROW EXECUTE FUNCTION public.check_research_achievements();


--
-- TOC entry 7042 (class 2620 OID 17597)
-- Name: villages trigger_initialize_village_resources; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_initialize_village_resources AFTER INSERT ON public.villages FOR EACH ROW EXECUTE FUNCTION public.initialize_village_resources();

ALTER TABLE public.villages DISABLE TRIGGER trigger_initialize_village_resources;


--
-- TOC entry 7043 (class 2620 OID 17601)
-- Name: villages trigger_initialize_village_units; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_initialize_village_units AFTER INSERT ON public.villages FOR EACH ROW EXECUTE FUNCTION public.initialize_village_units();


--
-- TOC entry 7047 (class 2620 OID 19238)
-- Name: units trigger_sync_player_units; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_sync_player_units AFTER INSERT OR UPDATE ON public.units FOR EACH ROW EXECUTE FUNCTION public.sync_player_units();


--
-- TOC entry 7052 (class 2620 OID 20354)
-- Name: player_achievements trigger_update_achievement_stats; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_achievement_stats AFTER INSERT OR UPDATE ON public.player_achievements FOR EACH ROW EXECUTE FUNCTION public.update_achievement_stats();


--
-- TOC entry 7058 (class 2620 OID 18205)
-- Name: admin_actions trigger_update_admin_last_action; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_admin_last_action AFTER INSERT ON public.admin_actions FOR EACH ROW EXECUTE FUNCTION public.update_admin_last_action();


--
-- TOC entry 7050 (class 2620 OID 17608)
-- Name: alliance_members trigger_update_alliance_member_count; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_alliance_member_count AFTER INSERT OR DELETE ON public.alliance_members FOR EACH ROW EXECUTE FUNCTION public.update_alliance_member_count();


--
-- TOC entry 7049 (class 2620 OID 19889)
-- Name: alliances trigger_update_alliance_statistics; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_alliance_statistics AFTER INSERT OR UPDATE ON public.alliances FOR EACH ROW EXECUTE FUNCTION public.update_alliance_statistics();


--
-- TOC entry 7046 (class 2620 OID 17605)
-- Name: buildings trigger_update_buildings_updated_at; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_buildings_updated_at BEFORE UPDATE ON public.buildings FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- TOC entry 7051 (class 2620 OID 20223)
-- Name: achievements trigger_update_category_stats; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_category_stats AFTER INSERT OR DELETE OR UPDATE ON public.achievements FOR EACH ROW EXECUTE FUNCTION public.update_achievement_category_stats();


--
-- TOC entry 7068 (class 2620 OID 21089)
-- Name: currency_config trigger_update_currency_config_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_update_currency_config_updated_at BEFORE UPDATE ON public.currency_config FOR EACH ROW EXECUTE FUNCTION public.update_currency_updated_at();


--
-- TOC entry 7063 (class 2620 OID 20631)
-- Name: event_participants trigger_update_event_participant_stats; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_event_participant_stats AFTER INSERT OR UPDATE ON public.event_participants FOR EACH ROW EXECUTE FUNCTION public.update_event_participant_stats();


--
-- TOC entry 7059 (class 2620 OID 18948)
-- Name: player_heroes trigger_update_hero_statistics; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_hero_statistics AFTER INSERT OR UPDATE ON public.player_heroes FOR EACH ROW EXECUTE FUNCTION public.update_hero_statistics();


--
-- TOC entry 7053 (class 2620 OID 20227)
-- Name: player_achievements trigger_update_player_achievement_stats; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_player_achievement_stats AFTER INSERT OR DELETE OR UPDATE ON public.player_achievements FOR EACH ROW EXECUTE FUNCTION public.update_player_achievement_stats();


--
-- TOC entry 7060 (class 2620 OID 19680)
-- Name: market_transactions trigger_update_player_economy_stats; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_player_economy_stats AFTER INSERT OR UPDATE ON public.market_transactions FOR EACH ROW EXECUTE FUNCTION public.update_player_economy_stats();


--
-- TOC entry 7069 (class 2620 OID 21090)
-- Name: player_global_currency trigger_update_player_global_currency_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_update_player_global_currency_updated_at BEFORE UPDATE ON public.player_global_currency FOR EACH ROW EXECUTE FUNCTION public.update_currency_updated_at();


--
-- TOC entry 7038 (class 2620 OID 20946)
-- Name: players trigger_update_player_statistics; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_player_statistics AFTER INSERT ON public.players FOR EACH ROW EXECUTE FUNCTION public.update_player_statistics();


--
-- TOC entry 7062 (class 2620 OID 20077)
-- Name: ranking_entries trigger_update_player_stats; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_player_stats AFTER INSERT OR UPDATE ON public.ranking_entries FOR EACH ROW EXECUTE FUNCTION public.update_player_stats();


--
-- TOC entry 7070 (class 2620 OID 21091)
-- Name: player_world_currency trigger_update_player_world_currency_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_update_player_world_currency_updated_at BEFORE UPDATE ON public.player_world_currency FOR EACH ROW EXECUTE FUNCTION public.update_currency_updated_at();


--
-- TOC entry 7067 (class 2620 OID 21103)
-- Name: player_world_entries trigger_update_player_world_entries_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_update_player_world_entries_updated_at BEFORE UPDATE ON public.player_world_entries FOR EACH ROW EXECUTE FUNCTION public.update_player_world_entries_updated_at();


--
-- TOC entry 7039 (class 2620 OID 17603)
-- Name: players trigger_update_players_updated_at; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_players_updated_at BEFORE UPDATE ON public.players FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- TOC entry 7066 (class 2620 OID 20932)
-- Name: player_prestige trigger_update_prestige_stats; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_prestige_stats AFTER INSERT OR UPDATE ON public.player_prestige FOR EACH ROW EXECUTE FUNCTION public.update_prestige_stats();


--
-- TOC entry 7056 (class 2620 OID 20440)
-- Name: player_quests trigger_update_quest_stats; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_quest_stats AFTER INSERT OR UPDATE ON public.player_quests FOR EACH ROW EXECUTE FUNCTION public.update_quest_stats();


--
-- TOC entry 7057 (class 2620 OID 17929)
-- Name: ranking_positions trigger_update_ranking_positions; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_ranking_positions BEFORE UPDATE ON public.ranking_positions FOR EACH ROW EXECUTE FUNCTION public.update_ranking_positions();


--
-- TOC entry 7055 (class 2620 OID 18560)
-- Name: player_technologies trigger_update_research_statistics; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_research_statistics AFTER INSERT OR UPDATE ON public.player_technologies FOR EACH ROW EXECUTE FUNCTION public.update_research_statistics();


--
-- TOC entry 7045 (class 2620 OID 17593)
-- Name: resources trigger_update_resources_timestamp; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_resources_timestamp BEFORE UPDATE ON public.resources FOR EACH ROW EXECUTE FUNCTION public.update_resources_timestamp();


--
-- TOC entry 7064 (class 2620 OID 20813)
-- Name: title_categories trigger_update_title_categories_updated_at; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_title_categories_updated_at BEFORE UPDATE ON public.title_categories FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- TOC entry 7065 (class 2620 OID 20814)
-- Name: titles trigger_update_titles_updated_at; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_titles_updated_at BEFORE UPDATE ON public.titles FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- TOC entry 7048 (class 2620 OID 17606)
-- Name: units trigger_update_units_updated_at; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_units_updated_at BEFORE UPDATE ON public.units FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- TOC entry 7044 (class 2620 OID 17604)
-- Name: villages trigger_update_villages_updated_at; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_villages_updated_at BEFORE UPDATE ON public.villages FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- TOC entry 7040 (class 2620 OID 21095)
-- Name: worlds trigger_update_worlds_updated_at; Type: TRIGGER; Schema: public; Owner: etheria_user
--

CREATE TRIGGER trigger_update_worlds_updated_at BEFORE UPDATE ON public.worlds FOR EACH ROW EXECUTE FUNCTION public.update_worlds_updated_at();


--
-- TOC entry 7002 (class 2606 OID 20294)
-- Name: achievement_leaderboard achievement_leaderboard_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_leaderboard
    ADD CONSTRAINT achievement_leaderboard_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7003 (class 2606 OID 20311)
-- Name: achievement_milestones achievement_milestones_achievement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_milestones
    ADD CONSTRAINT achievement_milestones_achievement_id_fkey FOREIGN KEY (achievement_id) REFERENCES public.achievements(id) ON DELETE CASCADE;


--
-- TOC entry 7004 (class 2606 OID 20333)
-- Name: achievement_notifications achievement_notifications_achievement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_notifications
    ADD CONSTRAINT achievement_notifications_achievement_id_fkey FOREIGN KEY (achievement_id) REFERENCES public.achievements(id) ON DELETE CASCADE;


--
-- TOC entry 7005 (class 2606 OID 20328)
-- Name: achievement_notifications achievement_notifications_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_notifications
    ADD CONSTRAINT achievement_notifications_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6998 (class 2606 OID 20244)
-- Name: achievement_progress achievement_progress_achievement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_progress
    ADD CONSTRAINT achievement_progress_achievement_id_fkey FOREIGN KEY (achievement_id) REFERENCES public.achievements(id) ON DELETE CASCADE;


--
-- TOC entry 6999 (class 2606 OID 20239)
-- Name: achievement_progress achievement_progress_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_progress
    ADD CONSTRAINT achievement_progress_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7000 (class 2606 OID 20261)
-- Name: achievement_rewards achievement_rewards_achievement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_rewards
    ADD CONSTRAINT achievement_rewards_achievement_id_fkey FOREIGN KEY (achievement_id) REFERENCES public.achievements(id) ON DELETE CASCADE;


--
-- TOC entry 7001 (class 2606 OID 20278)
-- Name: achievement_statistics achievement_statistics_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.achievement_statistics
    ADD CONSTRAINT achievement_statistics_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6938 (class 2606 OID 17998)
-- Name: admin_actions admin_actions_admin_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.admin_actions
    ADD CONSTRAINT admin_actions_admin_id_fkey FOREIGN KEY (admin_id) REFERENCES public.admins(id);


--
-- TOC entry 6935 (class 2606 OID 17984)
-- Name: admins admins_assigned_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.admins
    ADD CONSTRAINT admins_assigned_by_fkey FOREIGN KEY (assigned_by) REFERENCES public.players(id);


--
-- TOC entry 6936 (class 2606 OID 17974)
-- Name: admins admins_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.admins
    ADD CONSTRAINT admins_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6937 (class 2606 OID 17979)
-- Name: admins admins_role_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.admins
    ADD CONSTRAINT admins_role_id_fkey FOREIGN KEY (role_id) REFERENCES public.admin_roles(id);


--
-- TOC entry 6894 (class 2606 OID 17350)
-- Name: alliance_members alliance_members_alliance_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.alliance_members
    ADD CONSTRAINT alliance_members_alliance_id_fkey FOREIGN KEY (alliance_id) REFERENCES public.alliances(id) ON DELETE CASCADE;


--
-- TOC entry 6895 (class 2606 OID 17355)
-- Name: alliance_members alliance_members_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.alliance_members
    ADD CONSTRAINT alliance_members_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6991 (class 2606 OID 19962)
-- Name: alliance_statistics alliance_statistics_alliance_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.alliance_statistics
    ADD CONSTRAINT alliance_statistics_alliance_id_fkey FOREIGN KEY (alliance_id) REFERENCES public.alliances(id) ON DELETE CASCADE;


--
-- TOC entry 6892 (class 2606 OID 17328)
-- Name: alliances alliances_leader_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.alliances
    ADD CONSTRAINT alliances_leader_id_fkey FOREIGN KEY (leader_id) REFERENCES public.players(id);


--
-- TOC entry 6893 (class 2606 OID 17333)
-- Name: alliances alliances_world_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.alliances
    ADD CONSTRAINT alliances_world_id_fkey FOREIGN KEY (world_id) REFERENCES public.worlds(id);


--
-- TOC entry 6930 (class 2606 OID 17873)
-- Name: battle_reports battle_reports_attacker_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_reports
    ADD CONSTRAINT battle_reports_attacker_id_fkey FOREIGN KEY (attacker_id) REFERENCES public.players(id);


--
-- TOC entry 6931 (class 2606 OID 17868)
-- Name: battle_reports battle_reports_battle_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_reports
    ADD CONSTRAINT battle_reports_battle_id_fkey FOREIGN KEY (battle_id) REFERENCES public.battles(id) ON DELETE CASCADE;


--
-- TOC entry 6932 (class 2606 OID 17878)
-- Name: battle_reports battle_reports_defender_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_reports
    ADD CONSTRAINT battle_reports_defender_id_fkey FOREIGN KEY (defender_id) REFERENCES public.players(id);


--
-- TOC entry 6968 (class 2606 OID 19190)
-- Name: battle_simulations battle_simulations_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_simulations
    ADD CONSTRAINT battle_simulations_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id);


--
-- TOC entry 6967 (class 2606 OID 19176)
-- Name: battle_waves battle_waves_battle_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battle_waves
    ADD CONSTRAINT battle_waves_battle_id_fkey FOREIGN KEY (battle_id) REFERENCES public.battles(id) ON DELETE CASCADE;


--
-- TOC entry 6896 (class 2606 OID 17374)
-- Name: battles battles_attacker_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battles
    ADD CONSTRAINT battles_attacker_id_fkey FOREIGN KEY (attacker_id) REFERENCES public.players(id);


--
-- TOC entry 6897 (class 2606 OID 17384)
-- Name: battles battles_attacker_village_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battles
    ADD CONSTRAINT battles_attacker_village_id_fkey FOREIGN KEY (attacker_village_id) REFERENCES public.villages(id);


--
-- TOC entry 6898 (class 2606 OID 17379)
-- Name: battles battles_defender_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battles
    ADD CONSTRAINT battles_defender_id_fkey FOREIGN KEY (defender_id) REFERENCES public.players(id);


--
-- TOC entry 6899 (class 2606 OID 17389)
-- Name: battles battles_defender_village_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battles
    ADD CONSTRAINT battles_defender_village_id_fkey FOREIGN KEY (defender_village_id) REFERENCES public.villages(id);


--
-- TOC entry 6900 (class 2606 OID 17394)
-- Name: battles battles_winner_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.battles
    ADD CONSTRAINT battles_winner_id_fkey FOREIGN KEY (winner_id) REFERENCES public.players(id);


--
-- TOC entry 6881 (class 2606 OID 17101)
-- Name: buildings buildings_village_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.buildings
    ADD CONSTRAINT buildings_village_id_fkey FOREIGN KEY (village_id) REFERENCES public.villages(id);


--
-- TOC entry 6890 (class 2606 OID 17301)
-- Name: chat_channel_members chat_channel_members_channel_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.chat_channel_members
    ADD CONSTRAINT chat_channel_members_channel_id_fkey FOREIGN KEY (channel_id) REFERENCES public.chat_channels(id) ON DELETE CASCADE;


--
-- TOC entry 6891 (class 2606 OID 17306)
-- Name: chat_channel_members chat_channel_members_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.chat_channel_members
    ADD CONSTRAINT chat_channel_members_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6887 (class 2606 OID 17265)
-- Name: chat_channels chat_channels_world_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.chat_channels
    ADD CONSTRAINT chat_channels_world_id_fkey FOREIGN KEY (world_id) REFERENCES public.worlds(id) ON DELETE CASCADE;


--
-- TOC entry 6888 (class 2606 OID 17280)
-- Name: chat_messages chat_messages_channel_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.chat_messages
    ADD CONSTRAINT chat_messages_channel_id_fkey FOREIGN KEY (channel_id) REFERENCES public.chat_channels(id) ON DELETE CASCADE;


--
-- TOC entry 6889 (class 2606 OID 17285)
-- Name: chat_messages chat_messages_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.chat_messages
    ADD CONSTRAINT chat_messages_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6979 (class 2606 OID 19608)
-- Name: currency_exchanges currency_exchanges_from_currency_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.currency_exchanges
    ADD CONSTRAINT currency_exchanges_from_currency_id_fkey FOREIGN KEY (from_currency_id) REFERENCES public.currencies(id);


--
-- TOC entry 6980 (class 2606 OID 19603)
-- Name: currency_exchanges currency_exchanges_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.currency_exchanges
    ADD CONSTRAINT currency_exchanges_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6981 (class 2606 OID 19613)
-- Name: currency_exchanges currency_exchanges_to_currency_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.currency_exchanges
    ADD CONSTRAINT currency_exchanges_to_currency_id_fkey FOREIGN KEY (to_currency_id) REFERENCES public.currencies(id);


--
-- TOC entry 7036 (class 2606 OID 21070)
-- Name: currency_transactions currency_transactions_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.currency_transactions
    ADD CONSTRAINT currency_transactions_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7037 (class 2606 OID 21075)
-- Name: currency_transactions currency_transactions_world_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.currency_transactions
    ADD CONSTRAINT currency_transactions_world_id_fkey FOREIGN KEY (world_id) REFERENCES public.worlds(id) ON DELETE CASCADE;


--
-- TOC entry 6945 (class 2606 OID 18124)
-- Name: database_backups database_backups_created_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.database_backups
    ADD CONSTRAINT database_backups_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.admins(id);


--
-- TOC entry 6946 (class 2606 OID 18140)
-- Name: database_restores database_restores_backup_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.database_restores
    ADD CONSTRAINT database_restores_backup_id_fkey FOREIGN KEY (backup_id) REFERENCES public.database_backups(id);


--
-- TOC entry 6947 (class 2606 OID 18145)
-- Name: database_restores database_restores_created_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.database_restores
    ADD CONSTRAINT database_restores_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.admins(id);


--
-- TOC entry 6983 (class 2606 OID 19658)
-- Name: economy_statistics economy_statistics_most_active_trader_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.economy_statistics
    ADD CONSTRAINT economy_statistics_most_active_trader_fkey FOREIGN KEY (most_active_trader) REFERENCES public.players(id);


--
-- TOC entry 7020 (class 2606 OID 20578)
-- Name: event_leaderboard event_leaderboard_event_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_leaderboard
    ADD CONSTRAINT event_leaderboard_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.events(id) ON DELETE CASCADE;


--
-- TOC entry 7021 (class 2606 OID 20583)
-- Name: event_leaderboard event_leaderboard_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_leaderboard
    ADD CONSTRAINT event_leaderboard_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7012 (class 2606 OID 20491)
-- Name: event_matches event_matches_event_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_matches
    ADD CONSTRAINT event_matches_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.events(id) ON DELETE CASCADE;


--
-- TOC entry 7013 (class 2606 OID 20496)
-- Name: event_matches event_matches_player1_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_matches
    ADD CONSTRAINT event_matches_player1_id_fkey FOREIGN KEY (player1_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7014 (class 2606 OID 20501)
-- Name: event_matches event_matches_player2_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_matches
    ADD CONSTRAINT event_matches_player2_id_fkey FOREIGN KEY (player2_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7015 (class 2606 OID 20506)
-- Name: event_matches event_matches_winner_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_matches
    ADD CONSTRAINT event_matches_winner_id_fkey FOREIGN KEY (winner_id) REFERENCES public.players(id);


--
-- TOC entry 7022 (class 2606 OID 20605)
-- Name: event_notifications event_notifications_event_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_notifications
    ADD CONSTRAINT event_notifications_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.events(id) ON DELETE CASCADE;


--
-- TOC entry 7023 (class 2606 OID 20600)
-- Name: event_notifications event_notifications_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_notifications
    ADD CONSTRAINT event_notifications_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7010 (class 2606 OID 20468)
-- Name: event_participants event_participants_event_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_participants
    ADD CONSTRAINT event_participants_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.events(id) ON DELETE CASCADE;


--
-- TOC entry 7011 (class 2606 OID 20473)
-- Name: event_participants event_participants_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_participants
    ADD CONSTRAINT event_participants_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6913 (class 2606 OID 17543)
-- Name: event_participation event_participation_event_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_participation
    ADD CONSTRAINT event_participation_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.events(id) ON DELETE CASCADE;


--
-- TOC entry 6914 (class 2606 OID 17548)
-- Name: event_participation event_participation_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_participation
    ADD CONSTRAINT event_participation_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7017 (class 2606 OID 20541)
-- Name: event_rewards_claimed event_rewards_claimed_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_rewards_claimed
    ADD CONSTRAINT event_rewards_claimed_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7018 (class 2606 OID 20536)
-- Name: event_rewards_claimed event_rewards_claimed_reward_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_rewards_claimed
    ADD CONSTRAINT event_rewards_claimed_reward_id_fkey FOREIGN KEY (reward_id) REFERENCES public.event_rewards(id) ON DELETE CASCADE;


--
-- TOC entry 7016 (class 2606 OID 20522)
-- Name: event_rewards event_rewards_event_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_rewards
    ADD CONSTRAINT event_rewards_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.events(id) ON DELETE CASCADE;


--
-- TOC entry 7019 (class 2606 OID 20560)
-- Name: event_statistics event_statistics_event_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.event_statistics
    ADD CONSTRAINT event_statistics_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.events(id) ON DELETE CASCADE;


--
-- TOC entry 6882 (class 2606 OID 21104)
-- Name: buildings fk_buildings_building_type; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.buildings
    ADD CONSTRAINT fk_buildings_building_type FOREIGN KEY (building_type_id) REFERENCES public.building_types(id);


--
-- TOC entry 6948 (class 2606 OID 18161)
-- Name: generated_reports generated_reports_requested_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.generated_reports
    ADD CONSTRAINT generated_reports_requested_by_fkey FOREIGN KEY (requested_by) REFERENCES public.admins(id);


--
-- TOC entry 6918 (class 2606 OID 17691)
-- Name: hero_abilities hero_abilities_hero_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_abilities
    ADD CONSTRAINT hero_abilities_hero_id_fkey FOREIGN KEY (hero_id) REFERENCES public.heroes(id) ON DELETE CASCADE;


--
-- TOC entry 6960 (class 2606 OID 18843)
-- Name: hero_artifacts hero_artifacts_hero_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_artifacts
    ADD CONSTRAINT hero_artifacts_hero_id_fkey FOREIGN KEY (hero_id) REFERENCES public.player_heroes(id) ON DELETE CASCADE;


--
-- TOC entry 6963 (class 2606 OID 18901)
-- Name: hero_battles hero_battles_hero_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_battles
    ADD CONSTRAINT hero_battles_hero_id_fkey FOREIGN KEY (hero_id) REFERENCES public.player_heroes(id) ON DELETE CASCADE;


--
-- TOC entry 6964 (class 2606 OID 18896)
-- Name: hero_battles hero_battles_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_battles
    ADD CONSTRAINT hero_battles_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6966 (class 2606 OID 18972)
-- Name: hero_equipment hero_equipment_hero_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_equipment
    ADD CONSTRAINT hero_equipment_hero_id_fkey FOREIGN KEY (hero_id) REFERENCES public.player_heroes(id) ON DELETE CASCADE;


--
-- TOC entry 6961 (class 2606 OID 18862)
-- Name: hero_quests hero_quests_hero_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_quests
    ADD CONSTRAINT hero_quests_hero_id_fkey FOREIGN KEY (hero_id) REFERENCES public.player_heroes(id) ON DELETE CASCADE;


--
-- TOC entry 6959 (class 2606 OID 18825)
-- Name: hero_skills hero_skills_hero_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_skills
    ADD CONSTRAINT hero_skills_hero_id_fkey FOREIGN KEY (hero_id) REFERENCES public.player_heroes(id) ON DELETE CASCADE;


--
-- TOC entry 6965 (class 2606 OID 18920)
-- Name: hero_statistics hero_statistics_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.hero_statistics
    ADD CONSTRAINT hero_statistics_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6917 (class 2606 OID 17674)
-- Name: heroes heroes_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.heroes
    ADD CONSTRAINT heroes_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6982 (class 2606 OID 19640)
-- Name: market_alerts market_alerts_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_alerts
    ADD CONSTRAINT market_alerts_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6972 (class 2606 OID 19541)
-- Name: market_listings market_listings_currency_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_listings
    ADD CONSTRAINT market_listings_currency_id_fkey FOREIGN KEY (currency_id) REFERENCES public.currencies(id);


--
-- TOC entry 6973 (class 2606 OID 19536)
-- Name: market_listings market_listings_seller_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_listings
    ADD CONSTRAINT market_listings_seller_id_fkey FOREIGN KEY (seller_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6974 (class 2606 OID 19561)
-- Name: market_transactions market_transactions_buyer_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_transactions
    ADD CONSTRAINT market_transactions_buyer_id_fkey FOREIGN KEY (buyer_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6975 (class 2606 OID 19571)
-- Name: market_transactions market_transactions_currency_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_transactions
    ADD CONSTRAINT market_transactions_currency_id_fkey FOREIGN KEY (currency_id) REFERENCES public.currencies(id);


--
-- TOC entry 6976 (class 2606 OID 19556)
-- Name: market_transactions market_transactions_listing_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_transactions
    ADD CONSTRAINT market_transactions_listing_id_fkey FOREIGN KEY (listing_id) REFERENCES public.market_listings(id) ON DELETE CASCADE;


--
-- TOC entry 6977 (class 2606 OID 19566)
-- Name: market_transactions market_transactions_seller_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.market_transactions
    ADD CONSTRAINT market_transactions_seller_id_fkey FOREIGN KEY (seller_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6929 (class 2606 OID 17851)
-- Name: notifications notifications_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.notifications
    ADD CONSTRAINT notifications_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6941 (class 2606 OID 18040)
-- Name: performance_logs performance_logs_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.performance_logs
    ADD CONSTRAINT performance_logs_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id);


--
-- TOC entry 6910 (class 2606 OID 17502)
-- Name: player_achievements player_achievements_achievement_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_achievements
    ADD CONSTRAINT player_achievements_achievement_id_fkey FOREIGN KEY (achievement_id) REFERENCES public.achievements(id) ON DELETE CASCADE;


--
-- TOC entry 6911 (class 2606 OID 17497)
-- Name: player_achievements player_achievements_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_achievements
    ADD CONSTRAINT player_achievements_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6978 (class 2606 OID 19588)
-- Name: player_economy player_economy_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_economy
    ADD CONSTRAINT player_economy_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7033 (class 2606 OID 21035)
-- Name: player_global_currency player_global_currency_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.player_global_currency
    ADD CONSTRAINT player_global_currency_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6962 (class 2606 OID 18879)
-- Name: player_hero_quests player_hero_quests_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_hero_quests
    ADD CONSTRAINT player_hero_quests_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6956 (class 2606 OID 18805)
-- Name: player_heroes player_heroes_current_village_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_heroes
    ADD CONSTRAINT player_heroes_current_village_id_fkey FOREIGN KEY (current_village_id) REFERENCES public.villages(id);


--
-- TOC entry 6957 (class 2606 OID 18800)
-- Name: player_heroes player_heroes_hero_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_heroes
    ADD CONSTRAINT player_heroes_hero_type_id_fkey FOREIGN KEY (hero_type_id) REFERENCES public.hero_types(id) ON DELETE CASCADE;


--
-- TOC entry 6958 (class 2606 OID 18795)
-- Name: player_heroes player_heroes_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_heroes
    ADD CONSTRAINT player_heroes_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7027 (class 2606 OID 20845)
-- Name: player_prestige player_prestige_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_prestige
    ADD CONSTRAINT player_prestige_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6919 (class 2606 OID 17723)
-- Name: player_quests player_quests_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_quests
    ADD CONSTRAINT player_quests_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6920 (class 2606 OID 17728)
-- Name: player_quests player_quests_quest_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_quests
    ADD CONSTRAINT player_quests_quest_id_fkey FOREIGN KEY (quest_id) REFERENCES public.quests(id) ON DELETE CASCADE;


--
-- TOC entry 6912 (class 2606 OID 17517)
-- Name: player_statistics player_statistics_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_statistics
    ADD CONSTRAINT player_statistics_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6915 (class 2606 OID 17645)
-- Name: player_technologies player_technologies_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_technologies
    ADD CONSTRAINT player_technologies_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6916 (class 2606 OID 17650)
-- Name: player_technologies player_technologies_technology_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_technologies
    ADD CONSTRAINT player_technologies_technology_id_fkey FOREIGN KEY (technology_id) REFERENCES public.technologies(id) ON DELETE CASCADE;


--
-- TOC entry 6969 (class 2606 OID 19211)
-- Name: player_units player_units_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_units
    ADD CONSTRAINT player_units_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6970 (class 2606 OID 19216)
-- Name: player_units player_units_unit_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.player_units
    ADD CONSTRAINT player_units_unit_type_id_fkey FOREIGN KEY (unit_type_id) REFERENCES public.unit_types(id) ON DELETE CASCADE;


--
-- TOC entry 7034 (class 2606 OID 21051)
-- Name: player_world_currency player_world_currency_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.player_world_currency
    ADD CONSTRAINT player_world_currency_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7035 (class 2606 OID 21056)
-- Name: player_world_currency player_world_currency_world_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.player_world_currency
    ADD CONSTRAINT player_world_currency_world_id_fkey FOREIGN KEY (world_id) REFERENCES public.worlds(id) ON DELETE CASCADE;


--
-- TOC entry 7031 (class 2606 OID 20992)
-- Name: player_world_entries player_world_entries_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.player_world_entries
    ADD CONSTRAINT player_world_entries_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7032 (class 2606 OID 20997)
-- Name: player_world_entries player_world_entries_world_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.player_world_entries
    ADD CONSTRAINT player_world_entries_world_id_fkey FOREIGN KEY (world_id) REFERENCES public.worlds(id) ON DELETE CASCADE;


--
-- TOC entry 6876 (class 2606 OID 20952)
-- Name: players players_alliance_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.players
    ADD CONSTRAINT players_alliance_id_fkey FOREIGN KEY (alliance_id) REFERENCES public.alliances(id) ON DELETE SET NULL;


--
-- TOC entry 6877 (class 2606 OID 20957)
-- Name: players players_world_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.players
    ADD CONSTRAINT players_world_id_fkey FOREIGN KEY (world_id) REFERENCES public.worlds(id) ON DELETE SET NULL;


--
-- TOC entry 7026 (class 2606 OID 20793)
-- Name: prestige_achievements prestige_achievements_title_reward_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_achievements
    ADD CONSTRAINT prestige_achievements_title_reward_id_fkey FOREIGN KEY (title_reward_id) REFERENCES public.titles(id);


--
-- TOC entry 7025 (class 2606 OID 20699)
-- Name: prestige_levels prestige_levels_title_reward_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_levels
    ADD CONSTRAINT prestige_levels_title_reward_id_fkey FOREIGN KEY (title_reward_id) REFERENCES public.titles(id);


--
-- TOC entry 7030 (class 2606 OID 20913)
-- Name: prestige_notifications prestige_notifications_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_notifications
    ADD CONSTRAINT prestige_notifications_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7028 (class 2606 OID 20875)
-- Name: prestige_rankings prestige_rankings_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_rankings
    ADD CONSTRAINT prestige_rankings_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7029 (class 2606 OID 20895)
-- Name: prestige_stats prestige_stats_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.prestige_stats
    ADD CONSTRAINT prestige_stats_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6971 (class 2606 OID 19498)
-- Name: price_history price_history_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.price_history
    ADD CONSTRAINT price_history_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.market_items(id) ON DELETE CASCADE;


--
-- TOC entry 7008 (class 2606 OID 20416)
-- Name: quest_notifications quest_notifications_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.quest_notifications
    ADD CONSTRAINT quest_notifications_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 7009 (class 2606 OID 20421)
-- Name: quest_notifications quest_notifications_quest_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.quest_notifications
    ADD CONSTRAINT quest_notifications_quest_id_fkey FOREIGN KEY (quest_id) REFERENCES public.quests(id) ON DELETE CASCADE;


--
-- TOC entry 7006 (class 2606 OID 20382)
-- Name: quest_rewards quest_rewards_quest_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.quest_rewards
    ADD CONSTRAINT quest_rewards_quest_id_fkey FOREIGN KEY (quest_id) REFERENCES public.quests(id) ON DELETE CASCADE;


--
-- TOC entry 7007 (class 2606 OID 20399)
-- Name: quest_statistics quest_statistics_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.quest_statistics
    ADD CONSTRAINT quest_statistics_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6986 (class 2606 OID 19933)
-- Name: ranking_entries ranking_entries_alliance_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_entries
    ADD CONSTRAINT ranking_entries_alliance_id_fkey FOREIGN KEY (alliance_id) REFERENCES public.alliances(id) ON DELETE CASCADE;


--
-- TOC entry 6987 (class 2606 OID 19928)
-- Name: ranking_entries ranking_entries_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_entries
    ADD CONSTRAINT ranking_entries_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6988 (class 2606 OID 19923)
-- Name: ranking_entries ranking_entries_ranking_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_entries
    ADD CONSTRAINT ranking_entries_ranking_type_id_fkey FOREIGN KEY (ranking_type_id) REFERENCES public.ranking_types(id) ON DELETE CASCADE;


--
-- TOC entry 6989 (class 2606 OID 19938)
-- Name: ranking_entries ranking_entries_village_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_entries
    ADD CONSTRAINT ranking_entries_village_id_fkey FOREIGN KEY (village_id) REFERENCES public.villages(id) ON DELETE CASCADE;


--
-- TOC entry 6990 (class 2606 OID 19943)
-- Name: ranking_entries ranking_entries_world_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_entries
    ADD CONSTRAINT ranking_entries_world_id_fkey FOREIGN KEY (world_id) REFERENCES public.worlds(id) ON DELETE CASCADE;


--
-- TOC entry 6984 (class 2606 OID 19852)
-- Name: ranking_history ranking_history_category_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_history
    ADD CONSTRAINT ranking_history_category_id_fkey FOREIGN KEY (category_id) REFERENCES public.ranking_categories(id) ON DELETE CASCADE;


--
-- TOC entry 6985 (class 2606 OID 19857)
-- Name: ranking_history ranking_history_season_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_history
    ADD CONSTRAINT ranking_history_season_id_fkey FOREIGN KEY (season_id) REFERENCES public.ranking_seasons(id) ON DELETE CASCADE;


--
-- TOC entry 6927 (class 2606 OID 17835)
-- Name: ranking_positions ranking_positions_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_positions
    ADD CONSTRAINT ranking_positions_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6928 (class 2606 OID 17830)
-- Name: ranking_positions ranking_positions_ranking_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_positions
    ADD CONSTRAINT ranking_positions_ranking_id_fkey FOREIGN KEY (ranking_id) REFERENCES public.rankings(id) ON DELETE CASCADE;


--
-- TOC entry 6995 (class 2606 OID 20037)
-- Name: ranking_rewards_claimed ranking_rewards_claimed_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_rewards_claimed
    ADD CONSTRAINT ranking_rewards_claimed_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6996 (class 2606 OID 20032)
-- Name: ranking_rewards_claimed ranking_rewards_claimed_reward_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_rewards_claimed
    ADD CONSTRAINT ranking_rewards_claimed_reward_id_fkey FOREIGN KEY (reward_id) REFERENCES public.ranking_rewards(id) ON DELETE CASCADE;


--
-- TOC entry 6994 (class 2606 OID 20018)
-- Name: ranking_rewards ranking_rewards_ranking_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.ranking_rewards
    ADD CONSTRAINT ranking_rewards_ranking_type_id_fkey FOREIGN KEY (ranking_type_id) REFERENCES public.ranking_types(id) ON DELETE CASCADE;


--
-- TOC entry 6926 (class 2606 OID 17815)
-- Name: rankings rankings_world_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.rankings
    ADD CONSTRAINT rankings_world_id_fkey FOREIGN KEY (world_id) REFERENCES public.worlds(id);


--
-- TOC entry 6949 (class 2606 OID 18478)
-- Name: research_queue research_queue_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.research_queue
    ADD CONSTRAINT research_queue_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6950 (class 2606 OID 18483)
-- Name: research_queue research_queue_technology_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.research_queue
    ADD CONSTRAINT research_queue_technology_id_fkey FOREIGN KEY (technology_id) REFERENCES public.technologies(id) ON DELETE CASCADE;


--
-- TOC entry 6955 (class 2606 OID 18551)
-- Name: research_statistics research_statistics_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.research_statistics
    ADD CONSTRAINT research_statistics_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6880 (class 2606 OID 17087)
-- Name: resources resources_village_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.resources
    ADD CONSTRAINT resources_village_id_fkey FOREIGN KEY (village_id) REFERENCES public.villages(id);


--
-- TOC entry 6940 (class 2606 OID 18026)
-- Name: security_logs security_logs_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.security_logs
    ADD CONSTRAINT security_logs_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id);


--
-- TOC entry 6921 (class 2606 OID 17746)
-- Name: special_buildings special_buildings_village_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.special_buildings
    ADD CONSTRAINT special_buildings_village_id_fkey FOREIGN KEY (village_id) REFERENCES public.villages(id) ON DELETE CASCADE;


--
-- TOC entry 6924 (class 2606 OID 17795)
-- Name: special_event_participation special_event_participation_event_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.special_event_participation
    ADD CONSTRAINT special_event_participation_event_id_fkey FOREIGN KEY (event_id) REFERENCES public.special_events(id) ON DELETE CASCADE;


--
-- TOC entry 6925 (class 2606 OID 17800)
-- Name: special_event_participation special_event_participation_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.special_event_participation
    ADD CONSTRAINT special_event_participation_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id) ON DELETE CASCADE;


--
-- TOC entry 6923 (class 2606 OID 17779)
-- Name: special_events special_events_world_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.special_events
    ADD CONSTRAINT special_events_world_id_fkey FOREIGN KEY (world_id) REFERENCES public.worlds(id);


--
-- TOC entry 6922 (class 2606 OID 17763)
-- Name: special_resources special_resources_village_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.special_resources
    ADD CONSTRAINT special_resources_village_id_fkey FOREIGN KEY (village_id) REFERENCES public.villages(id) ON DELETE CASCADE;


--
-- TOC entry 6997 (class 2606 OID 20053)
-- Name: statistics_snapshots statistics_snapshots_ranking_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.statistics_snapshots
    ADD CONSTRAINT statistics_snapshots_ranking_type_id_fkey FOREIGN KEY (ranking_type_id) REFERENCES public.ranking_types(id) ON DELETE CASCADE;


--
-- TOC entry 6942 (class 2606 OID 18064)
-- Name: system_alerts system_alerts_acknowledged_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.system_alerts
    ADD CONSTRAINT system_alerts_acknowledged_by_fkey FOREIGN KEY (acknowledged_by) REFERENCES public.admins(id);


--
-- TOC entry 6943 (class 2606 OID 18081)
-- Name: system_config system_config_updated_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.system_config
    ADD CONSTRAINT system_config_updated_by_fkey FOREIGN KEY (updated_by) REFERENCES public.admins(id);


--
-- TOC entry 6939 (class 2606 OID 18012)
-- Name: system_logs system_logs_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.system_logs
    ADD CONSTRAINT system_logs_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id);


--
-- TOC entry 6944 (class 2606 OID 18108)
-- Name: task_executions task_executions_task_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.task_executions
    ADD CONSTRAINT task_executions_task_id_fkey FOREIGN KEY (task_id) REFERENCES public.maintenance_tasks(id);


--
-- TOC entry 6954 (class 2606 OID 18530)
-- Name: technology_costs technology_costs_technology_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.technology_costs
    ADD CONSTRAINT technology_costs_technology_id_fkey FOREIGN KEY (technology_id) REFERENCES public.technologies(id) ON DELETE CASCADE;


--
-- TOC entry 6951 (class 2606 OID 18496)
-- Name: technology_effects technology_effects_technology_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.technology_effects
    ADD CONSTRAINT technology_effects_technology_id_fkey FOREIGN KEY (technology_id) REFERENCES public.technologies(id) ON DELETE CASCADE;


--
-- TOC entry 6952 (class 2606 OID 18515)
-- Name: technology_requirements technology_requirements_required_tech_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.technology_requirements
    ADD CONSTRAINT technology_requirements_required_tech_id_fkey FOREIGN KEY (required_tech_id) REFERENCES public.technologies(id) ON DELETE CASCADE;


--
-- TOC entry 6953 (class 2606 OID 18510)
-- Name: technology_requirements technology_requirements_technology_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.technology_requirements
    ADD CONSTRAINT technology_requirements_technology_id_fkey FOREIGN KEY (technology_id) REFERENCES public.technologies(id) ON DELETE CASCADE;


--
-- TOC entry 7024 (class 2606 OID 20669)
-- Name: titles titles_category_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.titles
    ADD CONSTRAINT titles_category_id_fkey FOREIGN KEY (category_id) REFERENCES public.title_categories(id) ON DELETE CASCADE;


--
-- TOC entry 6905 (class 2606 OID 17445)
-- Name: trade_offers trade_offers_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.trade_offers
    ADD CONSTRAINT trade_offers_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id);


--
-- TOC entry 6906 (class 2606 OID 17450)
-- Name: trade_offers trade_offers_village_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.trade_offers
    ADD CONSTRAINT trade_offers_village_id_fkey FOREIGN KEY (village_id) REFERENCES public.villages(id);


--
-- TOC entry 6933 (class 2606 OID 17899)
-- Name: trade_reports trade_reports_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.trade_reports
    ADD CONSTRAINT trade_reports_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id);


--
-- TOC entry 6934 (class 2606 OID 17894)
-- Name: trade_reports trade_reports_transaction_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.trade_reports
    ADD CONSTRAINT trade_reports_transaction_id_fkey FOREIGN KEY (transaction_id) REFERENCES public.trade_transactions(id) ON DELETE CASCADE;


--
-- TOC entry 6907 (class 2606 OID 17462)
-- Name: trade_transactions trade_transactions_buyer_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.trade_transactions
    ADD CONSTRAINT trade_transactions_buyer_id_fkey FOREIGN KEY (buyer_id) REFERENCES public.players(id);


--
-- TOC entry 6908 (class 2606 OID 17472)
-- Name: trade_transactions trade_transactions_offer_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.trade_transactions
    ADD CONSTRAINT trade_transactions_offer_id_fkey FOREIGN KEY (offer_id) REFERENCES public.trade_offers(id);


--
-- TOC entry 6909 (class 2606 OID 17467)
-- Name: trade_transactions trade_transactions_seller_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.trade_transactions
    ADD CONSTRAINT trade_transactions_seller_id_fkey FOREIGN KEY (seller_id) REFERENCES public.players(id);


--
-- TOC entry 6885 (class 2606 OID 17246)
-- Name: training_queue training_queue_unit_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.training_queue
    ADD CONSTRAINT training_queue_unit_type_id_fkey FOREIGN KEY (unit_type_id) REFERENCES public.unit_types(id);


--
-- TOC entry 6886 (class 2606 OID 17241)
-- Name: training_queue training_queue_village_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.training_queue
    ADD CONSTRAINT training_queue_village_id_fkey FOREIGN KEY (village_id) REFERENCES public.villages(id) ON DELETE CASCADE;


--
-- TOC entry 6901 (class 2606 OID 17427)
-- Name: troop_movements troop_movements_battle_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.troop_movements
    ADD CONSTRAINT troop_movements_battle_id_fkey FOREIGN KEY (battle_id) REFERENCES public.battles(id);


--
-- TOC entry 6902 (class 2606 OID 17417)
-- Name: troop_movements troop_movements_from_village_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.troop_movements
    ADD CONSTRAINT troop_movements_from_village_id_fkey FOREIGN KEY (from_village_id) REFERENCES public.villages(id);


--
-- TOC entry 6903 (class 2606 OID 17412)
-- Name: troop_movements troop_movements_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.troop_movements
    ADD CONSTRAINT troop_movements_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id);


--
-- TOC entry 6904 (class 2606 OID 17422)
-- Name: troop_movements troop_movements_to_village_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.troop_movements
    ADD CONSTRAINT troop_movements_to_village_id_fkey FOREIGN KEY (to_village_id) REFERENCES public.villages(id);


--
-- TOC entry 6883 (class 2606 OID 17226)
-- Name: units units_unit_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.units
    ADD CONSTRAINT units_unit_type_id_fkey FOREIGN KEY (unit_type_id) REFERENCES public.unit_types(id);


--
-- TOC entry 6884 (class 2606 OID 17221)
-- Name: units units_village_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.units
    ADD CONSTRAINT units_village_id_fkey FOREIGN KEY (village_id) REFERENCES public.villages(id) ON DELETE CASCADE;


--
-- TOC entry 6992 (class 2606 OID 19982)
-- Name: village_statistics village_statistics_village_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.village_statistics
    ADD CONSTRAINT village_statistics_village_id_fkey FOREIGN KEY (village_id) REFERENCES public.villages(id) ON DELETE CASCADE;


--
-- TOC entry 6878 (class 2606 OID 17066)
-- Name: villages villages_player_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.villages
    ADD CONSTRAINT villages_player_id_fkey FOREIGN KEY (player_id) REFERENCES public.players(id);


--
-- TOC entry 6879 (class 2606 OID 17071)
-- Name: villages villages_world_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.villages
    ADD CONSTRAINT villages_world_id_fkey FOREIGN KEY (world_id) REFERENCES public.worlds(id);


--
-- TOC entry 6993 (class 2606 OID 20002)
-- Name: world_statistics world_statistics_world_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: etheria_user
--

ALTER TABLE ONLY public.world_statistics
    ADD CONSTRAINT world_statistics_world_id_fkey FOREIGN KEY (world_id) REFERENCES public.worlds(id) ON DELETE CASCADE;


--
-- TOC entry 7519 (class 0 OID 0)
-- Dependencies: 392
-- Name: TABLE player_world_entries; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.player_world_entries TO etheria_user;


-- Completed on 2025-08-25 00:32:37

--
-- PostgreSQL database dump complete
--

